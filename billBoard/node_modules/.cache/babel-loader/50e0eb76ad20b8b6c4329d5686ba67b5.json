{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridLogger, useGridApiMethod, useGridApiEventHandler } from '../../utils';\nimport { gridColumnMenuSelector } from './columnMenuSelector';\nimport { gridColumnLookupSelector, gridColumnVisibilityModelSelector, gridColumnFieldsSelector } from '../columns/gridColumnsSelector';\nexport const columnMenuStateInitializer = state => _extends({}, state, {\n  columnMenu: {\n    open: false\n  }\n});\n/**\n * @requires useGridColumnResize (event)\n * @requires useGridInfiniteLoader (event)\n */\n\nexport const useGridColumnMenu = apiRef => {\n  const logger = useGridLogger(apiRef, 'useGridColumnMenu');\n  /**\n   * API METHODS\n   */\n\n  const showColumnMenu = React.useCallback(field => {\n    const columnMenuState = gridColumnMenuSelector(apiRef.current.state);\n    const newState = {\n      open: true,\n      field\n    };\n    const shouldUpdate = newState.open !== columnMenuState.open || newState.field !== columnMenuState.field;\n\n    if (shouldUpdate) {\n      apiRef.current.setState(state => {\n        if (state.columnMenu.open && state.columnMenu.field === field) {\n          return state;\n        }\n\n        logger.debug('Opening Column Menu');\n        return _extends({}, state, {\n          columnMenu: {\n            open: true,\n            field\n          }\n        });\n      });\n      apiRef.current.hidePreferences();\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, logger]);\n  const hideColumnMenu = React.useCallback(() => {\n    const columnMenuState = gridColumnMenuSelector(apiRef.current.state);\n\n    if (columnMenuState.field) {\n      const columnLookup = gridColumnLookupSelector(apiRef);\n      const columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n      const orderedFields = gridColumnFieldsSelector(apiRef);\n      let fieldToFocus = columnMenuState.field; // If the column was removed from the grid, we need to find the closest visible field\n\n      if (!columnLookup[fieldToFocus]) {\n        fieldToFocus = orderedFields[0];\n      } // If the field to focus is hidden, we need to find the closest visible field\n\n\n      if (columnVisibilityModel[fieldToFocus] === false) {\n        // contains visible column fields + the field that was just hidden\n        const visibleOrderedFields = orderedFields.filter(field => {\n          if (field === fieldToFocus) {\n            return true;\n          }\n\n          return columnVisibilityModel[field] !== false;\n        });\n        const fieldIndex = visibleOrderedFields.indexOf(fieldToFocus);\n        fieldToFocus = visibleOrderedFields[fieldIndex + 1] || visibleOrderedFields[fieldIndex - 1];\n      }\n\n      apiRef.current.setColumnHeaderFocus(fieldToFocus);\n    }\n\n    const newState = {\n      open: false,\n      field: undefined\n    };\n    const shouldUpdate = newState.open !== columnMenuState.open || newState.field !== columnMenuState.field;\n\n    if (shouldUpdate) {\n      apiRef.current.setState(state => {\n        logger.debug('Hiding Column Menu');\n        return _extends({}, state, {\n          columnMenu: newState\n        });\n      });\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, logger]);\n  const toggleColumnMenu = React.useCallback(field => {\n    logger.debug('Toggle Column Menu');\n    const columnMenu = gridColumnMenuSelector(apiRef.current.state);\n\n    if (!columnMenu.open || columnMenu.field !== field) {\n      showColumnMenu(field);\n    } else {\n      hideColumnMenu();\n    }\n  }, [apiRef, logger, showColumnMenu, hideColumnMenu]);\n  const columnMenuApi = {\n    showColumnMenu,\n    hideColumnMenu,\n    toggleColumnMenu\n  };\n  useGridApiMethod(apiRef, columnMenuApi, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStart', hideColumnMenu);\n  useGridApiEventHandler(apiRef, 'virtualScrollerWheel', apiRef.current.hideColumnMenu);\n  useGridApiEventHandler(apiRef, 'virtualScrollerTouchMove', apiRef.current.hideColumnMenu);\n};","map":{"version":3,"names":["_extends","React","useGridLogger","useGridApiMethod","useGridApiEventHandler","gridColumnMenuSelector","gridColumnLookupSelector","gridColumnVisibilityModelSelector","gridColumnFieldsSelector","columnMenuStateInitializer","state","columnMenu","open","useGridColumnMenu","apiRef","logger","showColumnMenu","useCallback","field","columnMenuState","current","newState","shouldUpdate","setState","debug","hidePreferences","forceUpdate","hideColumnMenu","columnLookup","columnVisibilityModel","orderedFields","fieldToFocus","visibleOrderedFields","filter","fieldIndex","indexOf","setColumnHeaderFocus","undefined","toggleColumnMenu","columnMenuApi"],"sources":["C:/Users/kb/Downloads/billBoard/billboard/node_modules/@mui/x-data-grid/hooks/features/columnMenu/useGridColumnMenu.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridLogger, useGridApiMethod, useGridApiEventHandler } from '../../utils';\nimport { gridColumnMenuSelector } from './columnMenuSelector';\nimport { gridColumnLookupSelector, gridColumnVisibilityModelSelector, gridColumnFieldsSelector } from '../columns/gridColumnsSelector';\nexport const columnMenuStateInitializer = state => _extends({}, state, {\n  columnMenu: {\n    open: false\n  }\n});\n\n/**\n * @requires useGridColumnResize (event)\n * @requires useGridInfiniteLoader (event)\n */\nexport const useGridColumnMenu = apiRef => {\n  const logger = useGridLogger(apiRef, 'useGridColumnMenu');\n\n  /**\n   * API METHODS\n   */\n  const showColumnMenu = React.useCallback(field => {\n    const columnMenuState = gridColumnMenuSelector(apiRef.current.state);\n    const newState = {\n      open: true,\n      field\n    };\n    const shouldUpdate = newState.open !== columnMenuState.open || newState.field !== columnMenuState.field;\n    if (shouldUpdate) {\n      apiRef.current.setState(state => {\n        if (state.columnMenu.open && state.columnMenu.field === field) {\n          return state;\n        }\n        logger.debug('Opening Column Menu');\n        return _extends({}, state, {\n          columnMenu: {\n            open: true,\n            field\n          }\n        });\n      });\n      apiRef.current.hidePreferences();\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, logger]);\n  const hideColumnMenu = React.useCallback(() => {\n    const columnMenuState = gridColumnMenuSelector(apiRef.current.state);\n    if (columnMenuState.field) {\n      const columnLookup = gridColumnLookupSelector(apiRef);\n      const columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n      const orderedFields = gridColumnFieldsSelector(apiRef);\n      let fieldToFocus = columnMenuState.field;\n\n      // If the column was removed from the grid, we need to find the closest visible field\n      if (!columnLookup[fieldToFocus]) {\n        fieldToFocus = orderedFields[0];\n      }\n\n      // If the field to focus is hidden, we need to find the closest visible field\n      if (columnVisibilityModel[fieldToFocus] === false) {\n        // contains visible column fields + the field that was just hidden\n        const visibleOrderedFields = orderedFields.filter(field => {\n          if (field === fieldToFocus) {\n            return true;\n          }\n          return columnVisibilityModel[field] !== false;\n        });\n        const fieldIndex = visibleOrderedFields.indexOf(fieldToFocus);\n        fieldToFocus = visibleOrderedFields[fieldIndex + 1] || visibleOrderedFields[fieldIndex - 1];\n      }\n      apiRef.current.setColumnHeaderFocus(fieldToFocus);\n    }\n    const newState = {\n      open: false,\n      field: undefined\n    };\n    const shouldUpdate = newState.open !== columnMenuState.open || newState.field !== columnMenuState.field;\n    if (shouldUpdate) {\n      apiRef.current.setState(state => {\n        logger.debug('Hiding Column Menu');\n        return _extends({}, state, {\n          columnMenu: newState\n        });\n      });\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, logger]);\n  const toggleColumnMenu = React.useCallback(field => {\n    logger.debug('Toggle Column Menu');\n    const columnMenu = gridColumnMenuSelector(apiRef.current.state);\n    if (!columnMenu.open || columnMenu.field !== field) {\n      showColumnMenu(field);\n    } else {\n      hideColumnMenu();\n    }\n  }, [apiRef, logger, showColumnMenu, hideColumnMenu]);\n  const columnMenuApi = {\n    showColumnMenu,\n    hideColumnMenu,\n    toggleColumnMenu\n  };\n  useGridApiMethod(apiRef, columnMenuApi, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStart', hideColumnMenu);\n  useGridApiEventHandler(apiRef, 'virtualScrollerWheel', apiRef.current.hideColumnMenu);\n  useGridApiEventHandler(apiRef, 'virtualScrollerTouchMove', apiRef.current.hideColumnMenu);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}