{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toPropertyKey from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js\";\nimport _defineProperty from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectWithoutProperties from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _slicedToArray from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"C:/Users/kb/Downloads/billBoard/billBoard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _excluded = [\"render\", \"orientation\", \"loop\", \"cols\", \"disabledIndices\", \"activeIndex\", \"onNavigate\", \"itemSizes\", \"dense\"],\n    _excluded2 = [\"render\"],\n    _excluded3 = [\"transform\"],\n    _excluded4 = [\"context\", \"width\", \"height\", \"tipRadius\", \"strokeWidth\", \"staticOffset\", \"stroke\", \"d\", \"style\"],\n    _excluded5 = [\"lockScroll\"],\n    _excluded6 = [\"listRef\", \"overflowRef\", \"onFallbackChange\", \"offset\", \"index\", \"minItemsVisible\", \"referenceOverflowThreshold\", \"scrollRef\"];\nimport * as React from 'react';\nimport { useLayoutEffect, useEffect, useRef } from 'react';\nimport { stopEvent, getDocument, isMouseLikePointerType, contains, activeElement, isSafari, isTypeableCombobox, isVirtualClick, isVirtualPointerEvent, getTarget, getPlatform, isTypeableElement, isReactEvent, isRootElement, isEventTargetWithin, isMac, getUserAgent } from '@floating-ui/react/utils';\nimport { floor, evaluate } from '@floating-ui/utils';\nimport { getComputedStyle, isElement, getNodeName, isHTMLElement, getWindow, isLastTraversableNode, getParentNode } from '@floating-ui/utils/dom';\nimport { tabbable, isTabbable } from 'tabbable';\nimport * as ReactDOM from 'react-dom';\nimport { getOverflowAncestors, useFloating as useFloating$1, offset, detectOverflow } from '@floating-ui/react-dom';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, platform, shift, size } from '@floating-ui/react-dom';\n/**\n * Merges an array of refs into a single memoized callback ref or `null`.\n * @see https://floating-ui.com/docs/react-utils#usemergerefs\n */\n\nfunction useMergeRefs(refs) {\n  return React.useMemo(function () {\n    if (refs.every(function (ref) {\n      return ref == null;\n    })) {\n      return null;\n    }\n\n    return function (value) {\n      refs.forEach(function (ref) {\n        if (typeof ref === 'function') {\n          ref(value);\n        } else if (ref != null) {\n          ref.current = value;\n        }\n      });\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n} // https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\n\n\nvar SafeReact = _objectSpread({}, React);\n\nvar useInsertionEffect = SafeReact.useInsertionEffect;\n\nvar useSafeInsertionEffect = useInsertionEffect || function (fn) {\n  return fn();\n};\n\nfunction useEffectEvent(callback) {\n  var ref = React.useRef(function () {\n    if (process.env.NODE_ENV !== \"production\") {\n      throw new Error('Cannot call an event handler while rendering.');\n    }\n  });\n  useSafeInsertionEffect(function () {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return ref.current == null ? void 0 : ref.current.apply(ref, args);\n  }, []);\n}\n\nvar ARROW_UP = 'ArrowUp';\nvar ARROW_DOWN = 'ArrowDown';\nvar ARROW_LEFT = 'ArrowLeft';\nvar ARROW_RIGHT = 'ArrowRight';\n\nfunction isDifferentRow(index, cols, prevRow) {\n  return Math.floor(index / cols) !== prevRow;\n}\n\nfunction isIndexOutOfBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\n\nfunction getMinIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    disabledIndices: disabledIndices\n  });\n}\n\nfunction getMaxIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices: disabledIndices\n  });\n}\n\nfunction findNonDisabledIndex(listRef, _temp) {\n  var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$startingIndex = _ref5.startingIndex,\n      startingIndex = _ref5$startingIndex === void 0 ? -1 : _ref5$startingIndex,\n      _ref5$decrement = _ref5.decrement,\n      decrement = _ref5$decrement === void 0 ? false : _ref5$decrement,\n      disabledIndices = _ref5.disabledIndices,\n      _ref5$amount = _ref5.amount,\n      amount = _ref5$amount === void 0 ? 1 : _ref5$amount;\n\n  var list = listRef.current;\n  var index = startingIndex;\n\n  do {\n    index += decrement ? -amount : amount;\n  } while (index >= 0 && index <= list.length - 1 && isDisabled(list, index, disabledIndices));\n\n  return index;\n}\n\nfunction getGridNavigatedIndex(elementsRef, _ref) {\n  var event = _ref.event,\n      orientation = _ref.orientation,\n      loop = _ref.loop,\n      cols = _ref.cols,\n      disabledIndices = _ref.disabledIndices,\n      minIndex = _ref.minIndex,\n      maxIndex = _ref.maxIndex,\n      prevIndex = _ref.prevIndex,\n      _ref$stopEvent = _ref.stopEvent,\n      stop = _ref$stopEvent === void 0 ? false : _ref$stopEvent;\n  var nextIndex = prevIndex;\n\n  if (event.key === ARROW_UP) {\n    stop && stopEvent(event);\n\n    if (prevIndex === -1) {\n      nextIndex = maxIndex;\n    } else {\n      nextIndex = findNonDisabledIndex(elementsRef, {\n        startingIndex: nextIndex,\n        amount: cols,\n        decrement: true,\n        disabledIndices: disabledIndices\n      });\n\n      if (loop && (prevIndex - cols < minIndex || nextIndex < 0)) {\n        var col = prevIndex % cols;\n        var maxCol = maxIndex % cols;\n\n        var _offset = maxIndex - (maxCol - col);\n\n        if (maxCol === col) {\n          nextIndex = maxIndex;\n        } else {\n          nextIndex = maxCol > col ? _offset : _offset - cols;\n        }\n      }\n    }\n\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n\n  if (event.key === ARROW_DOWN) {\n    stop && stopEvent(event);\n\n    if (prevIndex === -1) {\n      nextIndex = minIndex;\n    } else {\n      nextIndex = findNonDisabledIndex(elementsRef, {\n        startingIndex: prevIndex,\n        amount: cols,\n        disabledIndices: disabledIndices\n      });\n\n      if (loop && prevIndex + cols > maxIndex) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex % cols - cols,\n          amount: cols,\n          disabledIndices: disabledIndices\n        });\n      }\n    }\n\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  } // Remains on the same row/column.\n\n\n  if (orientation === 'both') {\n    var prevRow = floor(prevIndex / cols);\n\n    if (event.key === ARROW_RIGHT) {\n      stop && stopEvent(event);\n\n      if (prevIndex % cols !== cols - 1) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex,\n          disabledIndices: disabledIndices\n        });\n\n        if (loop && isDifferentRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledIndex(elementsRef, {\n            startingIndex: prevIndex - prevIndex % cols - 1,\n            disabledIndices: disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices: disabledIndices\n        });\n      }\n\n      if (isDifferentRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n\n    if (event.key === ARROW_LEFT) {\n      stop && stopEvent(event);\n\n      if (prevIndex % cols !== 0) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex,\n          decrement: true,\n          disabledIndices: disabledIndices\n        });\n\n        if (loop && isDifferentRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledIndex(elementsRef, {\n            startingIndex: prevIndex + (cols - prevIndex % cols),\n            decrement: true,\n            disabledIndices: disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex + (cols - prevIndex % cols),\n          decrement: true,\n          disabledIndices: disabledIndices\n        });\n      }\n\n      if (isDifferentRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n\n    var lastRow = floor(maxIndex / cols) === prevRow;\n\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      if (loop && lastRow) {\n        nextIndex = event.key === ARROW_LEFT ? maxIndex : findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices: disabledIndices\n        });\n      } else {\n        nextIndex = prevIndex;\n      }\n    }\n  }\n\n  return nextIndex;\n}\n/** For each cell index, gets the item index that occupies that cell */\n\n\nfunction buildCellMap(sizes, cols, dense) {\n  var cellMap = [];\n  var startIndex = 0;\n  sizes.forEach(function (_ref2, index) {\n    var width = _ref2.width,\n        height = _ref2.height;\n\n    if (width > cols) {\n      if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(\"[Floating UI]: Invalid grid - item width at index \" + index + \" is greater than grid columns\");\n      }\n    }\n\n    var itemPlaced = false;\n\n    if (dense) {\n      startIndex = 0;\n    }\n\n    while (!itemPlaced) {\n      var targetCells = [];\n\n      for (var i = 0; i < width; i++) {\n        for (var j = 0; j < height; j++) {\n          targetCells.push(startIndex + i + j * cols);\n        }\n      }\n\n      if (startIndex % cols + width <= cols && targetCells.every(function (cell) {\n        return cellMap[cell] == null;\n      })) {\n        targetCells.forEach(function (cell) {\n          cellMap[cell] = index;\n        });\n        itemPlaced = true;\n      } else {\n        startIndex++;\n      }\n    }\n  }); // convert into a non-sparse array\n\n  return [].concat(cellMap);\n}\n/** Gets cell index of an item's corner or -1 when index is -1. */\n\n\nfunction getCellIndexOfCorner(index, sizes, cellMap, cols, corner) {\n  if (index === -1) return -1;\n  var firstCellIndex = cellMap.indexOf(index);\n  var sizeItem = sizes[index];\n\n  switch (corner) {\n    case 'tl':\n      return firstCellIndex;\n\n    case 'tr':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n\n      return firstCellIndex + sizeItem.width - 1;\n\n    case 'bl':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n\n      return firstCellIndex + (sizeItem.height - 1) * cols;\n\n    case 'br':\n      return cellMap.lastIndexOf(index);\n  }\n}\n/** Gets all cell indices that correspond to the specified indices */\n\n\nfunction getCellIndices(indices, cellMap) {\n  return cellMap.flatMap(function (index, cellIndex) {\n    return indices.includes(index) ? [cellIndex] : [];\n  });\n}\n\nfunction isDisabled(list, index, disabledIndices) {\n  if (disabledIndices) {\n    return disabledIndices.includes(index);\n  }\n\n  var element = list[index];\n  return element == null || element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true';\n}\n\nvar rafId = 0;\n\nfunction enqueueFocus(el, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$preventScrol = _options.preventScroll,\n      preventScroll = _options$preventScrol === void 0 ? false : _options$preventScrol,\n      _options$cancelPrevio = _options.cancelPrevious,\n      cancelPrevious = _options$cancelPrevio === void 0 ? true : _options$cancelPrevio,\n      _options$sync = _options.sync,\n      sync = _options$sync === void 0 ? false : _options$sync;\n  cancelPrevious && cancelAnimationFrame(rafId);\n\n  var exec = function exec() {\n    return el == null ? void 0 : el.focus({\n      preventScroll: preventScroll\n    });\n  };\n\n  if (sync) {\n    exec();\n  } else {\n    rafId = requestAnimationFrame(exec);\n  }\n}\n\nvar index = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction sortByDocumentPosition(a, b) {\n  var position = a.compareDocumentPosition(b);\n\n  if (position & Node.DOCUMENT_POSITION_FOLLOWING || position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    return -1;\n  }\n\n  if (position & Node.DOCUMENT_POSITION_PRECEDING || position & Node.DOCUMENT_POSITION_CONTAINS) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction areMapsEqual(map1, map2) {\n  if (map1.size !== map2.size) {\n    return false;\n  }\n\n  var _iterator = _createForOfIteratorHelper(map1.entries()),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          key = _step$value[0],\n          value = _step$value[1];\n\n      if (value !== map2.get(key)) {\n        return false;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return true;\n}\n\nvar FloatingListContext = /*#__PURE__*/React.createContext({\n  register: function register() {},\n  unregister: function unregister() {},\n  map: /*#__PURE__*/new Map(),\n  elementsRef: {\n    current: []\n  }\n});\n/**\n * Provides context for a list of items within the floating element.\n * @see https://floating-ui.com/docs/FloatingList\n */\n\nfunction FloatingList(props) {\n  var children = props.children,\n      elementsRef = props.elementsRef,\n      labelsRef = props.labelsRef;\n\n  var _React$useState = React.useState(function () {\n    return new Map();\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      map = _React$useState2[0],\n      setMap = _React$useState2[1];\n\n  var register = React.useCallback(function (node) {\n    setMap(function (prevMap) {\n      return new Map(prevMap).set(node, null);\n    });\n  }, []);\n  var unregister = React.useCallback(function (node) {\n    setMap(function (prevMap) {\n      var map = new Map(prevMap);\n      map.delete(node);\n      return map;\n    });\n  }, []);\n  index(function () {\n    var newMap = new Map(map);\n    var nodes = Array.from(newMap.keys()).sort(sortByDocumentPosition);\n    nodes.forEach(function (node, index) {\n      newMap.set(node, index);\n    });\n\n    if (!areMapsEqual(map, newMap)) {\n      setMap(newMap);\n    }\n  }, [map]);\n  return /*#__PURE__*/React.createElement(FloatingListContext.Provider, {\n    value: React.useMemo(function () {\n      return {\n        register: register,\n        unregister: unregister,\n        map: map,\n        elementsRef: elementsRef,\n        labelsRef: labelsRef\n      };\n    }, [register, unregister, map, elementsRef, labelsRef])\n  }, children);\n}\n/**\n * Used to register a list item and its index (DOM position) in the\n * `FloatingList`.\n * @see https://floating-ui.com/docs/FloatingList#uselistitem\n */\n\n\nfunction useListItem(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props = props,\n      label = _props.label;\n\n  var _React$useContext2 = React.useContext(FloatingListContext),\n      register = _React$useContext2.register,\n      unregister = _React$useContext2.unregister,\n      map = _React$useContext2.map,\n      elementsRef = _React$useContext2.elementsRef,\n      labelsRef = _React$useContext2.labelsRef;\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      index$1 = _React$useState4[0],\n      setIndex = _React$useState4[1];\n\n  var componentRef = React.useRef(null);\n  var ref = React.useCallback(function (node) {\n    componentRef.current = node;\n\n    if (index$1 !== null) {\n      elementsRef.current[index$1] = node;\n\n      if (labelsRef) {\n        var _node$textContent;\n\n        var isLabelDefined = label !== undefined;\n        labelsRef.current[index$1] = isLabelDefined ? label : (_node$textContent = node == null ? void 0 : node.textContent) != null ? _node$textContent : null;\n      }\n    }\n  }, [index$1, elementsRef, labelsRef, label]);\n  index(function () {\n    var node = componentRef.current;\n\n    if (node) {\n      register(node);\n      return function () {\n        unregister(node);\n      };\n    }\n  }, [register, unregister]);\n  index(function () {\n    var index = componentRef.current ? map.get(componentRef.current) : null;\n\n    if (index != null) {\n      setIndex(index);\n    }\n  }, [map]);\n  return React.useMemo(function () {\n    return {\n      ref: ref,\n      index: index$1 == null ? -1 : index$1\n    };\n  }, [index$1, ref]);\n}\n\nfunction renderJsx(render, computedProps) {\n  if (typeof render === 'function') {\n    return render(computedProps);\n  }\n\n  if (render) {\n    return /*#__PURE__*/React.cloneElement(render, computedProps);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", computedProps);\n}\n\nvar CompositeContext = /*#__PURE__*/React.createContext({\n  activeIndex: 0,\n  onNavigate: function onNavigate() {}\n});\nvar horizontalKeys = [ARROW_LEFT, ARROW_RIGHT];\nvar verticalKeys = [ARROW_UP, ARROW_DOWN];\nvar allKeys = [].concat(horizontalKeys, verticalKeys);\n/**\n * Creates a single tab stop whose items are navigated by arrow keys, which\n * provides list navigation outside of floating element contexts.\n *\n * This is useful to enable navigation of a list of items that aren’t part of a\n * floating element. A menubar is an example of a composite, with each reference\n * element being an item.\n * @see https://floating-ui.com/docs/Composite\n */\n\nvar Composite = /*#__PURE__*/React.forwardRef(function Composite(props, forwardedRef) {\n  var render = props.render,\n      _props$orientation = props.orientation,\n      orientation = _props$orientation === void 0 ? 'both' : _props$orientation,\n      _props$loop = props.loop,\n      loop = _props$loop === void 0 ? true : _props$loop,\n      _props$cols = props.cols,\n      cols = _props$cols === void 0 ? 1 : _props$cols,\n      disabledIndices = props.disabledIndices,\n      externalActiveIndex = props.activeIndex,\n      externalSetActiveIndex = props.onNavigate,\n      itemSizes = props.itemSizes,\n      _props$dense = props.dense,\n      dense = _props$dense === void 0 ? false : _props$dense,\n      domProps = _objectWithoutProperties(props, _excluded);\n\n  var _React$useState5 = React.useState(0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      internalActiveIndex = _React$useState6[0],\n      internalSetActiveIndex = _React$useState6[1];\n\n  var activeIndex = externalActiveIndex != null ? externalActiveIndex : internalActiveIndex;\n  var onNavigate = useEffectEvent(externalSetActiveIndex != null ? externalSetActiveIndex : internalSetActiveIndex);\n  var elementsRef = React.useRef([]);\n  var renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  var contextValue = React.useMemo(function () {\n    return {\n      activeIndex: activeIndex,\n      onNavigate: onNavigate\n    };\n  }, [activeIndex, onNavigate]);\n  var isGrid = cols > 1;\n\n  function handleKeyDown(event) {\n    if (!allKeys.includes(event.key)) return;\n    var nextIndex = activeIndex;\n    var minIndex = getMinIndex(elementsRef, disabledIndices);\n    var maxIndex = getMaxIndex(elementsRef, disabledIndices);\n\n    if (isGrid) {\n      var sizes = itemSizes || Array.from({\n        length: elementsRef.current.length\n      }, function () {\n        return {\n          width: 1,\n          height: 1\n        };\n      }); // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n\n      var cellMap = buildCellMap(sizes, cols, dense);\n      var minGridIndex = cellMap.findIndex(function (index) {\n        return index != null && !isDisabled(elementsRef.current, index, disabledIndices);\n      }); // last enabled index\n\n      var maxGridIndex = cellMap.reduce(function (foundIndex, index, cellIndex) {\n        return index != null && !isDisabled(elementsRef.current, index, disabledIndices) ? cellIndex : foundIndex;\n      }, -1);\n      nextIndex = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(function (itemIndex) {\n          return itemIndex ? elementsRef.current[itemIndex] : null;\n        })\n      }, {\n        event: event,\n        orientation: orientation,\n        loop: loop,\n        cols: cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getCellIndices([].concat(_toConsumableArray(disabledIndices || elementsRef.current.map(function (_, index) {\n          return isDisabled(elementsRef.current, index) ? index : undefined;\n        })), [undefined]), cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getCellIndexOfCorner(activeIndex > maxIndex ? minIndex : activeIndex, sizes, cellMap, cols, // use a corner matching the edge closest to the direction we're\n        // moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === ARROW_RIGHT ? 'tr' : 'tl')\n      })]; // navigated cell will never be nullish\n    }\n\n    var toEndKeys = {\n      horizontal: [ARROW_RIGHT],\n      vertical: [ARROW_DOWN],\n      both: [ARROW_RIGHT, ARROW_DOWN]\n    }[orientation];\n    var toStartKeys = {\n      horizontal: [ARROW_LEFT],\n      vertical: [ARROW_UP],\n      both: [ARROW_LEFT, ARROW_UP]\n    }[orientation];\n    var preventedKeys = isGrid ? allKeys : {\n      horizontal: horizontalKeys,\n      vertical: verticalKeys,\n      both: allKeys\n    }[orientation];\n\n    if (nextIndex === activeIndex && [].concat(_toConsumableArray(toEndKeys), _toConsumableArray(toStartKeys)).includes(event.key)) {\n      if (loop && nextIndex === maxIndex && toEndKeys.includes(event.key)) {\n        nextIndex = minIndex;\n      } else if (loop && nextIndex === minIndex && toStartKeys.includes(event.key)) {\n        nextIndex = maxIndex;\n      } else {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: nextIndex,\n          decrement: toStartKeys.includes(event.key),\n          disabledIndices: disabledIndices\n        });\n      }\n    }\n\n    if (nextIndex !== activeIndex && !isIndexOutOfBounds(elementsRef, nextIndex)) {\n      event.stopPropagation();\n\n      if (preventedKeys.includes(event.key)) {\n        event.preventDefault();\n      }\n\n      onNavigate(nextIndex); // Wait for FocusManager `returnFocus` to execute.\n\n      queueMicrotask(function () {\n        enqueueFocus(elementsRef.current[nextIndex]);\n      });\n    }\n  }\n\n  var computedProps = _objectSpread(_objectSpread(_objectSpread({}, domProps), renderElementProps), {}, {\n    ref: forwardedRef,\n    'aria-orientation': orientation === 'both' ? undefined : orientation,\n    onKeyDown: function onKeyDown(e) {\n      domProps.onKeyDown == null || domProps.onKeyDown(e);\n      renderElementProps.onKeyDown == null || renderElementProps.onKeyDown(e);\n      handleKeyDown(e);\n    }\n  });\n\n  return /*#__PURE__*/React.createElement(CompositeContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(FloatingList, {\n    elementsRef: elementsRef\n  }, renderJsx(render, computedProps)));\n});\n/**\n * @see https://floating-ui.com/docs/Composite\n */\n\nvar CompositeItem = /*#__PURE__*/React.forwardRef(function CompositeItem(props, forwardedRef) {\n  var render = props.render,\n      domProps = _objectWithoutProperties(props, _excluded2);\n\n  var renderElementProps = render && typeof render !== 'function' ? render.props : {};\n\n  var _React$useContext3 = React.useContext(CompositeContext),\n      activeIndex = _React$useContext3.activeIndex,\n      onNavigate = _React$useContext3.onNavigate;\n\n  var _useListItem = useListItem(),\n      ref = _useListItem.ref,\n      index = _useListItem.index;\n\n  var mergedRef = useMergeRefs([ref, forwardedRef, renderElementProps.ref]);\n  var isActive = activeIndex === index;\n\n  var computedProps = _objectSpread(_objectSpread(_objectSpread({}, domProps), renderElementProps), {}, {\n    ref: mergedRef,\n    tabIndex: isActive ? 0 : -1,\n    'data-active': isActive ? '' : undefined,\n    onFocus: function onFocus(e) {\n      domProps.onFocus == null || domProps.onFocus(e);\n      renderElementProps.onFocus == null || renderElementProps.onFocus(e);\n      onNavigate(index);\n    }\n  });\n\n  return renderJsx(render, computedProps);\n});\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nvar serverHandoffComplete = false;\nvar count = 0;\n\nvar genId = function genId() {\n  return (// Ensure the id is unique with multiple independent versions of Floating UI\n    // on <React 18\n    \"floating-ui-\" + Math.random().toString(36).slice(2, 6) + count++\n  );\n};\n\nfunction useFloatingId() {\n  var _React$useState7 = React.useState(function () {\n    return serverHandoffComplete ? genId() : undefined;\n  }),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      id = _React$useState8[0],\n      setId = _React$useState8[1];\n\n  index(function () {\n    if (id == null) {\n      setId(genId());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  React.useEffect(function () {\n    serverHandoffComplete = true;\n  }, []);\n  return id;\n}\n\nvar useReactId = SafeReact.useId;\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/react-utils#useid\n */\n\nvar useId = useReactId || useFloatingId;\nvar devMessageSet;\n\nif (process.env.NODE_ENV !== \"production\") {\n  devMessageSet = /*#__PURE__*/new Set();\n}\n\nfunction warn() {\n  var _devMessageSet;\n\n  for (var _len = arguments.length, messages = new Array(_len), _key = 0; _key < _len; _key++) {\n    messages[_key] = arguments[_key];\n  }\n\n  var message = \"Floating UI: \" + messages.join(' ');\n\n  if (!((_devMessageSet = devMessageSet) != null && _devMessageSet.has(message))) {\n    var _devMessageSet2;\n\n    (_devMessageSet2 = devMessageSet) == null || _devMessageSet2.add(message);\n    console.warn(message);\n  }\n}\n\nfunction error() {\n  var _devMessageSet3;\n\n  for (var _len2 = arguments.length, messages = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    messages[_key2] = arguments[_key2];\n  }\n\n  var message = \"Floating UI: \" + messages.join(' ');\n\n  if (!((_devMessageSet3 = devMessageSet) != null && _devMessageSet3.has(message))) {\n    var _devMessageSet4;\n\n    (_devMessageSet4 = devMessageSet) == null || _devMessageSet4.add(message);\n    console.error(message);\n  }\n}\n/**\n * Renders a pointing arrow triangle.\n * @see https://floating-ui.com/docs/FloatingArrow\n */\n\n\nvar FloatingArrow = /*#__PURE__*/React.forwardRef(function FloatingArrow(props, ref) {\n  var _objectSpread2;\n\n  var _props$context = props.context,\n      placement = _props$context.placement,\n      floating = _props$context.elements.floating,\n      arrow = _props$context.middlewareData.arrow,\n      _props$width = props.width,\n      width = _props$width === void 0 ? 14 : _props$width,\n      _props$height = props.height,\n      height = _props$height === void 0 ? 7 : _props$height,\n      _props$tipRadius = props.tipRadius,\n      tipRadius = _props$tipRadius === void 0 ? 0 : _props$tipRadius,\n      _props$strokeWidth = props.strokeWidth,\n      strokeWidth = _props$strokeWidth === void 0 ? 0 : _props$strokeWidth,\n      staticOffset = props.staticOffset,\n      stroke = props.stroke,\n      d = props.d,\n      _props$style = props.style;\n  _props$style = _props$style === void 0 ? {} : _props$style;\n\n  var transform = _props$style.transform,\n      restStyle = _objectWithoutProperties(_props$style, _excluded3),\n      rest = _objectWithoutProperties(props, _excluded4);\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!ref) {\n      warn('The `ref` prop is required for `FloatingArrow`.');\n    }\n  }\n\n  var clipPathId = useId();\n\n  var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      isRTL = _React$useState10[0],\n      setIsRTL = _React$useState10[1]; // https://github.com/floating-ui/floating-ui/issues/2932\n\n\n  index(function () {\n    if (!floating) return;\n    var isRTL = getComputedStyle(floating).direction === 'rtl';\n\n    if (isRTL) {\n      setIsRTL(true);\n    }\n  }, [floating]);\n\n  if (!floating) {\n    return null;\n  } // Strokes must be double the border width, this ensures the stroke's width\n  // works as you'd expect.\n\n\n  var computedStrokeWidth = strokeWidth * 2;\n  var halfStrokeWidth = computedStrokeWidth / 2;\n  var svgX = width / 2 * (tipRadius / -8 + 1);\n  var svgY = height / 2 * tipRadius / 4;\n\n  var _placement$split = placement.split('-'),\n      _placement$split2 = _slicedToArray(_placement$split, 2),\n      side = _placement$split2[0],\n      alignment = _placement$split2[1];\n\n  var isCustomShape = !!d;\n  var isVerticalSide = side === 'top' || side === 'bottom';\n  var yOffsetProp = staticOffset && alignment === 'end' ? 'bottom' : 'top';\n  var xOffsetProp = staticOffset && alignment === 'end' ? 'right' : 'left';\n\n  if (staticOffset && isRTL) {\n    xOffsetProp = alignment === 'end' ? 'left' : 'right';\n  }\n\n  var arrowX = (arrow == null ? void 0 : arrow.x) != null ? staticOffset || arrow.x : '';\n  var arrowY = (arrow == null ? void 0 : arrow.y) != null ? staticOffset || arrow.y : '';\n  var dValue = d || 'M0,0' + (\" H\" + width) + (\" L\" + (width - svgX) + \",\" + (height - svgY)) + (\" Q\" + width / 2 + \",\" + height + \" \" + svgX + \",\" + (height - svgY)) + ' Z';\n  var rotation = {\n    top: isCustomShape ? 'rotate(180deg)' : '',\n    left: isCustomShape ? 'rotate(90deg)' : 'rotate(-90deg)',\n    bottom: isCustomShape ? '' : 'rotate(180deg)',\n    right: isCustomShape ? 'rotate(-90deg)' : 'rotate(90deg)'\n  }[side];\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({}, rest, {\n    \"aria-hidden\": true,\n    ref: ref,\n    width: isCustomShape ? width : width + computedStrokeWidth,\n    height: width,\n    viewBox: \"0 0 \" + width + \" \" + (height > width ? height : width),\n    style: _objectSpread((_objectSpread2 = {\n      position: 'absolute',\n      pointerEvents: 'none'\n    }, _defineProperty(_objectSpread2, xOffsetProp, arrowX), _defineProperty(_objectSpread2, yOffsetProp, arrowY), _defineProperty(_objectSpread2, side, isVerticalSide || isCustomShape ? '100%' : \"calc(100% - \" + computedStrokeWidth / 2 + \"px)\"), _defineProperty(_objectSpread2, \"transform\", \"\" + rotation + (transform != null ? transform : '')), _objectSpread2), restStyle)\n  }), computedStrokeWidth > 0 && /*#__PURE__*/React.createElement(\"path\", {\n    clipPath: \"url(#\" + clipPathId + \")\",\n    fill: \"none\",\n    stroke: stroke // Account for the stroke on the fill path rendered below.\n    ,\n    strokeWidth: computedStrokeWidth + (d ? 0 : 1),\n    d: dValue\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    stroke: computedStrokeWidth && !d ? rest.fill : 'none',\n    d: dValue\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: clipPathId\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: -halfStrokeWidth,\n    y: halfStrokeWidth * (isCustomShape ? -1 : 1),\n    width: width + computedStrokeWidth,\n    height: width\n  })));\n});\n\nfunction createPubSub() {\n  var map = new Map();\n  return {\n    emit: function emit(event, data) {\n      var _map$get;\n\n      (_map$get = map.get(event)) == null || _map$get.forEach(function (handler) {\n        return handler(data);\n      });\n    },\n    on: function on(event, listener) {\n      map.set(event, [].concat(_toConsumableArray(map.get(event) || []), [listener]));\n    },\n    off: function off(event, listener) {\n      var _map$get2;\n\n      map.set(event, ((_map$get2 = map.get(event)) == null ? void 0 : _map$get2.filter(function (l) {\n        return l !== listener;\n      })) || []);\n    }\n  };\n}\n\nvar FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nvar FloatingTreeContext = /*#__PURE__*/React.createContext(null);\n/**\n * Returns the parent node id for nested floating elements, if available.\n * Returns `null` for top-level floating elements.\n */\n\nvar useFloatingParentNodeId = function useFloatingParentNodeId() {\n  var _React$useContext;\n\n  return ((_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) || null;\n};\n/**\n * Returns the nearest floating tree context, if available.\n */\n\n\nvar useFloatingTree = function useFloatingTree() {\n  return React.useContext(FloatingTreeContext);\n};\n/**\n * Registers a node into the `FloatingTree`, returning its id.\n * @see https://floating-ui.com/docs/FloatingTree\n */\n\n\nfunction useFloatingNodeId(customParentId) {\n  var id = useId();\n  var tree = useFloatingTree();\n  var reactParentId = useFloatingParentNodeId();\n  var parentId = customParentId || reactParentId;\n  index(function () {\n    var node = {\n      id: id,\n      parentId: parentId\n    };\n    tree == null || tree.addNode(node);\n    return function () {\n      tree == null || tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n}\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\n\n\nfunction FloatingNode(props) {\n  var children = props.children,\n      id = props.id;\n  var parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/React.createElement(FloatingNodeContext.Provider, {\n    value: React.useMemo(function () {\n      return {\n        id: id,\n        parentId: parentId\n      };\n    }, [id, parentId])\n  }, children);\n}\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM.\n * This is not necessary in all cases, except when there must be explicit communication between parent and child floating elements. It is necessary for:\n * - The `bubbles` option in the `useDismiss()` Hook\n * - Nested virtual list navigation\n * - Nested floating elements that each open on hover\n * - Custom communication between parent and child floating elements\n * @see https://floating-ui.com/docs/FloatingTree\n */\n\n\nfunction FloatingTree(props) {\n  var children = props.children;\n  var nodesRef = React.useRef([]);\n  var addNode = React.useCallback(function (node) {\n    nodesRef.current = [].concat(_toConsumableArray(nodesRef.current), [node]);\n  }, []);\n  var removeNode = React.useCallback(function (node) {\n    nodesRef.current = nodesRef.current.filter(function (n) {\n      return n !== node;\n    });\n  }, []);\n  var events = React.useState(function () {\n    return createPubSub();\n  })[0];\n  return /*#__PURE__*/React.createElement(FloatingTreeContext.Provider, {\n    value: React.useMemo(function () {\n      return {\n        nodesRef: nodesRef,\n        addNode: addNode,\n        removeNode: removeNode,\n        events: events\n      };\n    }, [addNode, removeNode, events])\n  }, children);\n}\n\nfunction createAttribute(name) {\n  return \"data-floating-ui-\" + name;\n}\n\nfunction useLatestRef(value) {\n  var ref = useRef(value);\n  index(function () {\n    ref.current = value;\n  });\n  return ref;\n}\n\nvar safePolygonIdentifier = /*#__PURE__*/createAttribute('safe-polygon');\n\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && !isMouseLikePointerType(pointerType)) {\n    return 0;\n  }\n\n  if (typeof value === 'number') {\n    return value;\n  }\n\n  return value == null ? void 0 : value[prop];\n}\n/**\n * Opens the floating element while hovering over the reference element, like\n * CSS `:hover`.\n * @see https://floating-ui.com/docs/useHover\n */\n\n\nfunction useHover(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      dataRef = context.dataRef,\n      events = context.events,\n      elements = context.elements;\n  var _props2 = props,\n      _props2$enabled = _props2.enabled,\n      enabled = _props2$enabled === void 0 ? true : _props2$enabled,\n      _props2$delay = _props2.delay,\n      delay = _props2$delay === void 0 ? 0 : _props2$delay,\n      _props2$handleClose = _props2.handleClose,\n      handleClose = _props2$handleClose === void 0 ? null : _props2$handleClose,\n      _props2$mouseOnly = _props2.mouseOnly,\n      mouseOnly = _props2$mouseOnly === void 0 ? false : _props2$mouseOnly,\n      _props2$restMs = _props2.restMs,\n      restMs = _props2$restMs === void 0 ? 0 : _props2$restMs,\n      _props2$move = _props2.move,\n      move = _props2$move === void 0 ? true : _props2$move;\n  var tree = useFloatingTree();\n  var parentId = useFloatingParentNodeId();\n  var handleCloseRef = useLatestRef(handleClose);\n  var delayRef = useLatestRef(delay);\n  var openRef = useLatestRef(open);\n  var pointerTypeRef = React.useRef();\n  var timeoutRef = React.useRef(-1);\n  var handlerRef = React.useRef();\n  var restTimeoutRef = React.useRef(-1);\n  var blockMouseMoveRef = React.useRef(true);\n  var performedPointerEventsMutationRef = React.useRef(false);\n  var unbindMouseMoveRef = React.useRef(function () {});\n  var isHoverOpen = React.useCallback(function () {\n    var _dataRef$current$open;\n\n    var type = (_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type;\n    return (type == null ? void 0 : type.includes('mouse')) && type !== 'mousedown';\n  }, [dataRef]); // When closing before opening, clear the delay timeouts to cancel it\n  // from showing.\n\n  React.useEffect(function () {\n    if (!enabled) return;\n\n    function onOpenChange(_ref) {\n      var open = _ref.open;\n\n      if (!open) {\n        clearTimeout(timeoutRef.current);\n        clearTimeout(restTimeoutRef.current);\n        blockMouseMoveRef.current = true;\n      }\n    }\n\n    events.on('openchange', onOpenChange);\n    return function () {\n      events.off('openchange', onOpenChange);\n    };\n  }, [enabled, events]);\n  React.useEffect(function () {\n    if (!enabled) return;\n    if (!handleCloseRef.current) return;\n    if (!open) return;\n\n    function onLeave(event) {\n      if (isHoverOpen()) {\n        onOpenChange(false, event, 'hover');\n      }\n    }\n\n    var html = getDocument(elements.floating).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return function () {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [elements.floating, open, onOpenChange, enabled, handleCloseRef, isHoverOpen]);\n  var closeWithDelay = React.useCallback(function (event, runElseBranch, reason) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n\n    if (reason === void 0) {\n      reason = 'hover';\n    }\n\n    var closeDelay = getDelay(delayRef.current, 'close', pointerTypeRef.current);\n\n    if (closeDelay && !handlerRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = window.setTimeout(function () {\n        return onOpenChange(false, event, reason);\n      }, closeDelay);\n    } else if (runElseBranch) {\n      clearTimeout(timeoutRef.current);\n      onOpenChange(false, event, reason);\n    }\n  }, [delayRef, onOpenChange]);\n  var cleanupMouseMoveHandler = useEffectEvent(function () {\n    unbindMouseMoveRef.current();\n    handlerRef.current = undefined;\n  });\n  var clearPointerEvents = useEffectEvent(function () {\n    if (performedPointerEventsMutationRef.current) {\n      var body = getDocument(elements.floating).body;\n      body.style.pointerEvents = '';\n      body.removeAttribute(safePolygonIdentifier);\n      performedPointerEventsMutationRef.current = false;\n    }\n  }); // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n\n  React.useEffect(function () {\n    if (!enabled) return;\n\n    function isClickLikeOpenEvent() {\n      return dataRef.current.openEvent ? ['click', 'mousedown'].includes(dataRef.current.openEvent.type) : false;\n    }\n\n    function onMouseEnter(event) {\n      clearTimeout(timeoutRef.current);\n      blockMouseMoveRef.current = false;\n\n      if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current) || restMs > 0 && !getDelay(delayRef.current, 'open')) {\n        return;\n      }\n\n      var openDelay = getDelay(delayRef.current, 'open', pointerTypeRef.current);\n\n      if (openDelay) {\n        timeoutRef.current = window.setTimeout(function () {\n          if (!openRef.current) {\n            onOpenChange(true, event, 'hover');\n          }\n        }, openDelay);\n      } else {\n        onOpenChange(true, event, 'hover');\n      }\n    }\n\n    function onMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      unbindMouseMoveRef.current();\n      var doc = getDocument(elements.floating);\n      clearTimeout(restTimeoutRef.current);\n\n      if (handleCloseRef.current && dataRef.current.floatingContext) {\n        // Prevent clearing `onScrollMouseLeave` timeout.\n        if (!open) {\n          clearTimeout(timeoutRef.current);\n        }\n\n        handlerRef.current = handleCloseRef.current(_objectSpread(_objectSpread({}, dataRef.current.floatingContext), {}, {\n          tree: tree,\n          x: event.clientX,\n          y: event.clientY,\n          onClose: function onClose() {\n            clearPointerEvents();\n            cleanupMouseMoveHandler();\n            closeWithDelay(event, true, 'safe-polygon');\n          }\n        }));\n        var handler = handlerRef.current;\n        doc.addEventListener('mousemove', handler);\n\n        unbindMouseMoveRef.current = function () {\n          doc.removeEventListener('mousemove', handler);\n        };\n\n        return;\n      } // Allow interactivity without `safePolygon` on touch devices. With a\n      // pointer, a short close delay is an alternative, so it should work\n      // consistently.\n\n\n      var shouldClose = pointerTypeRef.current === 'touch' ? !contains(elements.floating, event.relatedTarget) : true;\n\n      if (shouldClose) {\n        closeWithDelay(event);\n      }\n    } // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n\n\n    function onScrollMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      if (!dataRef.current.floatingContext) return;\n      handleCloseRef.current == null || handleCloseRef.current(_objectSpread(_objectSpread({}, dataRef.current.floatingContext), {}, {\n        tree: tree,\n        x: event.clientX,\n        y: event.clientY,\n        onClose: function onClose() {\n          clearPointerEvents();\n          cleanupMouseMoveHandler();\n          closeWithDelay(event);\n        }\n      }))(event);\n    }\n\n    if (isElement(elements.domReference)) {\n      var _elements$floating;\n\n      var ref = elements.domReference;\n      open && ref.addEventListener('mouseleave', onScrollMouseLeave);\n      (_elements$floating = elements.floating) == null || _elements$floating.addEventListener('mouseleave', onScrollMouseLeave);\n      move && ref.addEventListener('mousemove', onMouseEnter, {\n        once: true\n      });\n      ref.addEventListener('mouseenter', onMouseEnter);\n      ref.addEventListener('mouseleave', onMouseLeave);\n      return function () {\n        var _elements$floating2;\n\n        open && ref.removeEventListener('mouseleave', onScrollMouseLeave);\n        (_elements$floating2 = elements.floating) == null || _elements$floating2.removeEventListener('mouseleave', onScrollMouseLeave);\n        move && ref.removeEventListener('mousemove', onMouseEnter);\n        ref.removeEventListener('mouseenter', onMouseEnter);\n        ref.removeEventListener('mouseleave', onMouseLeave);\n      };\n    }\n  }, [elements, enabled, context, mouseOnly, restMs, move, closeWithDelay, cleanupMouseMoveHandler, clearPointerEvents, onOpenChange, open, openRef, tree, delayRef, handleCloseRef, dataRef]); // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n\n  index(function () {\n    var _handleCloseRef$curre;\n\n    if (!enabled) return;\n\n    if (open && (_handleCloseRef$curre = handleCloseRef.current) != null && _handleCloseRef$curre.__options.blockPointerEvents && isHoverOpen()) {\n      var body = getDocument(elements.floating).body;\n      body.setAttribute(safePolygonIdentifier, '');\n      body.style.pointerEvents = 'none';\n      performedPointerEventsMutationRef.current = true;\n      var floatingEl = elements.floating;\n\n      if (isElement(elements.domReference) && floatingEl) {\n        var _tree$nodesRef$curren;\n\n        var ref = elements.domReference;\n        var parentFloating = tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(function (node) {\n          return node.id === parentId;\n        })) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren.elements.floating;\n\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n\n        ref.style.pointerEvents = 'auto';\n        floatingEl.style.pointerEvents = 'auto';\n        return function () {\n          ref.style.pointerEvents = '';\n          floatingEl.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, elements, tree, handleCloseRef, isHoverOpen]);\n  index(function () {\n    if (!open) {\n      pointerTypeRef.current = undefined;\n      cleanupMouseMoveHandler();\n      clearPointerEvents();\n    }\n  }, [open, cleanupMouseMoveHandler, clearPointerEvents]);\n  React.useEffect(function () {\n    return function () {\n      cleanupMouseMoveHandler();\n      clearTimeout(timeoutRef.current);\n      clearTimeout(restTimeoutRef.current);\n      clearPointerEvents();\n    };\n  }, [enabled, elements.domReference, cleanupMouseMoveHandler, clearPointerEvents]);\n  var reference = React.useMemo(function () {\n    function setPointerRef(event) {\n      pointerTypeRef.current = event.pointerType;\n    }\n\n    return {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n      onMouseMove: function onMouseMove(event) {\n        var nativeEvent = event.nativeEvent;\n\n        function handleMouseMove() {\n          if (!blockMouseMoveRef.current && !openRef.current) {\n            onOpenChange(true, nativeEvent, 'hover');\n          }\n        }\n\n        if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current)) {\n          return;\n        }\n\n        if (open || restMs === 0) {\n          return;\n        }\n\n        clearTimeout(restTimeoutRef.current);\n\n        if (pointerTypeRef.current === 'touch') {\n          handleMouseMove();\n        } else {\n          restTimeoutRef.current = window.setTimeout(handleMouseMove, restMs);\n        }\n      }\n    };\n  }, [mouseOnly, onOpenChange, open, openRef, restMs]);\n  var floating = React.useMemo(function () {\n    return {\n      onMouseEnter: function onMouseEnter() {\n        clearTimeout(timeoutRef.current);\n      },\n      onMouseLeave: function onMouseLeave(event) {\n        closeWithDelay(event.nativeEvent, false);\n      }\n    };\n  }, [closeWithDelay]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference,\n      floating: floating\n    } : {};\n  }, [enabled, reference, floating]);\n}\n\nvar NOOP = function NOOP() {};\n\nvar FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 0,\n  initialDelay: 0,\n  timeoutMs: 0,\n  currentId: null,\n  setCurrentId: NOOP,\n  setState: NOOP,\n  isInstantPhase: false\n});\n/**\n * @deprecated\n * Use the return value of `useDelayGroup()` instead.\n */\n\nvar useDelayGroupContext = function useDelayGroupContext() {\n  return React.useContext(FloatingDelayGroupContext);\n};\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\n\n\nfunction FloatingDelayGroup(props) {\n  var children = props.children,\n      delay = props.delay,\n      _props$timeoutMs = props.timeoutMs,\n      timeoutMs = _props$timeoutMs === void 0 ? 0 : _props$timeoutMs;\n\n  var _React$useReducer = React.useReducer(function (prev, next) {\n    return _objectSpread(_objectSpread({}, prev), next);\n  }, {\n    delay: delay,\n    timeoutMs: timeoutMs,\n    initialDelay: delay,\n    currentId: null,\n    isInstantPhase: false\n  }),\n      _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n      state = _React$useReducer2[0],\n      setState = _React$useReducer2[1];\n\n  var initialCurrentIdRef = React.useRef(null);\n  var setCurrentId = React.useCallback(function (currentId) {\n    setState({\n      currentId: currentId\n    });\n  }, []);\n  index(function () {\n    if (state.currentId) {\n      if (initialCurrentIdRef.current === null) {\n        initialCurrentIdRef.current = state.currentId;\n      } else if (!state.isInstantPhase) {\n        setState({\n          isInstantPhase: true\n        });\n      }\n    } else {\n      if (state.isInstantPhase) {\n        setState({\n          isInstantPhase: false\n        });\n      }\n\n      initialCurrentIdRef.current = null;\n    }\n  }, [state.currentId, state.isInstantPhase]);\n  return /*#__PURE__*/React.createElement(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(function () {\n      return _objectSpread(_objectSpread({}, state), {}, {\n        setState: setState,\n        setCurrentId: setCurrentId\n      });\n    }, [state, setCurrentId])\n  }, children);\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `FloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\n\n\nfunction useDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      floatingId = context.floatingId;\n  var _options2 = options,\n      optionId = _options2.id;\n  var id = optionId != null ? optionId : floatingId;\n  var groupContext = useDelayGroupContext();\n  var currentId = groupContext.currentId,\n      setCurrentId = groupContext.setCurrentId,\n      initialDelay = groupContext.initialDelay,\n      setState = groupContext.setState,\n      timeoutMs = groupContext.timeoutMs;\n  index(function () {\n    if (!currentId) return;\n    setState({\n      delay: {\n        open: 1,\n        close: getDelay(initialDelay, 'close')\n      }\n    });\n\n    if (currentId !== id) {\n      onOpenChange(false);\n    }\n  }, [id, onOpenChange, setState, currentId, initialDelay]);\n  index(function () {\n    function unset() {\n      onOpenChange(false);\n      setState({\n        delay: initialDelay,\n        currentId: null\n      });\n    }\n\n    if (!currentId) return;\n\n    if (!open && currentId === id) {\n      if (timeoutMs) {\n        var timeout = window.setTimeout(unset, timeoutMs);\n        return function () {\n          clearTimeout(timeout);\n        };\n      }\n\n      unset();\n    }\n  }, [open, setState, currentId, id, onOpenChange, initialDelay, timeoutMs]);\n  index(function () {\n    if (setCurrentId === NOOP || !open) return;\n    setCurrentId(id);\n  }, [open, setCurrentId, id]);\n  return groupContext;\n}\n\nfunction getAncestors(nodes, id) {\n  var _nodes$find;\n\n  var allAncestors = [];\n  var currentParentId = (_nodes$find = nodes.find(function (node) {\n    return node.id === id;\n  })) == null ? void 0 : _nodes$find.parentId;\n\n  while (currentParentId) {\n    var currentNode = nodes.find(function (node) {\n      return node.id === currentParentId;\n    });\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n\n  return allAncestors;\n}\n\nfunction getChildren(nodes, id) {\n  var allChildren = nodes.filter(function (node) {\n    var _node$context;\n\n    return node.parentId === id && ((_node$context = node.context) == null ? void 0 : _node$context.open);\n  });\n  var currentChildren = allChildren;\n\n  while (currentChildren.length) {\n    currentChildren = nodes.filter(function (node) {\n      var _currentChildren;\n\n      return (_currentChildren = currentChildren) == null ? void 0 : _currentChildren.some(function (n) {\n        var _node$context2;\n\n        return node.parentId === n.id && ((_node$context2 = node.context) == null ? void 0 : _node$context2.open);\n      });\n    });\n    allChildren = allChildren.concat(currentChildren);\n  }\n\n  return allChildren;\n}\n\nfunction getDeepestNode(nodes, id) {\n  var deepestNodeId;\n  var maxDepth = -1;\n\n  function findDeepest(nodeId, depth) {\n    if (depth > maxDepth) {\n      deepestNodeId = nodeId;\n      maxDepth = depth;\n    }\n\n    var children = getChildren(nodes, nodeId);\n    children.forEach(function (child) {\n      findDeepest(child.id, depth + 1);\n    });\n  }\n\n  findDeepest(id, 0);\n  return nodes.find(function (node) {\n    return node.id === deepestNodeId;\n  });\n} // Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\n\n\nvar counterMap = /*#__PURE__*/new WeakMap();\nvar uncontrolledElementsSet = /*#__PURE__*/new WeakSet();\nvar markerMap = {};\nvar lockCount = 0;\n\nvar supportsInert = function supportsInert() {\n  return typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\n};\n\nvar unwrapHost = function unwrapHost(node) {\n  return node && (node.host || unwrapHost(node.parentNode));\n};\n\nvar correctElements = function correctElements(parent, targets) {\n  return targets.map(function (target) {\n    if (parent.contains(target)) {\n      return target;\n    }\n\n    var correctedTarget = unwrapHost(target);\n\n    if (parent.contains(correctedTarget)) {\n      return correctedTarget;\n    }\n\n    return null;\n  }).filter(function (x) {\n    return x != null;\n  });\n};\n\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  var markerName = 'data-floating-ui-inert';\n  var controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  var avoidElements = correctElements(body, uncorrectedAvoidElements);\n  var elementsToKeep = new Set();\n  var elementsToStop = new Set(avoidElements);\n  var hiddenElements = [];\n\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n\n  var markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n\n    elementsToKeep.add(el);\n    el.parentNode && keep(el.parentNode);\n  }\n\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n\n    [].forEach.call(parent.children, function (node) {\n      if (getNodeName(node) === 'script') return;\n\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        var _attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n\n        var alreadyHidden = _attr !== null && _attr !== 'false';\n        var counterValue = (counterMap.get(node) || 0) + 1;\n        var markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, 'true');\n        }\n      }\n    });\n  }\n\n  lockCount++;\n  return function () {\n    hiddenElements.forEach(function (element) {\n      var counterValue = (counterMap.get(element) || 0) - 1;\n      var markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n\n        uncontrolledElementsSet.delete(element);\n      }\n\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount--;\n\n    if (!lockCount) {\n      counterMap = new WeakMap();\n      counterMap = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\n\nfunction markOthers(avoidElements, ariaHidden, inert) {\n  if (ariaHidden === void 0) {\n    ariaHidden = false;\n  }\n\n  if (inert === void 0) {\n    inert = false;\n  }\n\n  var body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live]'))), body, ariaHidden, inert);\n}\n\nvar getTabbableOptions = function getTabbableOptions() {\n  return {\n    getShadowRoot: true,\n    displayCheck: // JSDOM does not support the `tabbable` library. To solve this we can\n    // check if `ResizeObserver` is a real function (not polyfilled), which\n    // determines if the current environment is JSDOM-like.\n    typeof ResizeObserver === 'function' && ResizeObserver.toString().includes('[native code]') ? 'full' : 'none'\n  };\n};\n\nfunction getTabbableIn(container, direction) {\n  var allTabbable = tabbable(container, getTabbableOptions());\n\n  if (direction === 'prev') {\n    allTabbable.reverse();\n  }\n\n  var activeIndex = allTabbable.indexOf(activeElement(getDocument(container)));\n  var nextTabbableElements = allTabbable.slice(activeIndex + 1);\n  return nextTabbableElements[0];\n}\n\nfunction getNextTabbable() {\n  return getTabbableIn(document.body, 'next');\n}\n\nfunction getPreviousTabbable() {\n  return getTabbableIn(document.body, 'prev');\n}\n\nfunction isOutsideEvent(event, container) {\n  var containerElement = container || event.currentTarget;\n  var relatedTarget = event.relatedTarget;\n  return !relatedTarget || !contains(containerElement, relatedTarget);\n}\n\nfunction disableFocusInside(container) {\n  var tabbableElements = tabbable(container, getTabbableOptions());\n  tabbableElements.forEach(function (element) {\n    element.dataset.tabindex = element.getAttribute('tabindex') || '';\n    element.setAttribute('tabindex', '-1');\n  });\n}\n\nfunction enableFocusInside(container) {\n  var elements = container.querySelectorAll('[data-tabindex]');\n  elements.forEach(function (element) {\n    var tabindex = element.dataset.tabindex;\n    delete element.dataset.tabindex;\n\n    if (tabindex) {\n      element.setAttribute('tabindex', tabindex);\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  });\n}\n\nfunction getClosestTabbableElement(tabbableElements, element, floating) {\n  var elementIndex = tabbableElements.indexOf(element);\n\n  function traverseTabbableElements(next) {\n    var attr = createAttribute('focus-guard');\n    var index = elementIndex + (next ? 1 : 0);\n    var currentElement = tabbableElements[index];\n\n    while (currentElement && (!currentElement.isConnected || currentElement.hasAttribute(attr) || contains(floating, currentElement))) {\n      if (next) {\n        index++;\n      } else {\n        index--;\n      }\n\n      currentElement = tabbableElements[index];\n    }\n\n    return currentElement;\n  } // First, try to find the next tabbable element\n\n\n  var next = traverseTabbableElements(true);\n\n  if (next) {\n    return next;\n  } // If we can't find a next tabbable element, try to find the previous one\n\n\n  return traverseTabbableElements(false);\n} // See Diego Haz's Sandbox for making this logic work well on Safari/iOS:\n// https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/FocusTrap.tsx\n\n\nvar HIDDEN_STYLES = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: 0,\n  position: 'fixed',\n  whiteSpace: 'nowrap',\n  width: '1px',\n  top: 0,\n  left: 0\n};\nvar timeoutId;\n\nfunction setActiveElementOnTab(event) {\n  if (event.key === 'Tab') {\n    event.target;\n    clearTimeout(timeoutId);\n  }\n}\n\nvar FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  var _restProps;\n\n  var _React$useState11 = React.useState(),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      role = _React$useState12[0],\n      setRole = _React$useState12[1];\n\n  index(function () {\n    if (isSafari()) {\n      // Unlike other screen readers such as NVDA and JAWS, the virtual cursor\n      // on VoiceOver does trigger the onFocus event, so we can use the focus\n      // trap element. On Safari, only buttons trigger the onFocus event.\n      // NB: \"group\" role in the Sandbox no longer appears to work, must be a\n      // button role.\n      setRole('button');\n    }\n\n    document.addEventListener('keydown', setActiveElementOnTab);\n    return function () {\n      document.removeEventListener('keydown', setActiveElementOnTab);\n    };\n  }, []);\n  var restProps = (_restProps = {\n    ref: ref,\n    tabIndex: 0,\n    // Role is only for VoiceOver\n    role: role,\n    'aria-hidden': role ? undefined : true\n  }, _defineProperty(_restProps, createAttribute('focus-guard'), ''), _defineProperty(_restProps, \"style\", HIDDEN_STYLES), _restProps);\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, props, restProps));\n});\nvar PortalContext = /*#__PURE__*/React.createContext(null);\nvar attr = /*#__PURE__*/createAttribute('portal');\n/**\n * @see https://floating-ui.com/docs/FloatingPortal#usefloatingportalnode\n */\n\nfunction useFloatingPortalNode(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props3 = props,\n      id = _props3.id,\n      root = _props3.root;\n  var uniqueId = useId();\n  var portalContext = usePortalContext();\n\n  var _React$useState13 = React.useState(null),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      portalNode = _React$useState14[0],\n      setPortalNode = _React$useState14[1];\n\n  var portalNodeRef = React.useRef(null);\n  index(function () {\n    return function () {\n      portalNode == null || portalNode.remove(); // Allow the subsequent layout effects to create a new node on updates.\n      // The portal node will still be cleaned up on unmount.\n      // https://github.com/floating-ui/floating-ui/issues/2454\n\n      queueMicrotask(function () {\n        portalNodeRef.current = null;\n      });\n    };\n  }, [portalNode]);\n  index(function () {\n    // Wait for the uniqueId to be generated before creating the portal node in\n    // React <18 (using `useFloatingId` instead of the native `useId`).\n    // https://github.com/floating-ui/floating-ui/issues/2778\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    var existingIdRoot = id ? document.getElementById(id) : null;\n    if (!existingIdRoot) return;\n    var subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    existingIdRoot.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, uniqueId]);\n  index(function () {\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    var container = root || (portalContext == null ? void 0 : portalContext.portalNode);\n    if (container && !isElement(container)) container = container.current;\n    container = container || document.body;\n    var idWrapper = null;\n\n    if (id) {\n      idWrapper = document.createElement('div');\n      idWrapper.id = id;\n      container.appendChild(idWrapper);\n    }\n\n    var subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    container = idWrapper || container;\n    container.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, root, uniqueId, portalContext]);\n  return portalNode;\n}\n/**\n * Portals the floating element into a given container element — by default,\n * outside of the app root and into the body.\n * This is necessary to ensure the floating element can appear outside any\n * potential parent containers that cause clipping (such as `overflow: hidden`),\n * while retaining its location in the React tree.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\n\n\nfunction FloatingPortal(props) {\n  var children = props.children,\n      id = props.id,\n      _props$root = props.root,\n      root = _props$root === void 0 ? null : _props$root,\n      _props$preserveTabOrd = props.preserveTabOrder,\n      preserveTabOrder = _props$preserveTabOrd === void 0 ? true : _props$preserveTabOrd;\n  var portalNode = useFloatingPortalNode({\n    id: id,\n    root: root\n  });\n\n  var _React$useState15 = React.useState(null),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      focusManagerState = _React$useState16[0],\n      setFocusManagerState = _React$useState16[1];\n\n  var beforeOutsideRef = React.useRef(null);\n  var afterOutsideRef = React.useRef(null);\n  var beforeInsideRef = React.useRef(null);\n  var afterInsideRef = React.useRef(null);\n  var shouldRenderGuards = // The FocusManager and therefore floating element are currently open/\n  // rendered.\n  !!focusManagerState && // Guards are only for non-modal focus management.\n  !focusManagerState.modal && // Don't render if unmount is transitioning.\n  focusManagerState.open && preserveTabOrder && !!(root || portalNode); // https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/TabbablePortal.tsx\n\n  React.useEffect(function () {\n    if (!portalNode || !preserveTabOrder || focusManagerState != null && focusManagerState.modal) {\n      return;\n    } // Make sure elements inside the portal element are tabbable only when the\n    // portal has already been focused, either by tabbing into a focus trap\n    // element outside or using the mouse.\n\n\n    function onFocus(event) {\n      if (portalNode && isOutsideEvent(event)) {\n        var focusing = event.type === 'focusin';\n        var manageFocus = focusing ? enableFocusInside : disableFocusInside;\n        manageFocus(portalNode);\n      }\n    } // Listen to the event on the capture phase so they run before the focus\n    // trap elements onFocus prop is called.\n\n\n    portalNode.addEventListener('focusin', onFocus, true);\n    portalNode.addEventListener('focusout', onFocus, true);\n    return function () {\n      portalNode.removeEventListener('focusin', onFocus, true);\n      portalNode.removeEventListener('focusout', onFocus, true);\n    };\n  }, [portalNode, preserveTabOrder, focusManagerState == null ? void 0 : focusManagerState.modal]);\n  return /*#__PURE__*/React.createElement(PortalContext.Provider, {\n    value: React.useMemo(function () {\n      return {\n        preserveTabOrder: preserveTabOrder,\n        beforeOutsideRef: beforeOutsideRef,\n        afterOutsideRef: afterOutsideRef,\n        beforeInsideRef: beforeInsideRef,\n        afterInsideRef: afterInsideRef,\n        portalNode: portalNode,\n        setFocusManagerState: setFocusManagerState\n      };\n    }, [preserveTabOrder, portalNode])\n  }, shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"outside\",\n    ref: beforeOutsideRef,\n    onFocus: function onFocus(event) {\n      if (isOutsideEvent(event, portalNode)) {\n        var _beforeInsideRef$curr;\n\n        (_beforeInsideRef$curr = beforeInsideRef.current) == null || _beforeInsideRef$curr.focus();\n      } else {\n        var prevTabbable = getPreviousTabbable() || (focusManagerState == null ? void 0 : focusManagerState.refs.domReference.current);\n        prevTabbable == null || prevTabbable.focus();\n      }\n    }\n  }), shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-owns\": portalNode.id,\n    style: HIDDEN_STYLES\n  }), portalNode && /*#__PURE__*/ReactDOM.createPortal(children, portalNode), shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"outside\",\n    ref: afterOutsideRef,\n    onFocus: function onFocus(event) {\n      if (isOutsideEvent(event, portalNode)) {\n        var _afterInsideRef$curre;\n\n        (_afterInsideRef$curre = afterInsideRef.current) == null || _afterInsideRef$curre.focus();\n      } else {\n        var nextTabbable = getNextTabbable() || (focusManagerState == null ? void 0 : focusManagerState.refs.domReference.current);\n        nextTabbable == null || nextTabbable.focus();\n        (focusManagerState == null ? void 0 : focusManagerState.closeOnFocusOut) && (focusManagerState == null ? void 0 : focusManagerState.onOpenChange(false, event.nativeEvent));\n      }\n    }\n  }));\n}\n\nvar usePortalContext = function usePortalContext() {\n  return React.useContext(PortalContext);\n};\n\nvar LIST_LIMIT = 20;\nvar previouslyFocusedElements = [];\n\nfunction addPreviouslyFocusedElement(element) {\n  previouslyFocusedElements = previouslyFocusedElements.filter(function (el) {\n    return el.isConnected;\n  });\n  var tabbableEl = element;\n  if (!tabbableEl || getNodeName(tabbableEl) === 'body') return;\n\n  if (!isTabbable(tabbableEl, getTabbableOptions())) {\n    var tabbableChild = tabbable(tabbableEl, getTabbableOptions())[0];\n\n    if (tabbableChild) {\n      tabbableEl = tabbableChild;\n    }\n  }\n\n  previouslyFocusedElements.push(tabbableEl);\n\n  if (previouslyFocusedElements.length > LIST_LIMIT) {\n    previouslyFocusedElements = previouslyFocusedElements.slice(-LIST_LIMIT);\n  }\n}\n\nfunction getPreviouslyFocusedElement() {\n  return previouslyFocusedElements.slice().reverse().find(function (el) {\n    return el.isConnected;\n  });\n}\n\nvar VisuallyHiddenDismiss = /*#__PURE__*/React.forwardRef(function VisuallyHiddenDismiss(props, ref) {\n  return /*#__PURE__*/React.createElement(\"button\", _extends({}, props, {\n    type: \"button\",\n    ref: ref,\n    tabIndex: -1,\n    style: HIDDEN_STYLES\n  }));\n});\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\n\nfunction FloatingFocusManager(props) {\n  var context = props.context,\n      children = props.children,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$order = props.order,\n      order = _props$order === void 0 ? ['content'] : _props$order,\n      _props$guards = props.guards,\n      _guards = _props$guards === void 0 ? true : _props$guards,\n      _props$initialFocus = props.initialFocus,\n      initialFocus = _props$initialFocus === void 0 ? 0 : _props$initialFocus,\n      _props$returnFocus = props.returnFocus,\n      returnFocus = _props$returnFocus === void 0 ? true : _props$returnFocus,\n      _props$restoreFocus = props.restoreFocus,\n      restoreFocus = _props$restoreFocus === void 0 ? false : _props$restoreFocus,\n      _props$modal = props.modal,\n      modal = _props$modal === void 0 ? true : _props$modal,\n      _props$visuallyHidden = props.visuallyHiddenDismiss,\n      visuallyHiddenDismiss = _props$visuallyHidden === void 0 ? false : _props$visuallyHidden,\n      _props$closeOnFocusOu = props.closeOnFocusOut,\n      closeOnFocusOut = _props$closeOnFocusOu === void 0 ? true : _props$closeOnFocusOu;\n\n  var open = context.open,\n      refs = context.refs,\n      nodeId = context.nodeId,\n      onOpenChange = context.onOpenChange,\n      events = context.events,\n      dataRef = context.dataRef,\n      floatingId = context.floatingId,\n      _context$elements = context.elements,\n      domReference = _context$elements.domReference,\n      floating = _context$elements.floating;\n  var ignoreInitialFocus = typeof initialFocus === 'number' && initialFocus < 0; // If the reference is a combobox and is typeable (e.g. input/textarea),\n  // there are different focus semantics. The guards should not be rendered, but\n  // aria-hidden should be applied to all nodes still. Further, the visually\n  // hidden dismiss button should only appear at the end of the list, not the\n  // start.\n\n  var isUntrappedTypeableCombobox = isTypeableCombobox(domReference) && ignoreInitialFocus; // Force the guards to be rendered if the `inert` attribute is not supported.\n\n  var guards = supportsInert() ? _guards : true;\n  var orderRef = useLatestRef(order);\n  var initialFocusRef = useLatestRef(initialFocus);\n  var returnFocusRef = useLatestRef(returnFocus);\n  var tree = useFloatingTree();\n  var portalContext = usePortalContext();\n  var startDismissButtonRef = React.useRef(null);\n  var endDismissButtonRef = React.useRef(null);\n  var preventReturnFocusRef = React.useRef(false);\n  var isPointerDownRef = React.useRef(false);\n  var tabbableIndexRef = React.useRef(-1);\n  var isInsidePortal = portalContext != null;\n  var firstElementChild = floating == null ? void 0 : floating.firstElementChild; // If the floating element is acting as a positioning wrapper rather than the\n  // element that receives aria props, use it as the focus root instead.\n\n  var floatingFocusNode = (firstElementChild == null ? void 0 : firstElementChild.id) === floatingId ? firstElementChild : floating;\n  var getTabbableContent = useEffectEvent(function (container) {\n    if (container === void 0) {\n      container = floatingFocusNode;\n    }\n\n    return container ? tabbable(container, getTabbableOptions()) : [];\n  });\n  var getTabbableElements = useEffectEvent(function (container) {\n    var content = getTabbableContent(container);\n    return orderRef.current.map(function (type) {\n      if (domReference && type === 'reference') {\n        return domReference;\n      }\n\n      if (floatingFocusNode && type === 'floating') {\n        return floatingFocusNode;\n      }\n\n      return content;\n    }).filter(Boolean).flat();\n  });\n  React.useEffect(function () {\n    if (disabled) return;\n    if (!modal) return;\n\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        // The focus guards have nothing to focus, so we need to stop the event.\n        if (contains(floatingFocusNode, activeElement(getDocument(floatingFocusNode))) && getTabbableContent().length === 0 && !isUntrappedTypeableCombobox) {\n          stopEvent(event);\n        }\n\n        var els = getTabbableElements();\n        var target = getTarget(event);\n\n        if (orderRef.current[0] === 'reference' && target === domReference) {\n          stopEvent(event);\n\n          if (event.shiftKey) {\n            enqueueFocus(els[els.length - 1]);\n          } else {\n            enqueueFocus(els[1]);\n          }\n        }\n\n        if (orderRef.current[1] === 'floating' && target === floatingFocusNode && event.shiftKey) {\n          stopEvent(event);\n          enqueueFocus(els[0]);\n        }\n      }\n    }\n\n    var doc = getDocument(floatingFocusNode);\n    doc.addEventListener('keydown', onKeyDown);\n    return function () {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [disabled, domReference, floatingFocusNode, modal, orderRef, isUntrappedTypeableCombobox, getTabbableContent, getTabbableElements]);\n  React.useEffect(function () {\n    if (disabled) return;\n    if (!floating) return;\n\n    function handleFocusIn(event) {\n      var target = getTarget(event);\n      var tabbableContent = getTabbableContent();\n      var tabbableIndex = tabbableContent.indexOf(target);\n\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n    }\n\n    floating.addEventListener('focusin', handleFocusIn);\n    return function () {\n      floating.removeEventListener('focusin', handleFocusIn);\n    };\n  }, [disabled, floating, getTabbableContent]);\n  React.useEffect(function () {\n    if (disabled) return;\n    if (!closeOnFocusOut) return; // In Safari, buttons lose focus when pressing them.\n\n    function handlePointerDown() {\n      isPointerDownRef.current = true;\n      setTimeout(function () {\n        isPointerDownRef.current = false;\n      });\n    }\n\n    function handleFocusOutside(event) {\n      var relatedTarget = event.relatedTarget;\n      queueMicrotask(function () {\n        var movedToUnrelatedNode = !(contains(domReference, relatedTarget) || contains(floating, relatedTarget) || contains(relatedTarget, floating) || contains(portalContext == null ? void 0 : portalContext.portalNode, relatedTarget) || relatedTarget != null && relatedTarget.hasAttribute(createAttribute('focus-guard')) || tree && (getChildren(tree.nodesRef.current, nodeId).find(function (node) {\n          var _node$context, _node$context2;\n\n          return contains((_node$context = node.context) == null ? void 0 : _node$context.elements.floating, relatedTarget) || contains((_node$context2 = node.context) == null ? void 0 : _node$context2.elements.domReference, relatedTarget);\n        }) || getAncestors(tree.nodesRef.current, nodeId).find(function (node) {\n          var _node$context3, _node$context4;\n\n          return ((_node$context3 = node.context) == null ? void 0 : _node$context3.elements.floating) === relatedTarget || ((_node$context4 = node.context) == null ? void 0 : _node$context4.elements.domReference) === relatedTarget;\n        }))); // Restore focus to the previous tabbable element index to prevent\n        // focus from being lost outside the floating tree.\n\n        if (restoreFocus && movedToUnrelatedNode && activeElement(getDocument(floatingFocusNode)) === getDocument(floatingFocusNode).body) {\n          // Let `FloatingPortal` effect knows that focus is still inside the\n          // floating tree.\n          if (isHTMLElement(floatingFocusNode)) {\n            floatingFocusNode == null || floatingFocusNode.focus();\n          }\n\n          var prevTabbableIndex = tabbableIndexRef.current;\n          var tabbableContent = getTabbableContent();\n          var nodeToFocus = tabbableContent[prevTabbableIndex] || tabbableContent[tabbableContent.length - 1] || floatingFocusNode;\n\n          if (isHTMLElement(nodeToFocus)) {\n            nodeToFocus.focus();\n          }\n        } // Focus did not move inside the floating tree, and there are no tabbable\n        // portal guards to handle closing.\n\n\n        if ((isUntrappedTypeableCombobox ? true : !modal) && relatedTarget && movedToUnrelatedNode && !isPointerDownRef.current && // Fix React 18 Strict Mode returnFocus due to double rendering.\n        relatedTarget !== getPreviouslyFocusedElement()) {\n          preventReturnFocusRef.current = true;\n          onOpenChange(false, event);\n        }\n      });\n    }\n\n    if (floating && isHTMLElement(domReference)) {\n      domReference.addEventListener('focusout', handleFocusOutside);\n      domReference.addEventListener('pointerdown', handlePointerDown);\n      floating.addEventListener('focusout', handleFocusOutside);\n      return function () {\n        domReference.removeEventListener('focusout', handleFocusOutside);\n        domReference.removeEventListener('pointerdown', handlePointerDown);\n        floating.removeEventListener('focusout', handleFocusOutside);\n      };\n    }\n  }, [disabled, domReference, floating, floatingFocusNode, modal, nodeId, tree, portalContext, onOpenChange, closeOnFocusOut, restoreFocus, getTabbableContent, isUntrappedTypeableCombobox]);\n  React.useEffect(function () {\n    var _portalContext$portal;\n\n    if (disabled) return; // Don't hide portals nested within the parent portal.\n\n    var portalNodes = Array.from((portalContext == null || (_portalContext$portal = portalContext.portalNode) == null ? void 0 : _portalContext$portal.querySelectorAll(\"[\" + createAttribute('portal') + \"]\")) || []);\n\n    if (floating) {\n      var insideElements = [floating].concat(portalNodes, [startDismissButtonRef.current, endDismissButtonRef.current, orderRef.current.includes('reference') || isUntrappedTypeableCombobox ? domReference : null]).filter(function (x) {\n        return x != null;\n      });\n      var cleanup = modal || isUntrappedTypeableCombobox ? markOthers(insideElements, guards, !guards) : markOthers(insideElements);\n      return function () {\n        cleanup();\n      };\n    }\n  }, [disabled, domReference, floating, modal, orderRef, portalContext, isUntrappedTypeableCombobox, guards]);\n  index(function () {\n    if (disabled || !isHTMLElement(floatingFocusNode)) return;\n    var doc = getDocument(floatingFocusNode);\n    var previouslyFocusedElement = activeElement(doc); // Wait for any layout effect state setters to execute to set `tabIndex`.\n\n    queueMicrotask(function () {\n      var focusableElements = getTabbableElements(floatingFocusNode);\n      var initialFocusValue = initialFocusRef.current;\n      var elToFocus = (typeof initialFocusValue === 'number' ? focusableElements[initialFocusValue] : initialFocusValue.current) || floatingFocusNode;\n      var focusAlreadyInsideFloatingEl = contains(floatingFocusNode, previouslyFocusedElement);\n\n      if (!ignoreInitialFocus && !focusAlreadyInsideFloatingEl && open) {\n        enqueueFocus(elToFocus, {\n          preventScroll: elToFocus === floatingFocusNode\n        });\n      }\n    });\n  }, [disabled, open, floatingFocusNode, ignoreInitialFocus, getTabbableElements, initialFocusRef]);\n  index(function () {\n    if (disabled || !floatingFocusNode) return;\n    var preventReturnFocusScroll = false;\n    var doc = getDocument(floatingFocusNode);\n    var previouslyFocusedElement = activeElement(doc);\n    var contextData = dataRef.current;\n    var openEvent = contextData.openEvent;\n    var domReference = refs.domReference.current;\n    addPreviouslyFocusedElement(previouslyFocusedElement); // Dismissing via outside press should always ignore `returnFocus` to\n    // prevent unwanted scrolling.\n\n    function onOpenChange(_ref) {\n      var open = _ref.open,\n          reason = _ref.reason,\n          event = _ref.event,\n          nested = _ref.nested;\n\n      if (open) {\n        openEvent = event;\n      }\n\n      if (reason === 'escape-key' && refs.domReference.current) {\n        addPreviouslyFocusedElement(refs.domReference.current);\n      }\n\n      if (reason === 'hover' && event.type === 'mouseleave') {\n        preventReturnFocusRef.current = true;\n      }\n\n      if (reason !== 'outside-press') return;\n\n      if (nested) {\n        preventReturnFocusRef.current = false;\n        preventReturnFocusScroll = true;\n      } else {\n        preventReturnFocusRef.current = !(isVirtualClick(event) || isVirtualPointerEvent(event));\n      }\n    }\n\n    events.on('openchange', onOpenChange);\n    return function () {\n      events.off('openchange', onOpenChange);\n      var activeEl = activeElement(doc);\n      var isFocusInsideFloatingTree = contains(floating, activeEl) || tree && getChildren(tree.nodesRef.current, nodeId).some(function (node) {\n        var _node$context5;\n\n        return contains((_node$context5 = node.context) == null ? void 0 : _node$context5.elements.floating, activeEl);\n      });\n      var shouldFocusReference = isFocusInsideFloatingTree || openEvent && ['click', 'mousedown'].includes(openEvent.type);\n\n      if (shouldFocusReference && refs.domReference.current) {\n        addPreviouslyFocusedElement(refs.domReference.current);\n      }\n\n      var returnContextElement = domReference || previouslyFocusedElement;\n      var tabbableElements = tabbable(getDocument(returnContextElement).body, getTabbableOptions()); // Wait for the return element to get potentially disconnected before\n      // checking.\n\n      queueMicrotask(function () {\n        var returnElement = getPreviouslyFocusedElement();\n\n        if (!returnElement && isHTMLElement(returnContextElement) && floating) {\n          returnElement = getClosestTabbableElement(tabbableElements, returnContextElement, floating);\n        }\n\n        if ( // eslint-disable-next-line react-hooks/exhaustive-deps\n        returnFocusRef.current && !preventReturnFocusRef.current && isHTMLElement(returnElement) && ( // If the focus moved somewhere else after mount, avoid returning focus\n        // since it likely entered a different element which should be\n        // respected: https://github.com/floating-ui/floating-ui/issues/2607\n        returnElement !== activeEl && activeEl !== doc.body ? isFocusInsideFloatingTree : true)) {\n          returnElement.focus({\n            preventScroll: preventReturnFocusScroll\n          });\n        }\n      });\n    };\n  }, [disabled, floating, floatingFocusNode, returnFocusRef, dataRef, refs, events, tree, nodeId]); // Synchronize the `context` & `modal` value to the FloatingPortal context.\n  // It will decide whether or not it needs to render its own guards.\n\n  index(function () {\n    if (disabled) return;\n    if (!portalContext) return;\n    portalContext.setFocusManagerState({\n      modal: modal,\n      closeOnFocusOut: closeOnFocusOut,\n      open: open,\n      onOpenChange: onOpenChange,\n      refs: refs\n    });\n    return function () {\n      portalContext.setFocusManagerState(null);\n    };\n  }, [disabled, portalContext, modal, open, onOpenChange, refs, closeOnFocusOut]);\n  index(function () {\n    if (disabled) return;\n    if (!floatingFocusNode) return;\n    if (typeof MutationObserver !== 'function') return;\n    if (ignoreInitialFocus) return;\n\n    var handleMutation = function handleMutation() {\n      var tabIndex = floatingFocusNode.getAttribute('tabindex');\n      var tabbableContent = getTabbableContent();\n      var activeEl = activeElement(getDocument(floating));\n      var tabbableIndex = tabbableContent.indexOf(activeEl);\n\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n\n      if (orderRef.current.includes('floating') || activeEl !== refs.domReference.current && tabbableContent.length === 0) {\n        if (tabIndex !== '0') {\n          floatingFocusNode.setAttribute('tabindex', '0');\n        }\n      } else if (tabIndex !== '-1') {\n        floatingFocusNode.setAttribute('tabindex', '-1');\n      }\n    };\n\n    handleMutation();\n    var observer = new MutationObserver(handleMutation);\n    observer.observe(floatingFocusNode, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n    return function () {\n      observer.disconnect();\n    };\n  }, [disabled, floating, floatingFocusNode, refs, orderRef, getTabbableContent, ignoreInitialFocus]);\n\n  function renderDismissButton(location) {\n    if (disabled || !visuallyHiddenDismiss || !modal) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(VisuallyHiddenDismiss, {\n      ref: location === 'start' ? startDismissButtonRef : endDismissButtonRef,\n      onClick: function onClick(event) {\n        return onOpenChange(false, event.nativeEvent);\n      }\n    }, typeof visuallyHiddenDismiss === 'string' ? visuallyHiddenDismiss : 'Dismiss');\n  }\n\n  var shouldRenderGuards = !disabled && guards && (modal ? !isUntrappedTypeableCombobox : true) && (isInsidePortal || modal);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, shouldRenderGuards && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"inside\",\n    ref: portalContext == null ? void 0 : portalContext.beforeInsideRef,\n    onFocus: function onFocus(event) {\n      if (modal) {\n        var els = getTabbableElements();\n        enqueueFocus(order[0] === 'reference' ? els[0] : els[els.length - 1]);\n      } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n        preventReturnFocusRef.current = false;\n\n        if (isOutsideEvent(event, portalContext.portalNode)) {\n          var nextTabbable = getNextTabbable() || domReference;\n          nextTabbable == null || nextTabbable.focus();\n        } else {\n          var _portalContext$before;\n\n          (_portalContext$before = portalContext.beforeOutsideRef.current) == null || _portalContext$before.focus();\n        }\n      }\n    }\n  }), !isUntrappedTypeableCombobox && renderDismissButton('start'), children, renderDismissButton('end'), shouldRenderGuards && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"inside\",\n    ref: portalContext == null ? void 0 : portalContext.afterInsideRef,\n    onFocus: function onFocus(event) {\n      if (modal) {\n        enqueueFocus(getTabbableElements()[0]);\n      } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n        if (closeOnFocusOut) {\n          preventReturnFocusRef.current = true;\n        }\n\n        if (isOutsideEvent(event, portalContext.portalNode)) {\n          var prevTabbable = getPreviousTabbable() || domReference;\n          prevTabbable == null || prevTabbable.focus();\n        } else {\n          var _portalContext$afterO;\n\n          (_portalContext$afterO = portalContext.afterOutsideRef.current) == null || _portalContext$afterO.focus();\n        }\n      }\n    }\n  }));\n}\n\nvar activeLocks = /*#__PURE__*/new Set();\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\n\nvar FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(props, ref) {\n  var _props$lockScroll = props.lockScroll,\n      lockScroll = _props$lockScroll === void 0 ? false : _props$lockScroll,\n      rest = _objectWithoutProperties(props, _excluded5);\n\n  var lockId = useId();\n  index(function () {\n    if (!lockScroll) return;\n    activeLocks.add(lockId);\n    var isIOS = /iP(hone|ad|od)|iOS/.test(getPlatform());\n    var bodyStyle = document.body.style; // RTL <body> scrollbar\n\n    var scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n    var paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n    var scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n    var scrollX = bodyStyle.left ? parseFloat(bodyStyle.left) : window.scrollX;\n    var scrollY = bodyStyle.top ? parseFloat(bodyStyle.top) : window.scrollY;\n    bodyStyle.overflow = 'hidden';\n\n    if (scrollbarWidth) {\n      bodyStyle[paddingProp] = scrollbarWidth + \"px\";\n    } // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n    // technique has fewer side effects.\n\n\n    if (isIOS) {\n      var _window$visualViewpor, _window$visualViewpor2; // iOS 12 does not support `visualViewport`.\n\n\n      var offsetLeft = ((_window$visualViewpor = window.visualViewport) == null ? void 0 : _window$visualViewpor.offsetLeft) || 0;\n      var offsetTop = ((_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetTop) || 0;\n      Object.assign(bodyStyle, {\n        position: 'fixed',\n        top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n        left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n        right: '0'\n      });\n    }\n\n    return function () {\n      activeLocks.delete(lockId);\n\n      if (activeLocks.size === 0) {\n        Object.assign(bodyStyle, _defineProperty({\n          overflow: ''\n        }, paddingProp, ''));\n\n        if (isIOS) {\n          Object.assign(bodyStyle, {\n            position: '',\n            top: '',\n            left: '',\n            right: ''\n          });\n          window.scrollTo(scrollX, scrollY);\n        }\n      }\n    };\n  }, [lockId, lockScroll]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, rest, {\n    style: _objectSpread({\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }, rest.style)\n  }));\n});\n\nfunction isButtonTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'BUTTON';\n}\n\nfunction isSpaceIgnored(element) {\n  return isTypeableElement(element);\n}\n/**\n * Opens or closes the floating element when clicking the reference element.\n * @see https://floating-ui.com/docs/useClick\n */\n\n\nfunction useClick(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      dataRef = context.dataRef,\n      domReference = context.elements.domReference;\n  var _props4 = props,\n      _props4$enabled = _props4.enabled,\n      enabled = _props4$enabled === void 0 ? true : _props4$enabled,\n      _props4$event = _props4.event,\n      eventOption = _props4$event === void 0 ? 'click' : _props4$event,\n      _props4$toggle = _props4.toggle,\n      toggle = _props4$toggle === void 0 ? true : _props4$toggle,\n      _props4$ignoreMouse = _props4.ignoreMouse,\n      ignoreMouse = _props4$ignoreMouse === void 0 ? false : _props4$ignoreMouse,\n      _props4$keyboardHandl = _props4.keyboardHandlers,\n      keyboardHandlers = _props4$keyboardHandl === void 0 ? true : _props4$keyboardHandl;\n  var pointerTypeRef = React.useRef();\n  var didKeyDownRef = React.useRef(false);\n  var reference = React.useMemo(function () {\n    return {\n      onPointerDown: function onPointerDown(event) {\n        pointerTypeRef.current = event.pointerType;\n      },\n      onMouseDown: function onMouseDown(event) {\n        var pointerType = pointerTypeRef.current; // Ignore all buttons except for the \"main\" button.\n        // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\n        if (event.button !== 0) return;\n        if (eventOption === 'click') return;\n        if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n\n        if (open && toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'mousedown' : true)) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          // Prevent stealing focus from the floating element\n          event.preventDefault();\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      },\n      onClick: function onClick(event) {\n        var pointerType = pointerTypeRef.current;\n\n        if (eventOption === 'mousedown' && pointerTypeRef.current) {\n          pointerTypeRef.current = undefined;\n          return;\n        }\n\n        if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n\n        if (open && toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'click' : true)) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      },\n      onKeyDown: function onKeyDown(event) {\n        pointerTypeRef.current = undefined;\n\n        if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event)) {\n          return;\n        }\n\n        if (event.key === ' ' && !isSpaceIgnored(domReference)) {\n          // Prevent scrolling\n          event.preventDefault();\n          didKeyDownRef.current = true;\n        }\n\n        if (event.key === 'Enter') {\n          if (open && toggle) {\n            onOpenChange(false, event.nativeEvent, 'click');\n          } else {\n            onOpenChange(true, event.nativeEvent, 'click');\n          }\n        }\n      },\n      onKeyUp: function onKeyUp(event) {\n        if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event) || isSpaceIgnored(domReference)) {\n          return;\n        }\n\n        if (event.key === ' ' && didKeyDownRef.current) {\n          didKeyDownRef.current = false;\n\n          if (open && toggle) {\n            onOpenChange(false, event.nativeEvent, 'click');\n          } else {\n            onOpenChange(true, event.nativeEvent, 'click');\n          }\n        }\n      }\n    };\n  }, [dataRef, domReference, eventOption, ignoreMouse, keyboardHandlers, onOpenChange, open, toggle]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference\n    } : {};\n  }, [enabled, reference]);\n}\n\nfunction createVirtualElement(domElement, data) {\n  var offsetX = null;\n  var offsetY = null;\n  var isAutoUpdateEvent = false;\n  return {\n    contextElement: domElement || undefined,\n    getBoundingClientRect: function getBoundingClientRect() {\n      var _data$dataRef$current;\n\n      var domRect = (domElement == null ? void 0 : domElement.getBoundingClientRect()) || {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      };\n      var isXAxis = data.axis === 'x' || data.axis === 'both';\n      var isYAxis = data.axis === 'y' || data.axis === 'both';\n      var canTrackCursorOnAutoUpdate = ['mouseenter', 'mousemove'].includes(((_data$dataRef$current = data.dataRef.current.openEvent) == null ? void 0 : _data$dataRef$current.type) || '') && data.pointerType !== 'touch';\n      var width = domRect.width;\n      var height = domRect.height;\n      var x = domRect.x;\n      var y = domRect.y;\n\n      if (offsetX == null && data.x && isXAxis) {\n        offsetX = domRect.x - data.x;\n      }\n\n      if (offsetY == null && data.y && isYAxis) {\n        offsetY = domRect.y - data.y;\n      }\n\n      x -= offsetX || 0;\n      y -= offsetY || 0;\n      width = 0;\n      height = 0;\n\n      if (!isAutoUpdateEvent || canTrackCursorOnAutoUpdate) {\n        width = data.axis === 'y' ? domRect.width : 0;\n        height = data.axis === 'x' ? domRect.height : 0;\n        x = isXAxis && data.x != null ? data.x : x;\n        y = isYAxis && data.y != null ? data.y : y;\n      } else if (isAutoUpdateEvent && !canTrackCursorOnAutoUpdate) {\n        height = data.axis === 'x' ? domRect.height : height;\n        width = data.axis === 'y' ? domRect.width : width;\n      }\n\n      isAutoUpdateEvent = true;\n      return {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        top: y,\n        right: x + width,\n        bottom: y + height,\n        left: x\n      };\n    }\n  };\n}\n\nfunction isMouseBasedEvent(event) {\n  return event != null && event.clientX != null;\n}\n/**\n * Positions the floating element relative to a client point (in the viewport),\n * such as the mouse position. By default, it follows the mouse cursor.\n * @see https://floating-ui.com/docs/useClientPoint\n */\n\n\nfunction useClientPoint(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      dataRef = context.dataRef,\n      _context$elements2 = context.elements,\n      floating = _context$elements2.floating,\n      domReference = _context$elements2.domReference,\n      refs = context.refs;\n  var _props5 = props,\n      _props5$enabled = _props5.enabled,\n      enabled = _props5$enabled === void 0 ? true : _props5$enabled,\n      _props5$axis = _props5.axis,\n      axis = _props5$axis === void 0 ? 'both' : _props5$axis,\n      _props5$x = _props5.x,\n      x = _props5$x === void 0 ? null : _props5$x,\n      _props5$y = _props5.y,\n      y = _props5$y === void 0 ? null : _props5$y;\n  var initialRef = React.useRef(false);\n  var cleanupListenerRef = React.useRef(null);\n\n  var _React$useState17 = React.useState(),\n      _React$useState18 = _slicedToArray(_React$useState17, 2),\n      pointerType = _React$useState18[0],\n      setPointerType = _React$useState18[1];\n\n  var _React$useState19 = React.useState([]),\n      _React$useState20 = _slicedToArray(_React$useState19, 2),\n      reactive = _React$useState20[0],\n      setReactive = _React$useState20[1];\n\n  var setReference = useEffectEvent(function (x, y) {\n    if (initialRef.current) return; // Prevent setting if the open event was not a mouse-like one\n    // (e.g. focus to open, then hover over the reference element).\n    // Only apply if the event exists.\n\n    if (dataRef.current.openEvent && !isMouseBasedEvent(dataRef.current.openEvent)) {\n      return;\n    }\n\n    refs.setPositionReference(createVirtualElement(domReference, {\n      x: x,\n      y: y,\n      axis: axis,\n      dataRef: dataRef,\n      pointerType: pointerType\n    }));\n  });\n  var handleReferenceEnterOrMove = useEffectEvent(function (event) {\n    if (x != null || y != null) return;\n\n    if (!open) {\n      setReference(event.clientX, event.clientY);\n    } else if (!cleanupListenerRef.current) {\n      // If there's no cleanup, there's no listener, but we want to ensure\n      // we add the listener if the cursor landed on the floating element and\n      // then back on the reference (i.e. it's interactive).\n      setReactive([]);\n    }\n  }); // If the pointer is a mouse-like pointer, we want to continue following the\n  // mouse even if the floating element is transitioning out. On touch\n  // devices, this is undesirable because the floating element will move to\n  // the dismissal touch point.\n\n  var openCheck = isMouseLikePointerType(pointerType) ? floating : open;\n  var addListener = React.useCallback(function () {\n    // Explicitly specified `x`/`y` coordinates shouldn't add a listener.\n    if (!openCheck || !enabled || x != null || y != null) return;\n    var win = getWindow(floating);\n\n    function handleMouseMove(event) {\n      var target = getTarget(event);\n\n      if (!contains(floating, target)) {\n        setReference(event.clientX, event.clientY);\n      } else {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      }\n    }\n\n    if (!dataRef.current.openEvent || isMouseBasedEvent(dataRef.current.openEvent)) {\n      win.addEventListener('mousemove', handleMouseMove);\n\n      var cleanup = function cleanup() {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      };\n\n      cleanupListenerRef.current = cleanup;\n      return cleanup;\n    }\n\n    refs.setPositionReference(domReference);\n  }, [openCheck, enabled, x, y, floating, dataRef, refs, domReference, setReference]);\n  React.useEffect(function () {\n    return addListener();\n  }, [addListener, reactive]);\n  React.useEffect(function () {\n    if (enabled && !floating) {\n      initialRef.current = false;\n    }\n  }, [enabled, floating]);\n  React.useEffect(function () {\n    if (!enabled && open) {\n      initialRef.current = true;\n    }\n  }, [enabled, open]);\n  index(function () {\n    if (enabled && (x != null || y != null)) {\n      initialRef.current = false;\n      setReference(x, y);\n    }\n  }, [enabled, x, y, setReference]);\n  var reference = React.useMemo(function () {\n    function setPointerTypeRef(_ref) {\n      var pointerType = _ref.pointerType;\n      setPointerType(pointerType);\n    }\n\n    return {\n      onPointerDown: setPointerTypeRef,\n      onPointerEnter: setPointerTypeRef,\n      onMouseMove: handleReferenceEnterOrMove,\n      onMouseEnter: handleReferenceEnterOrMove\n    };\n  }, [handleReferenceEnterOrMove]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference\n    } : {};\n  }, [enabled, reference]);\n}\n\nvar bubbleHandlerKeys = {\n  pointerdown: 'onPointerDown',\n  mousedown: 'onMouseDown',\n  click: 'onClick'\n};\nvar captureHandlerKeys = {\n  pointerdown: 'onPointerDownCapture',\n  mousedown: 'onMouseDownCapture',\n  click: 'onClickCapture'\n};\n\nvar normalizeProp = function normalizeProp(normalizable) {\n  var _normalizable$escapeK, _normalizable$outside;\n\n  return {\n    escapeKey: typeof normalizable === 'boolean' ? normalizable : (_normalizable$escapeK = normalizable == null ? void 0 : normalizable.escapeKey) != null ? _normalizable$escapeK : false,\n    outsidePress: typeof normalizable === 'boolean' ? normalizable : (_normalizable$outside = normalizable == null ? void 0 : normalizable.outsidePress) != null ? _normalizable$outside : true\n  };\n};\n/**\n * Closes the floating element when a dismissal is requested — by default, when\n * the user presses the `escape` key or outside of the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\n\n\nfunction useDismiss(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      elements = context.elements,\n      dataRef = context.dataRef;\n  var _props6 = props,\n      _props6$enabled = _props6.enabled,\n      enabled = _props6$enabled === void 0 ? true : _props6$enabled,\n      _props6$escapeKey = _props6.escapeKey,\n      escapeKey = _props6$escapeKey === void 0 ? true : _props6$escapeKey,\n      _props6$outsidePress = _props6.outsidePress,\n      unstable_outsidePress = _props6$outsidePress === void 0 ? true : _props6$outsidePress,\n      _props6$outsidePressE = _props6.outsidePressEvent,\n      outsidePressEvent = _props6$outsidePressE === void 0 ? 'pointerdown' : _props6$outsidePressE,\n      _props6$referencePres = _props6.referencePress,\n      referencePress = _props6$referencePres === void 0 ? false : _props6$referencePres,\n      _props6$referencePres2 = _props6.referencePressEvent,\n      referencePressEvent = _props6$referencePres2 === void 0 ? 'pointerdown' : _props6$referencePres2,\n      _props6$ancestorScrol = _props6.ancestorScroll,\n      ancestorScroll = _props6$ancestorScrol === void 0 ? false : _props6$ancestorScrol,\n      bubbles = _props6.bubbles,\n      capture = _props6.capture;\n  var tree = useFloatingTree();\n  var outsidePressFn = useEffectEvent(typeof unstable_outsidePress === 'function' ? unstable_outsidePress : function () {\n    return false;\n  });\n  var outsidePress = typeof unstable_outsidePress === 'function' ? outsidePressFn : unstable_outsidePress;\n  var insideReactTreeRef = React.useRef(false);\n  var endedOrStartedInsideRef = React.useRef(false);\n\n  var _normalizeProp = normalizeProp(bubbles),\n      escapeKeyBubbles = _normalizeProp.escapeKey,\n      outsidePressBubbles = _normalizeProp.outsidePress;\n\n  var _normalizeProp2 = normalizeProp(capture),\n      escapeKeyCapture = _normalizeProp2.escapeKey,\n      outsidePressCapture = _normalizeProp2.outsidePress;\n\n  var closeOnEscapeKeyDown = useEffectEvent(function (event) {\n    var _dataRef$current$floa;\n\n    if (!open || !enabled || !escapeKey || event.key !== 'Escape') {\n      return;\n    }\n\n    var nodeId = (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n    var children = tree ? getChildren(tree.nodesRef.current, nodeId) : [];\n\n    if (!escapeKeyBubbles) {\n      event.stopPropagation();\n\n      if (children.length > 0) {\n        var shouldDismiss = true;\n        children.forEach(function (child) {\n          var _child$context;\n\n          if ((_child$context = child.context) != null && _child$context.open && !child.context.dataRef.current.__escapeKeyBubbles) {\n            shouldDismiss = false;\n            return;\n          }\n        });\n\n        if (!shouldDismiss) {\n          return;\n        }\n      }\n    }\n\n    onOpenChange(false, isReactEvent(event) ? event.nativeEvent : event, 'escape-key');\n  });\n  var closeOnEscapeKeyDownCapture = useEffectEvent(function (event) {\n    var _getTarget2;\n\n    var callback = function callback() {\n      var _getTarget;\n\n      closeOnEscapeKeyDown(event);\n      (_getTarget = getTarget(event)) == null || _getTarget.removeEventListener('keydown', callback);\n    };\n\n    (_getTarget2 = getTarget(event)) == null || _getTarget2.addEventListener('keydown', callback);\n  });\n  var closeOnPressOutside = useEffectEvent(function (event) {\n    var _dataRef$current$floa2; // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n\n\n    var insideReactTree = insideReactTreeRef.current;\n    insideReactTreeRef.current = false; // When click outside is lazy (`click` event), handle dragging.\n    // Don't close if:\n    // - The click started inside the floating element.\n    // - The click ended inside the floating element.\n\n    var endedOrStartedInside = endedOrStartedInsideRef.current;\n    endedOrStartedInsideRef.current = false;\n\n    if (outsidePressEvent === 'click' && endedOrStartedInside) {\n      return;\n    }\n\n    if (insideReactTree) {\n      return;\n    }\n\n    if (typeof outsidePress === 'function' && !outsidePress(event)) {\n      return;\n    }\n\n    var target = getTarget(event);\n    var inertSelector = \"[\" + createAttribute('inert') + \"]\";\n    var markers = getDocument(elements.floating).querySelectorAll(inertSelector);\n    var targetRootAncestor = isElement(target) ? target : null;\n\n    while (targetRootAncestor && !isLastTraversableNode(targetRootAncestor)) {\n      var nextParent = getParentNode(targetRootAncestor);\n\n      if (isLastTraversableNode(nextParent) || !isElement(nextParent)) {\n        break;\n      }\n\n      targetRootAncestor = nextParent;\n    } // Check if the click occurred on a third-party element injected after the\n    // floating element rendered.\n\n\n    if (markers.length && isElement(target) && !isRootElement(target) && // Clicked on a direct ancestor (e.g. FloatingOverlay).\n    !contains(target, elements.floating) && // If the target root element contains none of the markers, then the\n    // element was injected after the floating element rendered.\n    Array.from(markers).every(function (marker) {\n      return !contains(targetRootAncestor, marker);\n    })) {\n      return;\n    } // Check if the click occurred on the scrollbar\n\n\n    if (isHTMLElement(target) && floating) {\n      // In Firefox, `target.scrollWidth > target.clientWidth` for inline\n      // elements.\n      var canScrollX = target.clientWidth > 0 && target.scrollWidth > target.clientWidth;\n      var canScrollY = target.clientHeight > 0 && target.scrollHeight > target.clientHeight;\n      var xCond = canScrollY && event.offsetX > target.clientWidth; // In some browsers it is possible to change the <body> (or window)\n      // scrollbar to the left side, but is very rare and is difficult to\n      // check for. Plus, for modal dialogs with backdrops, it is more\n      // important that the backdrop is checked but not so much the window.\n\n      if (canScrollY) {\n        var isRTL = getComputedStyle(target).direction === 'rtl';\n\n        if (isRTL) {\n          xCond = event.offsetX <= target.offsetWidth - target.clientWidth;\n        }\n      }\n\n      if (xCond || canScrollX && event.offsetY > target.clientHeight) {\n        return;\n      }\n    }\n\n    var nodeId = (_dataRef$current$floa2 = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa2.nodeId;\n    var targetIsInsideChildren = tree && getChildren(tree.nodesRef.current, nodeId).some(function (node) {\n      var _node$context;\n\n      return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.elements.floating);\n    });\n\n    if (isEventTargetWithin(event, elements.floating) || isEventTargetWithin(event, elements.domReference) || targetIsInsideChildren) {\n      return;\n    }\n\n    var children = tree ? getChildren(tree.nodesRef.current, nodeId) : [];\n\n    if (children.length > 0) {\n      var shouldDismiss = true;\n      children.forEach(function (child) {\n        var _child$context2;\n\n        if ((_child$context2 = child.context) != null && _child$context2.open && !child.context.dataRef.current.__outsidePressBubbles) {\n          shouldDismiss = false;\n          return;\n        }\n      });\n\n      if (!shouldDismiss) {\n        return;\n      }\n    }\n\n    onOpenChange(false, event, 'outside-press');\n  });\n  var closeOnPressOutsideCapture = useEffectEvent(function (event) {\n    var _getTarget4;\n\n    var callback = function callback() {\n      var _getTarget3;\n\n      closeOnPressOutside(event);\n      (_getTarget3 = getTarget(event)) == null || _getTarget3.removeEventListener(outsidePressEvent, callback);\n    };\n\n    (_getTarget4 = getTarget(event)) == null || _getTarget4.addEventListener(outsidePressEvent, callback);\n  });\n  React.useEffect(function () {\n    if (!open || !enabled) {\n      return;\n    }\n\n    dataRef.current.__escapeKeyBubbles = escapeKeyBubbles;\n    dataRef.current.__outsidePressBubbles = outsidePressBubbles;\n\n    function onScroll(event) {\n      onOpenChange(false, event, 'ancestor-scroll');\n    }\n\n    var doc = getDocument(elements.floating);\n    escapeKey && doc.addEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n    outsidePress && doc.addEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n    var ancestors = [];\n\n    if (ancestorScroll) {\n      if (isElement(elements.domReference)) {\n        ancestors = getOverflowAncestors(elements.domReference);\n      }\n\n      if (isElement(elements.floating)) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.floating));\n      }\n\n      if (!isElement(elements.reference) && elements.reference && elements.reference.contextElement) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.reference.contextElement));\n      }\n    } // Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n\n\n    ancestors = ancestors.filter(function (ancestor) {\n      var _doc$defaultView;\n\n      return ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport);\n    });\n    ancestors.forEach(function (ancestor) {\n      ancestor.addEventListener('scroll', onScroll, {\n        passive: true\n      });\n    });\n    return function () {\n      escapeKey && doc.removeEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n      outsidePress && doc.removeEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n      ancestors.forEach(function (ancestor) {\n        ancestor.removeEventListener('scroll', onScroll);\n      });\n    };\n  }, [dataRef, elements, escapeKey, outsidePress, outsidePressEvent, open, onOpenChange, ancestorScroll, enabled, escapeKeyBubbles, outsidePressBubbles, closeOnEscapeKeyDown, escapeKeyCapture, closeOnEscapeKeyDownCapture, closeOnPressOutside, outsidePressCapture, closeOnPressOutsideCapture]);\n  React.useEffect(function () {\n    insideReactTreeRef.current = false;\n  }, [outsidePress, outsidePressEvent]);\n  var reference = React.useMemo(function () {\n    return _defineProperty({\n      onKeyDown: closeOnEscapeKeyDown\n    }, bubbleHandlerKeys[referencePressEvent], function (event) {\n      if (referencePress) {\n        onOpenChange(false, event.nativeEvent, 'reference-press');\n      }\n    });\n  }, [closeOnEscapeKeyDown, onOpenChange, referencePress, referencePressEvent]);\n  var floating = React.useMemo(function () {\n    return _defineProperty({\n      onKeyDown: closeOnEscapeKeyDown,\n      onMouseDown: function onMouseDown() {\n        endedOrStartedInsideRef.current = true;\n      },\n      onMouseUp: function onMouseUp() {\n        endedOrStartedInsideRef.current = true;\n      }\n    }, captureHandlerKeys[outsidePressEvent], function () {\n      insideReactTreeRef.current = true;\n    });\n  }, [closeOnEscapeKeyDown, outsidePressEvent]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference,\n      floating: floating\n    } : {};\n  }, [enabled, reference, floating]);\n}\n\nfunction useFloatingRootContext(options) {\n  var _options$open = options.open,\n      open = _options$open === void 0 ? false : _options$open,\n      onOpenChangeProp = options.onOpenChange,\n      elementsProp = options.elements;\n  var floatingId = useId();\n  var dataRef = React.useRef({});\n\n  var _React$useState21 = React.useState(function () {\n    return createPubSub();\n  }),\n      _React$useState22 = _slicedToArray(_React$useState21, 1),\n      events = _React$useState22[0];\n\n  var nested = useFloatingParentNodeId() != null;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var optionDomReference = elementsProp.reference;\n\n    if (optionDomReference && !isElement(optionDomReference)) {\n      error('Cannot pass a virtual element to the `elements.reference` option,', 'as it must be a real DOM element. Use `refs.setPositionReference()`', 'instead.');\n    }\n  }\n\n  var _React$useState23 = React.useState(elementsProp.reference),\n      _React$useState24 = _slicedToArray(_React$useState23, 2),\n      positionReference = _React$useState24[0],\n      setPositionReference = _React$useState24[1];\n\n  var onOpenChange = useEffectEvent(function (open, event, reason) {\n    dataRef.current.openEvent = open ? event : undefined;\n    events.emit('openchange', {\n      open: open,\n      event: event,\n      reason: reason,\n      nested: nested\n    });\n    onOpenChangeProp == null || onOpenChangeProp(open, event, reason);\n  });\n  var refs = React.useMemo(function () {\n    return {\n      setPositionReference: setPositionReference\n    };\n  }, []);\n  var elements = React.useMemo(function () {\n    return {\n      reference: positionReference || elementsProp.reference || null,\n      floating: elementsProp.floating || null,\n      domReference: elementsProp.reference\n    };\n  }, [positionReference, elementsProp.reference, elementsProp.floating]);\n  return React.useMemo(function () {\n    return {\n      dataRef: dataRef,\n      open: open,\n      onOpenChange: onOpenChange,\n      elements: elements,\n      events: events,\n      floatingId: floatingId,\n      refs: refs\n    };\n  }, [open, onOpenChange, elements, events, floatingId, refs]);\n}\n/**\n * Provides data to position a floating element and context to add interactions.\n * @see https://floating-ui.com/docs/useFloating\n */\n\n\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options3 = options,\n      nodeId = _options3.nodeId;\n  var internalRootContext = useFloatingRootContext(_objectSpread(_objectSpread({}, options), {}, {\n    elements: _objectSpread({\n      reference: null,\n      floating: null\n    }, options.elements)\n  }));\n  var rootContext = options.rootContext || internalRootContext;\n  var computedElements = rootContext.elements;\n\n  var _React$useState25 = React.useState(null),\n      _React$useState26 = _slicedToArray(_React$useState25, 2),\n      _domReference = _React$useState26[0],\n      setDomReference = _React$useState26[1];\n\n  var _React$useState27 = React.useState(null),\n      _React$useState28 = _slicedToArray(_React$useState27, 2),\n      positionReference = _React$useState28[0],\n      _setPositionReference = _React$useState28[1];\n\n  var optionDomReference = computedElements == null ? void 0 : computedElements.reference;\n  var domReference = optionDomReference || _domReference;\n  var domReferenceRef = React.useRef(null);\n  var tree = useFloatingTree();\n  index(function () {\n    if (domReference) {\n      domReferenceRef.current = domReference;\n    }\n  }, [domReference]);\n  var position = useFloating$1(_objectSpread(_objectSpread({}, options), {}, {\n    elements: _objectSpread(_objectSpread({}, computedElements), positionReference && {\n      reference: positionReference\n    })\n  }));\n  var setPositionReference = React.useCallback(function (node) {\n    var computedPositionReference = isElement(node) ? {\n      getBoundingClientRect: function getBoundingClientRect() {\n        return node.getBoundingClientRect();\n      },\n      contextElement: node\n    } : node; // Store the positionReference in state if the DOM reference is specified externally via the\n    // `elements.reference` option. This ensures that it won't be overridden on future renders.\n\n    _setPositionReference(computedPositionReference);\n\n    position.refs.setReference(computedPositionReference);\n  }, [position.refs]);\n  var setReference = React.useCallback(function (node) {\n    if (isElement(node) || node === null) {\n      domReferenceRef.current = node;\n      setDomReference(node);\n    } // Backwards-compatibility for passing a virtual element to `reference`\n    // after it has set the DOM reference.\n\n\n    if (isElement(position.refs.reference.current) || position.refs.reference.current === null || // Don't allow setting virtual elements using the old technique back to\n    // `null` to support `positionReference` + an unstable `reference`\n    // callback ref.\n    node !== null && !isElement(node)) {\n      position.refs.setReference(node);\n    }\n  }, [position.refs]);\n  var refs = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, position.refs), {}, {\n      setReference: setReference,\n      setPositionReference: setPositionReference,\n      domReference: domReferenceRef\n    });\n  }, [position.refs, setReference, setPositionReference]);\n  var elements = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, position.elements), {}, {\n      domReference: domReference\n    });\n  }, [position.elements, domReference]);\n  var context = React.useMemo(function () {\n    return _objectSpread(_objectSpread(_objectSpread({}, position), rootContext), {}, {\n      refs: refs,\n      elements: elements,\n      nodeId: nodeId\n    });\n  }, [position, refs, elements, nodeId, rootContext]);\n  index(function () {\n    rootContext.dataRef.current.floatingContext = context;\n    var node = tree == null ? void 0 : tree.nodesRef.current.find(function (node) {\n      return node.id === nodeId;\n    });\n\n    if (node) {\n      node.context = context;\n    }\n  });\n  return React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, position), {}, {\n      context: context,\n      refs: refs,\n      elements: elements\n    });\n  }, [position, refs, elements, context]);\n}\n/**\n * Opens the floating element while the reference element has focus, like CSS\n * `:focus`.\n * @see https://floating-ui.com/docs/useFocus\n */\n\n\nfunction useFocus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      events = context.events,\n      dataRef = context.dataRef,\n      elements = context.elements;\n  var _props7 = props,\n      _props7$enabled = _props7.enabled,\n      enabled = _props7$enabled === void 0 ? true : _props7$enabled,\n      _props7$visibleOnly = _props7.visibleOnly,\n      visibleOnly = _props7$visibleOnly === void 0 ? true : _props7$visibleOnly;\n  var blockFocusRef = React.useRef(false);\n  var timeoutRef = React.useRef();\n  var keyboardModalityRef = React.useRef(true);\n  React.useEffect(function () {\n    if (!enabled) return;\n    var win = getWindow(elements.domReference); // If the reference was focused and the user left the tab/window, and the\n    // floating element was not open, the focus should be blocked when they\n    // return to the tab/window.\n\n    function onBlur() {\n      if (!open && isHTMLElement(elements.domReference) && elements.domReference === activeElement(getDocument(elements.domReference))) {\n        blockFocusRef.current = true;\n      }\n    }\n\n    function onKeyDown() {\n      keyboardModalityRef.current = true;\n    }\n\n    win.addEventListener('blur', onBlur);\n    win.addEventListener('keydown', onKeyDown, true);\n    return function () {\n      win.removeEventListener('blur', onBlur);\n      win.removeEventListener('keydown', onKeyDown, true);\n    };\n  }, [elements.domReference, open, enabled]);\n  React.useEffect(function () {\n    if (!enabled) return;\n\n    function onOpenChange(_ref) {\n      var reason = _ref.reason;\n\n      if (reason === 'reference-press' || reason === 'escape-key') {\n        blockFocusRef.current = true;\n      }\n    }\n\n    events.on('openchange', onOpenChange);\n    return function () {\n      events.off('openchange', onOpenChange);\n    };\n  }, [events, enabled]);\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(timeoutRef.current);\n    };\n  }, []);\n  var reference = React.useMemo(function () {\n    return {\n      onPointerDown: function onPointerDown(event) {\n        if (isVirtualPointerEvent(event.nativeEvent)) return;\n        keyboardModalityRef.current = false;\n      },\n      onMouseLeave: function onMouseLeave() {\n        blockFocusRef.current = false;\n      },\n      onFocus: function onFocus(event) {\n        if (blockFocusRef.current) return;\n        var target = getTarget(event.nativeEvent);\n\n        if (visibleOnly && isElement(target)) {\n          try {\n            // Mac Safari unreliably matches `:focus-visible` on the reference\n            // if focus was outside the page initially - use the fallback\n            // instead.\n            if (isSafari() && isMac()) throw Error();\n            if (!target.matches(':focus-visible')) return;\n          } catch (e) {\n            // Old browsers will throw an error when using `:focus-visible`.\n            if (!keyboardModalityRef.current && !isTypeableElement(target)) {\n              return;\n            }\n          }\n        }\n\n        onOpenChange(true, event.nativeEvent, 'focus');\n      },\n      onBlur: function onBlur(event) {\n        blockFocusRef.current = false;\n        var relatedTarget = event.relatedTarget;\n        var nativeEvent = event.nativeEvent; // Hit the non-modal focus management portal guard. Focus will be\n        // moved into the floating element immediately after.\n\n        var movedToFocusGuard = isElement(relatedTarget) && relatedTarget.hasAttribute(createAttribute('focus-guard')) && relatedTarget.getAttribute('data-type') === 'outside'; // Wait for the window blur listener to fire.\n\n        timeoutRef.current = window.setTimeout(function () {\n          var _dataRef$current$floa;\n\n          var activeEl = activeElement(elements.domReference ? elements.domReference.ownerDocument : document); // Focus left the page, keep it open.\n\n          if (!relatedTarget && activeEl === elements.domReference) return; // When focusing the reference element (e.g. regular click), then\n          // clicking into the floating element, prevent it from hiding.\n          // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n          // We can not rely on relatedTarget to point to the correct element\n          // as it will only point to the shadow host of the newly focused element\n          // and not the element that actually has received focus if it is located\n          // inside a shadow root.\n\n          if (contains((_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.refs.floating.current, activeEl) || contains(elements.domReference, activeEl) || movedToFocusGuard) {\n            return;\n          }\n\n          onOpenChange(false, nativeEvent, 'focus');\n        });\n      }\n    };\n  }, [dataRef, elements.domReference, onOpenChange, visibleOnly]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference\n    } : {};\n  }, [enabled, reference]);\n}\n\nvar ACTIVE_KEY = 'active';\nvar SELECTED_KEY = 'selected';\n\nfunction mergeProps(userProps, propsList, elementKey) {\n  var map = new Map();\n  var isItem = elementKey === 'item';\n  var domUserProps = userProps;\n\n  if (isItem && userProps) {\n    var _ = userProps[ACTIVE_KEY],\n        __ = userProps[SELECTED_KEY],\n        validProps = _objectWithoutProperties(userProps, [ACTIVE_KEY, SELECTED_KEY].map(_toPropertyKey));\n\n    domUserProps = validProps;\n  }\n\n  return _objectSpread(_objectSpread(_objectSpread({}, elementKey === 'floating' && {\n    tabIndex: -1\n  }), domUserProps), propsList.map(function (value) {\n    var propsOrGetProps = value ? value[elementKey] : null;\n\n    if (typeof propsOrGetProps === 'function') {\n      return userProps ? propsOrGetProps(userProps) : null;\n    }\n\n    return propsOrGetProps;\n  }).concat(userProps).reduce(function (acc, props) {\n    if (!props) {\n      return acc;\n    }\n\n    Object.entries(props).forEach(function (_ref) {\n      var _ref8 = _slicedToArray(_ref, 2),\n          key = _ref8[0],\n          value = _ref8[1];\n\n      if (isItem && [ACTIVE_KEY, SELECTED_KEY].includes(key)) {\n        return;\n      }\n\n      if (key.indexOf('on') === 0) {\n        if (!map.has(key)) {\n          map.set(key, []);\n        }\n\n        if (typeof value === 'function') {\n          var _map$get;\n\n          (_map$get = map.get(key)) == null || _map$get.push(value);\n\n          acc[key] = function () {\n            var _map$get2;\n\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            return (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.map(function (fn) {\n              return fn.apply(void 0, args);\n            }).find(function (val) {\n              return val !== undefined;\n            });\n          };\n        }\n      } else {\n        acc[key] = value;\n      }\n    });\n    return acc;\n  }, {}));\n}\n/**\n * Merges an array of interaction hooks' props into prop getters, allowing\n * event handler functions to be composed together without overwriting one\n * another.\n * @see https://floating-ui.com/docs/useInteractions\n */\n\n\nfunction useInteractions(propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n\n  var referenceDeps = propsList.map(function (key) {\n    return key == null ? void 0 : key.reference;\n  });\n  var floatingDeps = propsList.map(function (key) {\n    return key == null ? void 0 : key.floating;\n  });\n  var itemDeps = propsList.map(function (key) {\n    return key == null ? void 0 : key.item;\n  });\n  var getReferenceProps = React.useCallback(function (userProps) {\n    return mergeProps(userProps, propsList, 'reference');\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  referenceDeps);\n  var getFloatingProps = React.useCallback(function (userProps) {\n    return mergeProps(userProps, propsList, 'floating');\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  floatingDeps);\n  var getItemProps = React.useCallback(function (userProps) {\n    return mergeProps(userProps, propsList, 'item');\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  itemDeps);\n  return React.useMemo(function () {\n    return {\n      getReferenceProps: getReferenceProps,\n      getFloatingProps: getFloatingProps,\n      getItemProps: getItemProps\n    };\n  }, [getReferenceProps, getFloatingProps, getItemProps]);\n}\n\nvar isPreventScrollSupported = false;\n\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n\n    case 'horizontal':\n      return horizontal;\n\n    default:\n      return vertical || horizontal;\n  }\n}\n\nfunction isMainOrientationKey(key, orientation) {\n  var vertical = key === ARROW_UP || key === ARROW_DOWN;\n  var horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\n\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  var vertical = key === ARROW_DOWN;\n  var horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key === ' ' || key === '';\n}\n\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  var vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  var horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\n\nfunction isCrossOrientationCloseKey(key, orientation, rtl) {\n  var vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  var horizontal = key === ARROW_UP;\n  return doSwitch(orientation, vertical, horizontal);\n}\n/**\n * Adds arrow key-based navigation of a list of items, either using real DOM\n * focus or virtual focus.\n * @see https://floating-ui.com/docs/useListNavigation\n */\n\n\nfunction useListNavigation(context, props) {\n  var open = context.open,\n      onOpenChange = context.onOpenChange,\n      elements = context.elements;\n  var listRef = props.listRef,\n      activeIndex = props.activeIndex,\n      _props$onNavigate = props.onNavigate,\n      unstable_onNavigate = _props$onNavigate === void 0 ? function () {} : _props$onNavigate,\n      _props$enabled = props.enabled,\n      enabled = _props$enabled === void 0 ? true : _props$enabled,\n      _props$selectedIndex = props.selectedIndex,\n      selectedIndex = _props$selectedIndex === void 0 ? null : _props$selectedIndex,\n      _props$allowEscape = props.allowEscape,\n      allowEscape = _props$allowEscape === void 0 ? false : _props$allowEscape,\n      _props$loop2 = props.loop,\n      loop = _props$loop2 === void 0 ? false : _props$loop2,\n      _props$nested = props.nested,\n      nested = _props$nested === void 0 ? false : _props$nested,\n      _props$rtl = props.rtl,\n      rtl = _props$rtl === void 0 ? false : _props$rtl,\n      _props$virtual = props.virtual,\n      virtual = _props$virtual === void 0 ? false : _props$virtual,\n      _props$focusItemOnOpe = props.focusItemOnOpen,\n      focusItemOnOpen = _props$focusItemOnOpe === void 0 ? 'auto' : _props$focusItemOnOpe,\n      _props$focusItemOnHov = props.focusItemOnHover,\n      focusItemOnHover = _props$focusItemOnHov === void 0 ? true : _props$focusItemOnHov,\n      _props$openOnArrowKey = props.openOnArrowKeyDown,\n      openOnArrowKeyDown = _props$openOnArrowKey === void 0 ? true : _props$openOnArrowKey,\n      _props$disabledIndice = props.disabledIndices,\n      disabledIndices = _props$disabledIndice === void 0 ? undefined : _props$disabledIndice,\n      _props$orientation2 = props.orientation,\n      orientation = _props$orientation2 === void 0 ? 'vertical' : _props$orientation2,\n      _props$cols2 = props.cols,\n      cols = _props$cols2 === void 0 ? 1 : _props$cols2,\n      _props$scrollItemInto = props.scrollItemIntoView,\n      scrollItemIntoView = _props$scrollItemInto === void 0 ? true : _props$scrollItemInto,\n      virtualItemRef = props.virtualItemRef,\n      itemSizes = props.itemSizes,\n      _props$dense2 = props.dense,\n      dense = _props$dense2 === void 0 ? false : _props$dense2;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        warn('`useListNavigation` looping must be enabled to allow escaping.');\n      }\n\n      if (!virtual) {\n        warn('`useListNavigation` must be virtual to allow escaping.');\n      }\n    }\n\n    if (orientation === 'vertical' && cols > 1) {\n      warn('In grid list navigation mode (`cols` > 1), the `orientation` should', 'be either \"horizontal\" or \"both\".');\n    }\n  }\n\n  var parentId = useFloatingParentNodeId();\n  var tree = useFloatingTree();\n  var onNavigate = useEffectEvent(unstable_onNavigate);\n  var focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  var indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  var keyRef = React.useRef(null);\n  var isPointerModalityRef = React.useRef(true);\n  var previousOnNavigateRef = React.useRef(onNavigate);\n  var previousMountedRef = React.useRef(!!elements.floating);\n  var previousOpenRef = React.useRef(open);\n  var forceSyncFocus = React.useRef(false);\n  var forceScrollIntoViewRef = React.useRef(false);\n  var disabledIndicesRef = useLatestRef(disabledIndices);\n  var latestOpenRef = useLatestRef(open);\n  var scrollItemIntoViewRef = useLatestRef(scrollItemIntoView);\n  var floatingRef = useLatestRef(elements.floating);\n  var selectedIndexRef = useLatestRef(selectedIndex);\n\n  var _React$useState29 = React.useState(),\n      _React$useState30 = _slicedToArray(_React$useState29, 2),\n      activeId = _React$useState30[0],\n      setActiveId = _React$useState30[1];\n\n  var _React$useState31 = React.useState(),\n      _React$useState32 = _slicedToArray(_React$useState31, 2),\n      virtualId = _React$useState32[0],\n      setVirtualId = _React$useState32[1];\n\n  var focusItem = useEffectEvent(function (listRef, indexRef, forceScrollIntoView) {\n    if (forceScrollIntoView === void 0) {\n      forceScrollIntoView = false;\n    }\n\n    function runFocus(item) {\n      if (virtual) {\n        setActiveId(item.id);\n        tree == null || tree.events.emit('virtualfocus', item);\n\n        if (virtualItemRef) {\n          virtualItemRef.current = item;\n        }\n      } else {\n        enqueueFocus(item, {\n          preventScroll: true,\n          // Mac Safari does not move the virtual cursor unless the focus call\n          // is sync. However, for the very first focus call, we need to wait\n          // for the position to be ready in order to prevent unwanted\n          // scrolling. This means the virtual cursor will not move to the first\n          // item when first opening the floating element, but will on\n          // subsequent calls. `preventScroll` is supported in modern Safari,\n          // so we can use that instead.\n          // iOS Safari must be async or the first item will not be focused.\n          sync: isMac() && isSafari() ? isPreventScrollSupported || forceSyncFocus.current : false\n        });\n      }\n    }\n\n    var initialItem = listRef.current[indexRef.current];\n\n    if (initialItem) {\n      runFocus(initialItem);\n    }\n\n    requestAnimationFrame(function () {\n      var waitedItem = listRef.current[indexRef.current] || initialItem;\n      if (!waitedItem) return;\n\n      if (!initialItem) {\n        runFocus(waitedItem);\n      }\n\n      var scrollIntoViewOptions = scrollItemIntoViewRef.current;\n      var shouldScrollIntoView = scrollIntoViewOptions && item && (forceScrollIntoView || !isPointerModalityRef.current);\n\n      if (shouldScrollIntoView) {\n        // JSDOM doesn't support `.scrollIntoView()` but it's widely supported\n        // by all browsers.\n        waitedItem.scrollIntoView == null || waitedItem.scrollIntoView(typeof scrollIntoViewOptions === 'boolean' ? {\n          block: 'nearest',\n          inline: 'nearest'\n        } : scrollIntoViewOptions);\n      }\n    });\n  });\n  index(function () {\n    document.createElement('div').focus({\n      get preventScroll() {\n        isPreventScrollSupported = true;\n        return false;\n      }\n\n    });\n  }, []); // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n\n  index(function () {\n    if (!enabled) return;\n\n    if (open && elements.floating) {\n      if (focusItemOnOpenRef.current && selectedIndex != null) {\n        // Regardless of the pointer modality, we want to ensure the selected\n        // item comes into view when the floating element is opened.\n        forceScrollIntoViewRef.current = true;\n        indexRef.current = selectedIndex;\n        onNavigate(selectedIndex);\n      }\n    } else if (previousMountedRef.current) {\n      // Since the user can specify `onNavigate` conditionally\n      // (onNavigate: open ? setActiveIndex : setSelectedIndex),\n      // we store and call the previous function.\n      indexRef.current = -1;\n      previousOnNavigateRef.current(null);\n    }\n  }, [enabled, open, elements.floating, selectedIndex, onNavigate]); // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n\n  index(function () {\n    if (!enabled) return;\n\n    if (open && elements.floating) {\n      if (activeIndex == null) {\n        forceSyncFocus.current = false;\n\n        if (selectedIndexRef.current != null) {\n          return;\n        } // Reset while the floating element was open (e.g. the list changed).\n\n\n        if (previousMountedRef.current) {\n          indexRef.current = -1;\n          focusItem(listRef, indexRef);\n        } // Initial sync.\n\n\n        if ((!previousOpenRef.current || !previousMountedRef.current) && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n          var runs = 0;\n\n          var waitForListPopulated = function waitForListPopulated() {\n            if (listRef.current[0] == null) {\n              // Avoid letting the browser paint if possible on the first try,\n              // otherwise use rAF. Don't try more than twice, since something\n              // is wrong otherwise.\n              if (runs < 2) {\n                var scheduler = runs ? requestAnimationFrame : queueMicrotask;\n                scheduler(waitForListPopulated);\n              }\n\n              runs++;\n            } else {\n              indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinIndex(listRef, disabledIndicesRef.current) : getMaxIndex(listRef, disabledIndicesRef.current);\n              keyRef.current = null;\n              onNavigate(indexRef.current);\n            }\n          };\n\n          waitForListPopulated();\n        }\n      } else if (!isIndexOutOfBounds(listRef, activeIndex)) {\n        indexRef.current = activeIndex;\n        focusItem(listRef, indexRef, forceScrollIntoViewRef.current);\n        forceScrollIntoViewRef.current = false;\n      }\n    }\n  }, [enabled, open, elements.floating, activeIndex, selectedIndexRef, nested, listRef, orientation, rtl, onNavigate, focusItem, disabledIndicesRef]); // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n\n  index(function () {\n    var _nodes$find;\n\n    if (!enabled || elements.floating || !tree || virtual || !previousMountedRef.current) {\n      return;\n    }\n\n    var nodes = tree.nodesRef.current;\n    var parent = (_nodes$find = nodes.find(function (node) {\n      return node.id === parentId;\n    })) == null || (_nodes$find = _nodes$find.context) == null ? void 0 : _nodes$find.elements.floating;\n    var activeEl = activeElement(getDocument(elements.floating));\n    var treeContainsActiveEl = nodes.some(function (node) {\n      return node.context && contains(node.context.elements.floating, activeEl);\n    });\n\n    if (parent && !treeContainsActiveEl && isPointerModalityRef.current) {\n      parent.focus({\n        preventScroll: true\n      });\n    }\n  }, [enabled, elements.floating, tree, parentId, virtual]);\n  index(function () {\n    if (!enabled) return;\n    if (!tree) return;\n    if (!virtual) return;\n    if (parentId) return;\n\n    function handleVirtualFocus(item) {\n      setVirtualId(item.id);\n\n      if (virtualItemRef) {\n        virtualItemRef.current = item;\n      }\n    }\n\n    tree.events.on('virtualfocus', handleVirtualFocus);\n    return function () {\n      tree.events.off('virtualfocus', handleVirtualFocus);\n    };\n  }, [enabled, tree, virtual, parentId, virtualItemRef]);\n  index(function () {\n    previousOnNavigateRef.current = onNavigate;\n    previousMountedRef.current = !!elements.floating;\n  });\n  index(function () {\n    if (!open) {\n      keyRef.current = null;\n    }\n  }, [open]);\n  index(function () {\n    previousOpenRef.current = open;\n  }, [open]);\n  var hasActiveIndex = activeIndex != null;\n  var item = React.useMemo(function () {\n    function syncCurrentTarget(currentTarget) {\n      if (!open) return;\n      var index = listRef.current.indexOf(currentTarget);\n\n      if (index !== -1) {\n        onNavigate(index);\n      }\n    }\n\n    var props = _objectSpread({\n      onFocus: function onFocus(_ref) {\n        var currentTarget = _ref.currentTarget;\n        syncCurrentTarget(currentTarget);\n      },\n      onClick: function onClick(_ref2) {\n        var currentTarget = _ref2.currentTarget;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      }\n    }, focusItemOnHover && {\n      onMouseMove: function onMouseMove(_ref3) {\n        var currentTarget = _ref3.currentTarget;\n        syncCurrentTarget(currentTarget);\n      },\n      onPointerLeave: function onPointerLeave(_ref4) {\n        var pointerType = _ref4.pointerType;\n\n        if (!isPointerModalityRef.current || pointerType === 'touch') {\n          return;\n        }\n\n        indexRef.current = -1;\n        focusItem(listRef, indexRef);\n        onNavigate(null);\n\n        if (!virtual) {\n          enqueueFocus(floatingRef.current, {\n            preventScroll: true\n          });\n        }\n      }\n    });\n\n    return props;\n  }, [open, floatingRef, focusItem, focusItemOnHover, listRef, onNavigate, virtual]);\n  var commonOnKeyDown = useEffectEvent(function (event) {\n    isPointerModalityRef.current = false;\n    forceSyncFocus.current = true; // If the floating element is animating out, ignore navigation. Otherwise,\n    // the `activeIndex` gets set to 0 despite not being open so the next time\n    // the user ArrowDowns, the first item won't be focused.\n\n    if (!latestOpenRef.current && event.currentTarget === floatingRef.current) {\n      return;\n    }\n\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl)) {\n      stopEvent(event);\n      onOpenChange(false, event.nativeEvent, 'list-navigation');\n\n      if (isHTMLElement(elements.domReference) && !virtual) {\n        elements.domReference.focus();\n      }\n\n      return;\n    }\n\n    var currentIndex = indexRef.current;\n    var minIndex = getMinIndex(listRef, disabledIndices);\n    var maxIndex = getMaxIndex(listRef, disabledIndices);\n\n    if (event.key === 'Home') {\n      stopEvent(event);\n      indexRef.current = minIndex;\n      onNavigate(indexRef.current);\n    }\n\n    if (event.key === 'End') {\n      stopEvent(event);\n      indexRef.current = maxIndex;\n      onNavigate(indexRef.current);\n    } // Grid navigation.\n\n\n    if (cols > 1) {\n      var sizes = itemSizes || Array.from({\n        length: listRef.current.length\n      }, function () {\n        return {\n          width: 1,\n          height: 1\n        };\n      }); // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n\n      var cellMap = buildCellMap(sizes, cols, dense);\n      var minGridIndex = cellMap.findIndex(function (index) {\n        return index != null && !isDisabled(listRef.current, index, disabledIndices);\n      }); // last enabled index\n\n      var maxGridIndex = cellMap.reduce(function (foundIndex, index, cellIndex) {\n        return index != null && !isDisabled(listRef.current, index, disabledIndices) ? cellIndex : foundIndex;\n      }, -1);\n      indexRef.current = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(function (itemIndex) {\n          return itemIndex != null ? listRef.current[itemIndex] : null;\n        })\n      }, {\n        event: event,\n        orientation: orientation,\n        loop: loop,\n        cols: cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getCellIndices([].concat(_toConsumableArray(disabledIndices || listRef.current.map(function (_, index) {\n          return isDisabled(listRef.current, index) ? index : undefined;\n        })), [undefined]), cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getCellIndexOfCorner(indexRef.current > maxIndex ? minIndex : indexRef.current, sizes, cellMap, cols, // use a corner matching the edge closest to the direction\n        // we're moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === ARROW_RIGHT ? 'tr' : 'tl'),\n        stopEvent: true\n      })]; // navigated cell will never be nullish\n\n      onNavigate(indexRef.current);\n\n      if (orientation === 'both') {\n        return;\n      }\n    }\n\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event); // Reset the index if no item is focused.\n\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate(indexRef.current);\n        return;\n      }\n\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices: disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices: disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices: disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices: disabledIndices\n          }));\n        }\n      }\n\n      if (isIndexOutOfBounds(listRef, indexRef.current)) {\n        onNavigate(null);\n      } else {\n        onNavigate(indexRef.current);\n      }\n    }\n  });\n  var ariaActiveDescendantProp = React.useMemo(function () {\n    return virtual && open && hasActiveIndex && {\n      'aria-activedescendant': virtualId || activeId\n    };\n  }, [virtual, open, hasActiveIndex, virtualId, activeId]);\n  var floating = React.useMemo(function () {\n    return _objectSpread(_objectSpread({\n      'aria-orientation': orientation === 'both' ? undefined : orientation\n    }, !isTypeableCombobox(elements.domReference) && ariaActiveDescendantProp), {}, {\n      onKeyDown: commonOnKeyDown,\n      onPointerMove: function onPointerMove() {\n        isPointerModalityRef.current = true;\n      }\n    });\n  }, [ariaActiveDescendantProp, commonOnKeyDown, elements.domReference, orientation]);\n  var reference = React.useMemo(function () {\n    function checkVirtualMouse(event) {\n      if (focusItemOnOpen === 'auto' && isVirtualClick(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n\n    function checkVirtualPointer(event) {\n      // `pointerdown` fires first, reset the state then perform the checks.\n      focusItemOnOpenRef.current = focusItemOnOpen;\n\n      if (focusItemOnOpen === 'auto' && isVirtualPointerEvent(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n\n    return _objectSpread(_objectSpread({}, ariaActiveDescendantProp), {}, {\n      onKeyDown: function onKeyDown(event) {\n        isPointerModalityRef.current = false;\n        var isArrowKey = event.key.indexOf('Arrow') === 0;\n        var isCrossOpenKey = isCrossOrientationOpenKey(event.key, orientation, rtl);\n        var isCrossCloseKey = isCrossOrientationCloseKey(event.key, orientation, rtl);\n        var isMainKey = isMainOrientationKey(event.key, orientation);\n        var isNavigationKey = (nested ? isCrossOpenKey : isMainKey) || event.key === 'Enter' || event.key.trim() === '';\n\n        if (virtual && open) {\n          var rootNode = tree == null ? void 0 : tree.nodesRef.current.find(function (node) {\n            return node.parentId == null;\n          });\n          var deepestNode = tree && rootNode ? getDeepestNode(tree.nodesRef.current, rootNode.id) : null;\n\n          if (isArrowKey && deepestNode && virtualItemRef) {\n            var eventObject = new KeyboardEvent('keydown', {\n              key: event.key,\n              bubbles: true\n            });\n\n            if (isCrossOpenKey || isCrossCloseKey) {\n              var _deepestNode$context, _deepestNode$context2;\n\n              var isCurrentTarget = ((_deepestNode$context = deepestNode.context) == null ? void 0 : _deepestNode$context.elements.domReference) === event.currentTarget;\n              var dispatchItem = isCrossCloseKey && !isCurrentTarget ? (_deepestNode$context2 = deepestNode.context) == null ? void 0 : _deepestNode$context2.elements.domReference : isCrossOpenKey ? listRef.current.find(function (item) {\n                return (item == null ? void 0 : item.id) === activeId;\n              }) : null;\n\n              if (dispatchItem) {\n                stopEvent(event);\n                dispatchItem.dispatchEvent(eventObject);\n                setVirtualId(undefined);\n              }\n            }\n\n            if (isMainKey && deepestNode.context) {\n              if (deepestNode.context.open && deepestNode.parentId && event.currentTarget !== deepestNode.context.elements.domReference) {\n                var _deepestNode$context$;\n\n                stopEvent(event);\n                (_deepestNode$context$ = deepestNode.context.elements.domReference) == null || _deepestNode$context$.dispatchEvent(eventObject);\n                return;\n              }\n            }\n          }\n\n          return commonOnKeyDown(event);\n        } // If a floating element should not open on arrow key down, avoid\n        // setting `activeIndex` while it's closed.\n\n\n        if (!open && !openOnArrowKeyDown && isArrowKey) {\n          return;\n        }\n\n        if (isNavigationKey) {\n          keyRef.current = nested && isMainKey ? null : event.key;\n        }\n\n        if (nested) {\n          if (isCrossOpenKey) {\n            stopEvent(event);\n\n            if (open) {\n              indexRef.current = getMinIndex(listRef, disabledIndicesRef.current);\n              onNavigate(indexRef.current);\n            } else {\n              onOpenChange(true, event.nativeEvent, 'list-navigation');\n            }\n          }\n\n          return;\n        }\n\n        if (isMainKey) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n\n          stopEvent(event);\n\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true, event.nativeEvent, 'list-navigation');\n          } else {\n            commonOnKeyDown(event);\n          }\n\n          if (open) {\n            onNavigate(indexRef.current);\n          }\n        }\n      },\n      onFocus: function onFocus() {\n        if (open && !virtual) {\n          onNavigate(null);\n        }\n      },\n      onPointerDown: checkVirtualPointer,\n      onMouseDown: checkVirtualMouse,\n      onClick: checkVirtualMouse\n    });\n  }, [activeId, ariaActiveDescendantProp, commonOnKeyDown, disabledIndicesRef, focusItemOnOpen, listRef, nested, onNavigate, onOpenChange, open, openOnArrowKeyDown, orientation, rtl, selectedIndex, tree, virtual, virtualItemRef]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference,\n      floating: floating,\n      item: item\n    } : {};\n  }, [enabled, reference, floating, item]);\n}\n\nvar componentRoleToAriaRoleMap = /*#__PURE__*/new Map([['select', 'listbox'], ['combobox', 'listbox'], ['label', false]]);\n/**\n * Adds base screen reader props to the reference and floating elements for a\n * given floating element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\n\nfunction useRole(context, props) {\n  var _componentRoleToAriaR;\n\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      floatingId = context.floatingId;\n  var _props8 = props,\n      _props8$enabled = _props8.enabled,\n      enabled = _props8$enabled === void 0 ? true : _props8$enabled,\n      _props8$role = _props8.role,\n      role = _props8$role === void 0 ? 'dialog' : _props8$role;\n  var ariaRole = (_componentRoleToAriaR = componentRoleToAriaRoleMap.get(role)) != null ? _componentRoleToAriaR : role;\n  var referenceId = useId();\n  var parentId = useFloatingParentNodeId();\n  var isNested = parentId != null;\n  var reference = React.useMemo(function () {\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return _defineProperty({}, \"aria-\" + (role === 'label' ? 'labelledby' : 'describedby'), open ? floatingId : undefined);\n    }\n\n    return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': ariaRole === 'alertdialog' ? 'dialog' : ariaRole,\n      'aria-controls': open ? floatingId : undefined\n    }, ariaRole === 'listbox' && {\n      role: 'combobox'\n    }), ariaRole === 'menu' && {\n      id: referenceId\n    }), ariaRole === 'menu' && isNested && {\n      role: 'menuitem'\n    }), role === 'select' && {\n      'aria-autocomplete': 'none'\n    }), role === 'combobox' && {\n      'aria-autocomplete': 'list'\n    });\n  }, [ariaRole, floatingId, isNested, open, referenceId, role]);\n  var floating = React.useMemo(function () {\n    var floatingProps = _objectSpread({\n      id: floatingId\n    }, ariaRole && {\n      role: ariaRole\n    });\n\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return floatingProps;\n    }\n\n    return _objectSpread(_objectSpread({}, floatingProps), ariaRole === 'menu' && {\n      'aria-labelledby': referenceId\n    });\n  }, [ariaRole, floatingId, referenceId, role]);\n  var item = React.useCallback(function (_ref) {\n    var active = _ref.active,\n        selected = _ref.selected;\n\n    var commonProps = _objectSpread({\n      role: 'option'\n    }, active && {\n      id: floatingId + \"-option\"\n    }); // For `menu`, we are unable to tell if the item is a `menuitemradio`\n    // or `menuitemcheckbox`. For backwards-compatibility reasons, also\n    // avoid defaulting to `menuitem` as it may overwrite custom role props.\n\n\n    switch (role) {\n      case 'select':\n        return _objectSpread(_objectSpread({}, commonProps), {}, {\n          'aria-selected': active && selected\n        });\n\n      case 'combobox':\n        {\n          return _objectSpread(_objectSpread({}, commonProps), active && {\n            'aria-selected': true\n          });\n        }\n    }\n\n    return {};\n  }, [floatingId, role]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference,\n      floating: floating,\n      item: item\n    } : {};\n  }, [enabled, reference, floating, item]);\n} // Converts a JS style key like `backgroundColor` to a CSS transition-property\n// like `background-color`.\n\n\nvar camelCaseToKebabCase = function camelCaseToKebabCase(str) {\n  return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, function ($, ofs) {\n    return (ofs ? '-' : '') + $.toLowerCase();\n  });\n};\n\nfunction execWithArgsOrReturn(valueOrFn, args) {\n  return typeof valueOrFn === 'function' ? valueOrFn(args) : valueOrFn;\n}\n\nfunction useDelayUnmount(open, durationMs) {\n  var _React$useState33 = React.useState(open),\n      _React$useState34 = _slicedToArray(_React$useState33, 2),\n      isMounted = _React$useState34[0],\n      setIsMounted = _React$useState34[1];\n\n  if (open && !isMounted) {\n    setIsMounted(true);\n  }\n\n  React.useEffect(function () {\n    if (!open && isMounted) {\n      var timeout = setTimeout(function () {\n        return setIsMounted(false);\n      }, durationMs);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }\n  }, [open, isMounted, durationMs]);\n  return isMounted;\n}\n/**\n * Provides a status string to apply CSS transitions to a floating element,\n * correctly handling placement-aware transitions.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstatus\n */\n\n\nfunction useTransitionStatus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var open = context.open,\n      floating = context.elements.floating;\n  var _props9 = props,\n      _props9$duration = _props9.duration,\n      duration = _props9$duration === void 0 ? 250 : _props9$duration;\n  var isNumberDuration = typeof duration === 'number';\n  var closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n\n  var _React$useState35 = React.useState('unmounted'),\n      _React$useState36 = _slicedToArray(_React$useState35, 2),\n      status = _React$useState36[0],\n      setStatus = _React$useState36[1];\n\n  var isMounted = useDelayUnmount(open, closeDuration);\n\n  if (!isMounted && status === 'close') {\n    setStatus('unmounted');\n  }\n\n  index(function () {\n    if (!floating) return;\n\n    if (open) {\n      setStatus('initial');\n      var frame = requestAnimationFrame(function () {\n        setStatus('open');\n      });\n      return function () {\n        cancelAnimationFrame(frame);\n      };\n    }\n\n    setStatus('close');\n  }, [open, floating]);\n  return {\n    isMounted: isMounted,\n    status: status\n  };\n}\n/**\n * Provides styles to apply CSS transitions to a floating element, correctly\n * handling placement-aware transitions. Wrapper around `useTransitionStatus`.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstyles\n */\n\n\nfunction useTransitionStyles(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props10 = props,\n      _props10$initial = _props10.initial,\n      unstable_initial = _props10$initial === void 0 ? {\n    opacity: 0\n  } : _props10$initial,\n      unstable_open = _props10.open,\n      unstable_close = _props10.close,\n      unstable_common = _props10.common,\n      _props10$duration = _props10.duration,\n      duration = _props10$duration === void 0 ? 250 : _props10$duration;\n  var placement = context.placement;\n  var side = placement.split('-')[0];\n  var fnArgs = React.useMemo(function () {\n    return {\n      side: side,\n      placement: placement\n    };\n  }, [side, placement]);\n  var isNumberDuration = typeof duration === 'number';\n  var openDuration = (isNumberDuration ? duration : duration.open) || 0;\n  var closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n\n  var _React$useState37 = React.useState(function () {\n    return _objectSpread(_objectSpread({}, execWithArgsOrReturn(unstable_common, fnArgs)), execWithArgsOrReturn(unstable_initial, fnArgs));\n  }),\n      _React$useState38 = _slicedToArray(_React$useState37, 2),\n      styles = _React$useState38[0],\n      setStyles = _React$useState38[1];\n\n  var _useTransitionStatus = useTransitionStatus(context, {\n    duration: duration\n  }),\n      isMounted = _useTransitionStatus.isMounted,\n      status = _useTransitionStatus.status;\n\n  var initialRef = useLatestRef(unstable_initial);\n  var openRef = useLatestRef(unstable_open);\n  var closeRef = useLatestRef(unstable_close);\n  var commonRef = useLatestRef(unstable_common);\n  index(function () {\n    var initialStyles = execWithArgsOrReturn(initialRef.current, fnArgs);\n    var closeStyles = execWithArgsOrReturn(closeRef.current, fnArgs);\n    var commonStyles = execWithArgsOrReturn(commonRef.current, fnArgs);\n    var openStyles = execWithArgsOrReturn(openRef.current, fnArgs) || Object.keys(initialStyles).reduce(function (acc, key) {\n      acc[key] = '';\n      return acc;\n    }, {});\n\n    if (status === 'initial') {\n      setStyles(function (styles) {\n        return _objectSpread(_objectSpread({\n          transitionProperty: styles.transitionProperty\n        }, commonStyles), initialStyles);\n      });\n    }\n\n    if (status === 'open') {\n      setStyles(_objectSpread(_objectSpread({\n        transitionProperty: Object.keys(openStyles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: openDuration + \"ms\"\n      }, commonStyles), openStyles));\n    }\n\n    if (status === 'close') {\n      var _styles = closeStyles || initialStyles;\n\n      setStyles(_objectSpread(_objectSpread({\n        transitionProperty: Object.keys(_styles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: closeDuration + \"ms\"\n      }, commonStyles), _styles));\n    }\n  }, [closeDuration, closeRef, initialRef, openRef, commonRef, openDuration, status, fnArgs]);\n  return {\n    isMounted: isMounted,\n    styles: styles\n  };\n}\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\n\n\nfunction useTypeahead(context, props) {\n  var _ref;\n\n  var open = context.open,\n      dataRef = context.dataRef;\n  var listRef = props.listRef,\n      activeIndex = props.activeIndex,\n      unstable_onMatch = props.onMatch,\n      unstable_onTypingChange = props.onTypingChange,\n      _props$enabled2 = props.enabled,\n      enabled = _props$enabled2 === void 0 ? true : _props$enabled2,\n      _props$findMatch = props.findMatch,\n      findMatch = _props$findMatch === void 0 ? null : _props$findMatch,\n      _props$resetMs = props.resetMs,\n      resetMs = _props$resetMs === void 0 ? 750 : _props$resetMs,\n      _props$ignoreKeys = props.ignoreKeys,\n      ignoreKeys = _props$ignoreKeys === void 0 ? [] : _props$ignoreKeys,\n      _props$selectedIndex2 = props.selectedIndex,\n      selectedIndex = _props$selectedIndex2 === void 0 ? null : _props$selectedIndex2;\n  var timeoutIdRef = React.useRef();\n  var stringRef = React.useRef('');\n  var prevIndexRef = React.useRef((_ref = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref : -1);\n  var matchIndexRef = React.useRef(null);\n  var onMatch = useEffectEvent(unstable_onMatch);\n  var onTypingChange = useEffectEvent(unstable_onTypingChange);\n  var findMatchRef = useLatestRef(findMatch);\n  var ignoreKeysRef = useLatestRef(ignoreKeys);\n  index(function () {\n    if (open) {\n      clearTimeout(timeoutIdRef.current);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  index(function () {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      var _ref2;\n\n      prevIndexRef.current = (_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  var setTypingChange = useEffectEvent(function (value) {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else {\n      if (dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    }\n  });\n  var onKeyDown = useEffectEvent(function (event) {\n    function getMatchingIndex(list, orderedList, string) {\n      var str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(function (text) {\n        return (text == null ? void 0 : text.toLocaleLowerCase().indexOf(string.toLocaleLowerCase())) === 0;\n      });\n      return str ? list.indexOf(str) : -1;\n    }\n\n    var listContent = listRef.current;\n\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) || // Character key.\n    event.key.length !== 1 || // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    } // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n\n\n    var allowRapidSuccessionOfFirstLetter = listContent.every(function (text) {\n      var _text$, _text$2;\n\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    }); // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n\n    stringRef.current += event.key;\n    clearTimeout(timeoutIdRef.current);\n    timeoutIdRef.current = setTimeout(function () {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    }, resetMs);\n    var prevIndex = prevIndexRef.current;\n    var index = getMatchingIndex(listContent, [].concat(_toConsumableArray(listContent.slice((prevIndex || 0) + 1)), _toConsumableArray(listContent.slice(0, (prevIndex || 0) + 1))), stringRef.current);\n\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  var reference = React.useMemo(function () {\n    return {\n      onKeyDown: onKeyDown\n    };\n  }, [onKeyDown]);\n  var floating = React.useMemo(function () {\n    return {\n      onKeyDown: onKeyDown,\n      onKeyUp: function onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(function () {\n    return enabled ? {\n      reference: reference,\n      floating: floating\n    } : {};\n  }, [enabled, reference, floating]);\n}\n\nfunction getArgsWithCustomFloatingHeight(state, height) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    rects: _objectSpread(_objectSpread({}, state.rects), {}, {\n      floating: _objectSpread(_objectSpread({}, state.rects.floating), {}, {\n        height: height\n      })\n    })\n  });\n}\n/**\n * Positions the floating element such that an inner element inside of it is\n * anchored to the reference element.\n * @see https://floating-ui.com/docs/inner\n */\n\n\nvar inner = function inner(props) {\n  return {\n    name: 'inner',\n    options: props,\n    fn: function fn(state) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _evaluate, listRef, overflowRef, onFallbackChange, _evaluate$offset, innerOffset, _evaluate$index, index, _evaluate$minItemsVis, minItemsVisible, _evaluate$referenceOv, referenceOverflowThreshold, scrollRef, detectOverflowOptions, rects, floating, item, nextArgs, el, overflow, refOverflow, diffY, nextY, maxHeight;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _evaluate = evaluate(props, state), listRef = _evaluate.listRef, overflowRef = _evaluate.overflowRef, onFallbackChange = _evaluate.onFallbackChange, _evaluate$offset = _evaluate.offset, innerOffset = _evaluate$offset === void 0 ? 0 : _evaluate$offset, _evaluate$index = _evaluate.index, index = _evaluate$index === void 0 ? 0 : _evaluate$index, _evaluate$minItemsVis = _evaluate.minItemsVisible, minItemsVisible = _evaluate$minItemsVis === void 0 ? 4 : _evaluate$minItemsVis, _evaluate$referenceOv = _evaluate.referenceOverflowThreshold, referenceOverflowThreshold = _evaluate$referenceOv === void 0 ? 0 : _evaluate$referenceOv, scrollRef = _evaluate.scrollRef, detectOverflowOptions = _objectWithoutProperties(_evaluate, _excluded6);\n                rects = state.rects, floating = state.elements.floating;\n                item = listRef.current[index];\n\n                if (process.env.NODE_ENV !== \"production\") {\n                  if (!state.placement.startsWith('bottom')) {\n                    warn('`placement` side must be \"bottom\" when using the `inner`', 'middleware.');\n                  }\n                }\n\n                if (item) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {});\n\n              case 6:\n                _context.t0 = _objectSpread;\n                _context.t1 = _objectSpread({}, state);\n                _context.next = 10;\n                return offset(-item.offsetTop - floating.clientTop - rects.reference.height / 2 - item.offsetHeight / 2 - innerOffset).fn(state);\n\n              case 10:\n                _context.t2 = _context.sent;\n                nextArgs = (0, _context.t0)(_context.t1, _context.t2);\n                el = (scrollRef == null ? void 0 : scrollRef.current) || floating;\n                _context.next = 15;\n                return detectOverflow(getArgsWithCustomFloatingHeight(nextArgs, el.scrollHeight), detectOverflowOptions);\n\n              case 15:\n                overflow = _context.sent;\n                _context.next = 18;\n                return detectOverflow(nextArgs, _objectSpread(_objectSpread({}, detectOverflowOptions), {}, {\n                  elementContext: 'reference'\n                }));\n\n              case 18:\n                refOverflow = _context.sent;\n                diffY = Math.max(0, overflow.top);\n                nextY = nextArgs.y + diffY;\n                maxHeight = Math.max(0, el.scrollHeight - diffY - Math.max(0, overflow.bottom));\n                el.style.maxHeight = maxHeight + \"px\";\n                el.scrollTop = diffY; // There is not enough space, fallback to standard anchored positioning\n\n                if (onFallbackChange) {\n                  if (el.offsetHeight < item.offsetHeight * Math.min(minItemsVisible, listRef.current.length - 1) - 1 || refOverflow.top >= -referenceOverflowThreshold || refOverflow.bottom >= -referenceOverflowThreshold) {\n                    ReactDOM.flushSync(function () {\n                      return onFallbackChange(true);\n                    });\n                  } else {\n                    ReactDOM.flushSync(function () {\n                      return onFallbackChange(false);\n                    });\n                  }\n                }\n\n                if (!overflowRef) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _context.next = 28;\n                return detectOverflow(getArgsWithCustomFloatingHeight(_objectSpread(_objectSpread({}, nextArgs), {}, {\n                  y: nextY\n                }), el.offsetHeight), detectOverflowOptions);\n\n              case 28:\n                overflowRef.current = _context.sent;\n\n              case 29:\n                return _context.abrupt(\"return\", {\n                  y: nextY\n                });\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  };\n};\n/**\n * Changes the `inner` middleware's `offset` upon a `wheel` event to\n * expand the floating element's height, revealing more list items.\n * @see https://floating-ui.com/docs/inner\n */\n\n\nfunction useInnerOffset(context, props) {\n  var open = context.open,\n      elements = context.elements;\n  var _props$enabled3 = props.enabled,\n      enabled = _props$enabled3 === void 0 ? true : _props$enabled3,\n      overflowRef = props.overflowRef,\n      scrollRef = props.scrollRef,\n      unstable_onChange = props.onChange;\n  var onChange = useEffectEvent(unstable_onChange);\n  var controlledScrollingRef = React.useRef(false);\n  var prevScrollTopRef = React.useRef(null);\n  var initialOverflowRef = React.useRef(null);\n  React.useEffect(function () {\n    if (!enabled) return;\n\n    function onWheel(e) {\n      if (e.ctrlKey || !el || overflowRef.current == null) {\n        return;\n      }\n\n      var dY = e.deltaY;\n      var isAtTop = overflowRef.current.top >= -0.5;\n      var isAtBottom = overflowRef.current.bottom >= -0.5;\n      var remainingScroll = el.scrollHeight - el.clientHeight;\n      var sign = dY < 0 ? -1 : 1;\n      var method = dY < 0 ? 'max' : 'min';\n\n      if (el.scrollHeight <= el.clientHeight) {\n        return;\n      }\n\n      if (!isAtTop && dY > 0 || !isAtBottom && dY < 0) {\n        e.preventDefault();\n        ReactDOM.flushSync(function () {\n          onChange(function (d) {\n            return d + Math[method](dY, remainingScroll * sign);\n          });\n        });\n      } else if (/firefox/i.test(getUserAgent())) {\n        // Needed to propagate scrolling during momentum scrolling phase once\n        // it gets limited by the boundary. UX improvement, not critical.\n        el.scrollTop += dY;\n      }\n    }\n\n    var el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n\n    if (open && el) {\n      el.addEventListener('wheel', onWheel); // Wait for the position to be ready.\n\n      requestAnimationFrame(function () {\n        prevScrollTopRef.current = el.scrollTop;\n\n        if (overflowRef.current != null) {\n          initialOverflowRef.current = _objectSpread({}, overflowRef.current);\n        }\n      });\n      return function () {\n        prevScrollTopRef.current = null;\n        initialOverflowRef.current = null;\n        el.removeEventListener('wheel', onWheel);\n      };\n    }\n  }, [enabled, open, elements.floating, overflowRef, scrollRef, onChange]);\n  var floating = React.useMemo(function () {\n    return {\n      onKeyDown: function onKeyDown() {\n        controlledScrollingRef.current = true;\n      },\n      onWheel: function onWheel() {\n        controlledScrollingRef.current = false;\n      },\n      onPointerMove: function onPointerMove() {\n        controlledScrollingRef.current = false;\n      },\n      onScroll: function onScroll() {\n        var el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n\n        if (!overflowRef.current || !el || !controlledScrollingRef.current) {\n          return;\n        }\n\n        if (prevScrollTopRef.current !== null) {\n          var scrollDiff = el.scrollTop - prevScrollTopRef.current;\n\n          if (overflowRef.current.bottom < -0.5 && scrollDiff < -1 || overflowRef.current.top < -0.5 && scrollDiff > 1) {\n            ReactDOM.flushSync(function () {\n              return onChange(function (d) {\n                return d + scrollDiff;\n              });\n            });\n          }\n        } // [Firefox] Wait for the height change to have been applied.\n\n\n        requestAnimationFrame(function () {\n          prevScrollTopRef.current = el.scrollTop;\n        });\n      }\n    };\n  }, [elements.floating, onChange, overflowRef, scrollRef]);\n  return React.useMemo(function () {\n    return enabled ? {\n      floating: floating\n    } : {};\n  }, [enabled, floating]);\n}\n\nfunction isPointInPolygon(point, polygon) {\n  var _point = _slicedToArray(point, 2),\n      x = _point[0],\n      y = _point[1];\n\n  var isInside = false;\n  var length = polygon.length;\n\n  for (var i = 0, j = length - 1; i < length; j = i++) {\n    var _ref10 = polygon[i] || [0, 0],\n        _ref11 = _slicedToArray(_ref10, 2),\n        xi = _ref11[0],\n        yi = _ref11[1];\n\n    var _ref12 = polygon[j] || [0, 0],\n        _ref13 = _slicedToArray(_ref12, 2),\n        xj = _ref13[0],\n        yj = _ref13[1];\n\n    var intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n\n  return isInside;\n}\n\nfunction isInside(point, rect) {\n  return point[0] >= rect.x && point[0] <= rect.x + rect.width && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n}\n/**\n * Generates a safe polygon area that the user can traverse without closing the\n * floating element once leaving the reference element.\n * @see https://floating-ui.com/docs/useHover#safepolygon\n */\n\n\nfunction safePolygon(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options4 = options,\n      _options4$buffer = _options4.buffer,\n      buffer = _options4$buffer === void 0 ? 0.5 : _options4$buffer,\n      _options4$blockPointe = _options4.blockPointerEvents,\n      blockPointerEvents = _options4$blockPointe === void 0 ? false : _options4$blockPointe,\n      _options4$requireInte = _options4.requireIntent,\n      requireIntent = _options4$requireInte === void 0 ? true : _options4$requireInte;\n  var timeoutId;\n  var hasLanded = false;\n  var lastX = null;\n  var lastY = null;\n  var lastCursorTime = performance.now();\n\n  function getCursorSpeed(x, y) {\n    var currentTime = performance.now();\n    var elapsedTime = currentTime - lastCursorTime;\n\n    if (lastX === null || lastY === null || elapsedTime === 0) {\n      lastX = x;\n      lastY = y;\n      lastCursorTime = currentTime;\n      return null;\n    }\n\n    var deltaX = x - lastX;\n    var deltaY = y - lastY;\n    var distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    var speed = distance / elapsedTime; // px / ms\n\n    lastX = x;\n    lastY = y;\n    lastCursorTime = currentTime;\n    return speed;\n  }\n\n  var fn = function fn(_ref) {\n    var x = _ref.x,\n        y = _ref.y,\n        placement = _ref.placement,\n        elements = _ref.elements,\n        onClose = _ref.onClose,\n        nodeId = _ref.nodeId,\n        tree = _ref.tree;\n    return function onMouseMove(event) {\n      function close() {\n        clearTimeout(timeoutId);\n        onClose();\n      }\n\n      clearTimeout(timeoutId);\n\n      if (!elements.domReference || !elements.floating || placement == null || x == null || y == null) {\n        return;\n      }\n\n      var clientX = event.clientX,\n          clientY = event.clientY;\n      var clientPoint = [clientX, clientY];\n      var target = getTarget(event);\n      var isLeave = event.type === 'mouseleave';\n      var isOverFloatingEl = contains(elements.floating, target);\n      var isOverReferenceEl = contains(elements.domReference, target);\n      var refRect = elements.domReference.getBoundingClientRect();\n      var rect = elements.floating.getBoundingClientRect();\n      var side = placement.split('-')[0];\n      var cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      var cursorLeaveFromBottom = y > rect.bottom - rect.height / 2;\n      var isOverReferenceRect = isInside(clientPoint, refRect);\n      var isFloatingWider = rect.width > refRect.width;\n      var isFloatingTaller = rect.height > refRect.height;\n      var left = (isFloatingWider ? refRect : rect).left;\n      var right = (isFloatingWider ? refRect : rect).right;\n      var top = (isFloatingTaller ? refRect : rect).top;\n      var bottom = (isFloatingTaller ? refRect : rect).bottom;\n\n      if (isOverFloatingEl) {\n        hasLanded = true;\n\n        if (!isLeave) {\n          return;\n        }\n      }\n\n      if (isOverReferenceEl) {\n        hasLanded = false;\n      }\n\n      if (isOverReferenceEl && !isLeave) {\n        hasLanded = true;\n        return;\n      } // Prevent overlapping floating element from being stuck in an open-close\n      // loop: https://github.com/floating-ui/floating-ui/issues/1910\n\n\n      if (isLeave && isElement(event.relatedTarget) && contains(elements.floating, event.relatedTarget)) {\n        return;\n      } // If any nested child is open, abort.\n\n\n      if (tree && getChildren(tree.nodesRef.current, nodeId).some(function (_ref2) {\n        var context = _ref2.context;\n        return context == null ? void 0 : context.open;\n      })) {\n        return;\n      } // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n\n\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      } // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n\n\n      var rectPoly = [];\n\n      switch (side) {\n        case 'top':\n          rectPoly = [[left, refRect.top + 1], [left, rect.bottom - 1], [right, rect.bottom - 1], [right, refRect.top + 1]];\n          break;\n\n        case 'bottom':\n          rectPoly = [[left, rect.top + 1], [left, refRect.bottom - 1], [right, refRect.bottom - 1], [right, rect.top + 1]];\n          break;\n\n        case 'left':\n          rectPoly = [[rect.right - 1, bottom], [rect.right - 1, top], [refRect.left + 1, top], [refRect.left + 1, bottom]];\n          break;\n\n        case 'right':\n          rectPoly = [[refRect.right - 1, bottom], [refRect.right - 1, top], [rect.left + 1, top], [rect.left + 1, bottom]];\n          break;\n      }\n\n      function getPolygon(_ref3) {\n        var _ref14 = _slicedToArray(_ref3, 2),\n            x = _ref14[0],\n            y = _ref14[1];\n\n        switch (side) {\n          case 'top':\n            {\n              var cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              var cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              var commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo].concat(commonPoints);\n            }\n\n          case 'bottom':\n            {\n              var _cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              var _cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              var _commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [_cursorPointOne, _cursorPointTwo].concat(_commonPoints);\n            }\n\n          case 'left':\n            {\n              var _cursorPointOne2 = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              var _cursorPointTwo2 = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              var _commonPoints2 = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [].concat(_commonPoints2, [_cursorPointOne2, _cursorPointTwo2]);\n            }\n\n          case 'right':\n            {\n              var _cursorPointOne3 = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              var _cursorPointTwo3 = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              var _commonPoints3 = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [_cursorPointOne3, _cursorPointTwo3].concat(_commonPoints3);\n            }\n        }\n      }\n\n      if (isPointInPolygon([clientX, clientY], rectPoly)) {\n        return;\n      }\n\n      if (hasLanded && !isOverReferenceRect) {\n        return close();\n      }\n\n      if (!isLeave && requireIntent) {\n        var cursorSpeed = getCursorSpeed(event.clientX, event.clientY);\n        var cursorSpeedThreshold = 0.1;\n\n        if (cursorSpeed !== null && cursorSpeed < cursorSpeedThreshold) {\n          return close();\n        }\n      }\n\n      if (!isPointInPolygon([clientX, clientY], getPolygon([x, y]))) {\n        close();\n      } else if (!hasLanded && requireIntent) {\n        timeoutId = window.setTimeout(close, 40);\n      }\n    };\n  };\n\n  fn.__options = {\n    blockPointerEvents: blockPointerEvents\n  };\n  return fn;\n}\n\nexport { Composite, CompositeItem, FloatingArrow, FloatingDelayGroup, FloatingFocusManager, FloatingList, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, inner, safePolygon, useClick, useClientPoint, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingRootContext, useFloatingTree, useFocus, useHover, useId, useInnerOffset, useInteractions, useListItem, useListNavigation, useMergeRefs, useRole, useTransitionStatus, useTransitionStyles, useTypeahead };","map":{"version":3,"names":["React","useLayoutEffect","useEffect","useRef","stopEvent","getDocument","isMouseLikePointerType","contains","activeElement","isSafari","isTypeableCombobox","isVirtualClick","isVirtualPointerEvent","getTarget","getPlatform","isTypeableElement","isReactEvent","isRootElement","isEventTargetWithin","isMac","getUserAgent","floor","evaluate","getComputedStyle","isElement","getNodeName","isHTMLElement","getWindow","isLastTraversableNode","getParentNode","tabbable","isTabbable","ReactDOM","getOverflowAncestors","useFloating","useFloating$1","offset","detectOverflow","arrow","autoPlacement","autoUpdate","computePosition","flip","hide","inline","limitShift","platform","shift","size","useMergeRefs","refs","useMemo","every","ref","value","forEach","current","SafeReact","useInsertionEffect","useSafeInsertionEffect","fn","useEffectEvent","callback","process","env","NODE_ENV","Error","useCallback","_len","arguments","length","args","Array","_key","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","isDifferentRow","index","cols","prevRow","Math","isIndexOutOfBounds","listRef","getMinIndex","disabledIndices","findNonDisabledIndex","getMaxIndex","decrement","startingIndex","_temp","amount","list","isDisabled","getGridNavigatedIndex","elementsRef","_ref","event","orientation","loop","minIndex","maxIndex","prevIndex","stop","nextIndex","key","col","maxCol","lastRow","buildCellMap","sizes","dense","cellMap","startIndex","_ref2","width","height","itemPlaced","targetCells","i","j","push","cell","getCellIndexOfCorner","corner","firstCellIndex","indexOf","sizeItem","lastIndexOf","getCellIndices","indices","flatMap","cellIndex","includes","element","hasAttribute","getAttribute","rafId","enqueueFocus","el","options","preventScroll","cancelPrevious","sync","cancelAnimationFrame","exec","focus","requestAnimationFrame","document","sortByDocumentPosition","a","b","position","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","areMapsEqual","map1","map2","entries","get","FloatingListContext","createContext","register","unregister","map","Map","FloatingList","props","children","labelsRef","useState","setMap","node","prevMap","set","delete","newMap","nodes","from","keys","sort","createElement","Provider","useListItem","label","useContext","index$1","setIndex","componentRef","_node$textContent","isLabelDefined","undefined","textContent","renderJsx","render","computedProps","cloneElement","CompositeContext","activeIndex","onNavigate","horizontalKeys","verticalKeys","allKeys","Composite","forwardRef","forwardedRef","externalActiveIndex","externalSetActiveIndex","itemSizes","domProps","internalActiveIndex","internalSetActiveIndex","renderElementProps","contextValue","isGrid","handleKeyDown","minGridIndex","findIndex","maxGridIndex","reduce","foundIndex","itemIndex","_","toEndKeys","horizontal","vertical","both","toStartKeys","preventedKeys","stopPropagation","preventDefault","queueMicrotask","onKeyDown","e","CompositeItem","mergedRef","isActive","tabIndex","onFocus","_extends","Object","assign","bind","target","source","prototype","hasOwnProperty","call","apply","serverHandoffComplete","count","genId","random","toString","slice","useFloatingId","id","setId","useReactId","useId","devMessageSet","Set","warn","_devMessageSet","messages","message","join","has","_devMessageSet2","add","console","error","_devMessageSet3","_len2","_key2","_devMessageSet4","FloatingArrow","context","placement","floating","elements","middlewareData","tipRadius","strokeWidth","staticOffset","stroke","d","style","transform","restStyle","rest","clipPathId","isRTL","setIsRTL","direction","computedStrokeWidth","halfStrokeWidth","svgX","svgY","split","side","alignment","isCustomShape","isVerticalSide","yOffsetProp","xOffsetProp","arrowX","x","arrowY","y","dValue","rotation","top","left","bottom","right","viewBox","pointerEvents","clipPath","fill","createPubSub","emit","data","_map$get","handler","on","listener","off","_map$get2","filter","l","FloatingNodeContext","FloatingTreeContext","useFloatingParentNodeId","_React$useContext","useFloatingTree","useFloatingNodeId","customParentId","tree","reactParentId","parentId","addNode","removeNode","FloatingNode","FloatingTree","nodesRef","n","events","createAttribute","name","useLatestRef","safePolygonIdentifier","getDelay","prop","pointerType","useHover","open","onOpenChange","dataRef","enabled","delay","handleClose","mouseOnly","restMs","move","handleCloseRef","delayRef","openRef","pointerTypeRef","timeoutRef","handlerRef","restTimeoutRef","blockMouseMoveRef","performedPointerEventsMutationRef","unbindMouseMoveRef","isHoverOpen","_dataRef$current$open","type","openEvent","clearTimeout","onLeave","html","documentElement","addEventListener","removeEventListener","closeWithDelay","runElseBranch","reason","closeDelay","window","setTimeout","cleanupMouseMoveHandler","clearPointerEvents","body","removeAttribute","isClickLikeOpenEvent","onMouseEnter","openDelay","onMouseLeave","doc","floatingContext","clientX","clientY","onClose","shouldClose","relatedTarget","onScrollMouseLeave","domReference","_elements$floating","once","_elements$floating2","_handleCloseRef$curre","__options","blockPointerEvents","setAttribute","floatingEl","_tree$nodesRef$curren","parentFloating","find","reference","setPointerRef","onPointerDown","onPointerEnter","onMouseMove","nativeEvent","handleMouseMove","NOOP","FloatingDelayGroupContext","initialDelay","timeoutMs","currentId","setCurrentId","setState","isInstantPhase","useDelayGroupContext","FloatingDelayGroup","useReducer","prev","next","state","initialCurrentIdRef","useDelayGroup","floatingId","optionId","groupContext","close","unset","timeout","getAncestors","_nodes$find","allAncestors","currentParentId","currentNode","concat","getChildren","allChildren","_node$context","currentChildren","_currentChildren","some","_node$context2","getDeepestNode","deepestNodeId","maxDepth","findDeepest","nodeId","depth","child","counterMap","WeakMap","uncontrolledElementsSet","WeakSet","markerMap","lockCount","supportsInert","HTMLElement","unwrapHost","host","parentNode","correctElements","parent","targets","correctedTarget","applyAttributeToOthers","uncorrectedAvoidElements","ariaHidden","inert","markerName","controlAttribute","avoidElements","elementsToKeep","elementsToStop","hiddenElements","markerCounter","keep","deep","clear","attr","alreadyHidden","counterValue","markerValue","markOthers","querySelectorAll","getTabbableOptions","getShadowRoot","displayCheck","ResizeObserver","getTabbableIn","container","allTabbable","reverse","nextTabbableElements","getNextTabbable","getPreviousTabbable","isOutsideEvent","containerElement","currentTarget","disableFocusInside","tabbableElements","dataset","tabindex","enableFocusInside","getClosestTabbableElement","elementIndex","traverseTabbableElements","currentElement","isConnected","HIDDEN_STYLES","border","clip","margin","overflow","padding","whiteSpace","timeoutId","setActiveElementOnTab","FocusGuard","role","setRole","restProps","PortalContext","useFloatingPortalNode","root","uniqueId","portalContext","usePortalContext","portalNode","setPortalNode","portalNodeRef","remove","existingIdRoot","getElementById","subRoot","appendChild","idWrapper","FloatingPortal","preserveTabOrder","focusManagerState","setFocusManagerState","beforeOutsideRef","afterOutsideRef","beforeInsideRef","afterInsideRef","shouldRenderGuards","modal","focusing","manageFocus","_beforeInsideRef$curr","prevTabbable","createPortal","_afterInsideRef$curre","nextTabbable","closeOnFocusOut","LIST_LIMIT","previouslyFocusedElements","addPreviouslyFocusedElement","tabbableEl","tabbableChild","getPreviouslyFocusedElement","VisuallyHiddenDismiss","FloatingFocusManager","disabled","order","guards","_guards","initialFocus","returnFocus","restoreFocus","visuallyHiddenDismiss","ignoreInitialFocus","isUntrappedTypeableCombobox","orderRef","initialFocusRef","returnFocusRef","startDismissButtonRef","endDismissButtonRef","preventReturnFocusRef","isPointerDownRef","tabbableIndexRef","isInsidePortal","firstElementChild","floatingFocusNode","getTabbableContent","getTabbableElements","content","Boolean","flat","els","shiftKey","handleFocusIn","tabbableContent","tabbableIndex","handlePointerDown","handleFocusOutside","movedToUnrelatedNode","_node$context3","_node$context4","prevTabbableIndex","nodeToFocus","_portalContext$portal","portalNodes","insideElements","cleanup","previouslyFocusedElement","focusableElements","initialFocusValue","elToFocus","focusAlreadyInsideFloatingEl","preventReturnFocusScroll","contextData","nested","activeEl","isFocusInsideFloatingTree","_node$context5","shouldFocusReference","returnContextElement","returnElement","MutationObserver","handleMutation","observer","observe","childList","subtree","attributes","disconnect","renderDismissButton","location","onClick","Fragment","_portalContext$before","_portalContext$afterO","activeLocks","FloatingOverlay","lockScroll","lockId","isIOS","test","bodyStyle","scrollbarX","round","getBoundingClientRect","scrollLeft","paddingProp","scrollbarWidth","innerWidth","clientWidth","scrollX","parseFloat","scrollY","_window$visualViewpor","_window$visualViewpor2","offsetLeft","visualViewport","offsetTop","scrollTo","isButtonTarget","tagName","isSpaceIgnored","useClick","eventOption","toggle","ignoreMouse","keyboardHandlers","didKeyDownRef","onMouseDown","button","defaultPrevented","onKeyUp","createVirtualElement","domElement","offsetX","offsetY","isAutoUpdateEvent","contextElement","_data$dataRef$current","domRect","isXAxis","axis","isYAxis","canTrackCursorOnAutoUpdate","isMouseBasedEvent","useClientPoint","initialRef","cleanupListenerRef","setPointerType","reactive","setReactive","setReference","setPositionReference","handleReferenceEnterOrMove","openCheck","addListener","win","setPointerTypeRef","bubbleHandlerKeys","pointerdown","mousedown","click","captureHandlerKeys","normalizeProp","normalizable","_normalizable$escapeK","_normalizable$outside","escapeKey","outsidePress","useDismiss","unstable_outsidePress","outsidePressEvent","referencePress","referencePressEvent","ancestorScroll","bubbles","capture","outsidePressFn","insideReactTreeRef","endedOrStartedInsideRef","escapeKeyBubbles","outsidePressBubbles","escapeKeyCapture","outsidePressCapture","closeOnEscapeKeyDown","_dataRef$current$floa","shouldDismiss","_child$context","__escapeKeyBubbles","closeOnEscapeKeyDownCapture","_getTarget2","_getTarget","closeOnPressOutside","_dataRef$current$floa2","insideReactTree","endedOrStartedInside","inertSelector","markers","targetRootAncestor","nextParent","marker","canScrollX","scrollWidth","canScrollY","clientHeight","scrollHeight","xCond","offsetWidth","targetIsInsideChildren","_child$context2","__outsidePressBubbles","closeOnPressOutsideCapture","_getTarget4","_getTarget3","onScroll","ancestors","ancestor","_doc$defaultView","defaultView","passive","onMouseUp","useFloatingRootContext","onOpenChangeProp","elementsProp","optionDomReference","positionReference","internalRootContext","rootContext","computedElements","_domReference","setDomReference","_setPositionReference","domReferenceRef","computedPositionReference","useFocus","visibleOnly","blockFocusRef","keyboardModalityRef","onBlur","matches","movedToFocusGuard","ownerDocument","ACTIVE_KEY","SELECTED_KEY","mergeProps","userProps","propsList","elementKey","isItem","domUserProps","__","validProps","propsOrGetProps","acc","val","useInteractions","referenceDeps","floatingDeps","itemDeps","item","getReferenceProps","getFloatingProps","getItemProps","isPreventScrollSupported","doSwitch","isMainOrientationKey","isMainOrientationToEndKey","rtl","isCrossOrientationOpenKey","isCrossOrientationCloseKey","useListNavigation","unstable_onNavigate","selectedIndex","allowEscape","virtual","focusItemOnOpen","focusItemOnHover","openOnArrowKeyDown","scrollItemIntoView","virtualItemRef","focusItemOnOpenRef","indexRef","keyRef","isPointerModalityRef","previousOnNavigateRef","previousMountedRef","previousOpenRef","forceSyncFocus","forceScrollIntoViewRef","disabledIndicesRef","latestOpenRef","scrollItemIntoViewRef","floatingRef","selectedIndexRef","activeId","setActiveId","virtualId","setVirtualId","focusItem","forceScrollIntoView","runFocus","initialItem","waitedItem","scrollIntoViewOptions","shouldScrollIntoView","scrollIntoView","block","runs","waitForListPopulated","scheduler","treeContainsActiveEl","handleVirtualFocus","hasActiveIndex","syncCurrentTarget","_ref3","onPointerLeave","_ref4","commonOnKeyDown","currentIndex","min","max","ariaActiveDescendantProp","onPointerMove","checkVirtualMouse","checkVirtualPointer","isArrowKey","isCrossOpenKey","isCrossCloseKey","isMainKey","isNavigationKey","trim","rootNode","deepestNode","eventObject","KeyboardEvent","_deepestNode$context","_deepestNode$context2","isCurrentTarget","dispatchItem","dispatchEvent","_deepestNode$context$","componentRoleToAriaRoleMap","useRole","_componentRoleToAriaR","ariaRole","referenceId","isNested","floatingProps","active","selected","commonProps","camelCaseToKebabCase","str","replace","$","ofs","toLowerCase","execWithArgsOrReturn","valueOrFn","useDelayUnmount","durationMs","isMounted","setIsMounted","useTransitionStatus","duration","isNumberDuration","closeDuration","status","setStatus","frame","useTransitionStyles","initial","unstable_initial","opacity","unstable_open","unstable_close","unstable_common","common","fnArgs","openDuration","styles","setStyles","closeRef","commonRef","initialStyles","closeStyles","commonStyles","openStyles","transitionProperty","transitionDuration","useTypeahead","unstable_onMatch","onMatch","unstable_onTypingChange","onTypingChange","findMatch","resetMs","ignoreKeys","timeoutIdRef","stringRef","prevIndexRef","matchIndexRef","findMatchRef","ignoreKeysRef","setTypingChange","typing","getMatchingIndex","orderedList","string","text","toLocaleLowerCase","listContent","ctrlKey","metaKey","altKey","allowRapidSuccessionOfFirstLetter","_text$","_text$2","getArgsWithCustomFloatingHeight","rects","inner","overflowRef","onFallbackChange","innerOffset","minItemsVisible","referenceOverflowThreshold","scrollRef","detectOverflowOptions","startsWith","clientTop","offsetHeight","nextArgs","elementContext","refOverflow","diffY","nextY","maxHeight","scrollTop","flushSync","useInnerOffset","unstable_onChange","onChange","controlledScrollingRef","prevScrollTopRef","initialOverflowRef","onWheel","dY","deltaY","isAtTop","isAtBottom","remainingScroll","sign","method","scrollDiff","isPointInPolygon","point","polygon","isInside","xi","yi","xj","yj","intersect","rect","safePolygon","buffer","requireIntent","hasLanded","lastX","lastY","lastCursorTime","performance","now","getCursorSpeed","currentTime","elapsedTime","deltaX","distance","sqrt","speed","clientPoint","isLeave","isOverFloatingEl","isOverReferenceEl","refRect","cursorLeaveFromRight","cursorLeaveFromBottom","isOverReferenceRect","isFloatingWider","isFloatingTaller","rectPoly","getPolygon","cursorPointOne","cursorPointTwo","commonPoints","cursorSpeed","cursorSpeedThreshold"],"sources":["C:/Users/kb/Downloads/billBoard/billboard/node_modules/@floating-ui/react/dist/floating-ui.react.esm.js"],"sourcesContent":["import * as React from 'react';\nimport { useLayoutEffect, useEffect, useRef } from 'react';\nimport { stopEvent, getDocument, isMouseLikePointerType, contains, activeElement, isSafari, isTypeableCombobox, isVirtualClick, isVirtualPointerEvent, getTarget, getPlatform, isTypeableElement, isReactEvent, isRootElement, isEventTargetWithin, isMac, getUserAgent } from '@floating-ui/react/utils';\nimport { floor, evaluate } from '@floating-ui/utils';\nimport { getComputedStyle, isElement, getNodeName, isHTMLElement, getWindow, isLastTraversableNode, getParentNode } from '@floating-ui/utils/dom';\nimport { tabbable, isTabbable } from 'tabbable';\nimport * as ReactDOM from 'react-dom';\nimport { getOverflowAncestors, useFloating as useFloating$1, offset, detectOverflow } from '@floating-ui/react-dom';\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, getOverflowAncestors, hide, inline, limitShift, offset, platform, shift, size } from '@floating-ui/react-dom';\n\n/**\n * Merges an array of refs into a single memoized callback ref or `null`.\n * @see https://floating-ui.com/docs/react-utils#usemergerefs\n */\nfunction useMergeRefs(refs) {\n  return React.useMemo(() => {\n    if (refs.every(ref => ref == null)) {\n      return null;\n    }\n    return value => {\n      refs.forEach(ref => {\n        if (typeof ref === 'function') {\n          ref(value);\n        } else if (ref != null) {\n          ref.current = value;\n        }\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, refs);\n}\n\n// https://github.com/mui/material-ui/issues/41190#issuecomment-2040873379\nconst SafeReact = {\n  ...React\n};\n\nconst useInsertionEffect = SafeReact.useInsertionEffect;\nconst useSafeInsertionEffect = useInsertionEffect || (fn => fn());\nfunction useEffectEvent(callback) {\n  const ref = React.useRef(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      throw new Error('Cannot call an event handler while rendering.');\n    }\n  });\n  useSafeInsertionEffect(() => {\n    ref.current = callback;\n  });\n  return React.useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return ref.current == null ? void 0 : ref.current(...args);\n  }, []);\n}\n\nconst ARROW_UP = 'ArrowUp';\nconst ARROW_DOWN = 'ArrowDown';\nconst ARROW_LEFT = 'ArrowLeft';\nconst ARROW_RIGHT = 'ArrowRight';\nfunction isDifferentRow(index, cols, prevRow) {\n  return Math.floor(index / cols) !== prevRow;\n}\nfunction isIndexOutOfBounds(listRef, index) {\n  return index < 0 || index >= listRef.current.length;\n}\nfunction getMinIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    disabledIndices\n  });\n}\nfunction getMaxIndex(listRef, disabledIndices) {\n  return findNonDisabledIndex(listRef, {\n    decrement: true,\n    startingIndex: listRef.current.length,\n    disabledIndices\n  });\n}\nfunction findNonDisabledIndex(listRef, _temp) {\n  let {\n    startingIndex = -1,\n    decrement = false,\n    disabledIndices,\n    amount = 1\n  } = _temp === void 0 ? {} : _temp;\n  const list = listRef.current;\n  let index = startingIndex;\n  do {\n    index += decrement ? -amount : amount;\n  } while (index >= 0 && index <= list.length - 1 && isDisabled(list, index, disabledIndices));\n  return index;\n}\nfunction getGridNavigatedIndex(elementsRef, _ref) {\n  let {\n    event,\n    orientation,\n    loop,\n    cols,\n    disabledIndices,\n    minIndex,\n    maxIndex,\n    prevIndex,\n    stopEvent: stop = false\n  } = _ref;\n  let nextIndex = prevIndex;\n  if (event.key === ARROW_UP) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = maxIndex;\n    } else {\n      nextIndex = findNonDisabledIndex(elementsRef, {\n        startingIndex: nextIndex,\n        amount: cols,\n        decrement: true,\n        disabledIndices\n      });\n      if (loop && (prevIndex - cols < minIndex || nextIndex < 0)) {\n        const col = prevIndex % cols;\n        const maxCol = maxIndex % cols;\n        const offset = maxIndex - (maxCol - col);\n        if (maxCol === col) {\n          nextIndex = maxIndex;\n        } else {\n          nextIndex = maxCol > col ? offset : offset - cols;\n        }\n      }\n    }\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n  if (event.key === ARROW_DOWN) {\n    stop && stopEvent(event);\n    if (prevIndex === -1) {\n      nextIndex = minIndex;\n    } else {\n      nextIndex = findNonDisabledIndex(elementsRef, {\n        startingIndex: prevIndex,\n        amount: cols,\n        disabledIndices\n      });\n      if (loop && prevIndex + cols > maxIndex) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex % cols - cols,\n          amount: cols,\n          disabledIndices\n        });\n      }\n    }\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      nextIndex = prevIndex;\n    }\n  }\n\n  // Remains on the same row/column.\n  if (orientation === 'both') {\n    const prevRow = floor(prevIndex / cols);\n    if (event.key === ARROW_RIGHT) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== cols - 1) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex,\n          disabledIndices\n        });\n        if (loop && isDifferentRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledIndex(elementsRef, {\n            startingIndex: prevIndex - prevIndex % cols - 1,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      }\n      if (isDifferentRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    if (event.key === ARROW_LEFT) {\n      stop && stopEvent(event);\n      if (prevIndex % cols !== 0) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex,\n          decrement: true,\n          disabledIndices\n        });\n        if (loop && isDifferentRow(nextIndex, cols, prevRow)) {\n          nextIndex = findNonDisabledIndex(elementsRef, {\n            startingIndex: prevIndex + (cols - prevIndex % cols),\n            decrement: true,\n            disabledIndices\n          });\n        }\n      } else if (loop) {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex + (cols - prevIndex % cols),\n          decrement: true,\n          disabledIndices\n        });\n      }\n      if (isDifferentRow(nextIndex, cols, prevRow)) {\n        nextIndex = prevIndex;\n      }\n    }\n    const lastRow = floor(maxIndex / cols) === prevRow;\n    if (isIndexOutOfBounds(elementsRef, nextIndex)) {\n      if (loop && lastRow) {\n        nextIndex = event.key === ARROW_LEFT ? maxIndex : findNonDisabledIndex(elementsRef, {\n          startingIndex: prevIndex - prevIndex % cols - 1,\n          disabledIndices\n        });\n      } else {\n        nextIndex = prevIndex;\n      }\n    }\n  }\n  return nextIndex;\n}\n\n/** For each cell index, gets the item index that occupies that cell */\nfunction buildCellMap(sizes, cols, dense) {\n  const cellMap = [];\n  let startIndex = 0;\n  sizes.forEach((_ref2, index) => {\n    let {\n      width,\n      height\n    } = _ref2;\n    if (width > cols) {\n      if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(\"[Floating UI]: Invalid grid - item width at index \" + index + \" is greater than grid columns\");\n      }\n    }\n    let itemPlaced = false;\n    if (dense) {\n      startIndex = 0;\n    }\n    while (!itemPlaced) {\n      const targetCells = [];\n      for (let i = 0; i < width; i++) {\n        for (let j = 0; j < height; j++) {\n          targetCells.push(startIndex + i + j * cols);\n        }\n      }\n      if (startIndex % cols + width <= cols && targetCells.every(cell => cellMap[cell] == null)) {\n        targetCells.forEach(cell => {\n          cellMap[cell] = index;\n        });\n        itemPlaced = true;\n      } else {\n        startIndex++;\n      }\n    }\n  });\n\n  // convert into a non-sparse array\n  return [...cellMap];\n}\n\n/** Gets cell index of an item's corner or -1 when index is -1. */\nfunction getCellIndexOfCorner(index, sizes, cellMap, cols, corner) {\n  if (index === -1) return -1;\n  const firstCellIndex = cellMap.indexOf(index);\n  const sizeItem = sizes[index];\n  switch (corner) {\n    case 'tl':\n      return firstCellIndex;\n    case 'tr':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + sizeItem.width - 1;\n    case 'bl':\n      if (!sizeItem) {\n        return firstCellIndex;\n      }\n      return firstCellIndex + (sizeItem.height - 1) * cols;\n    case 'br':\n      return cellMap.lastIndexOf(index);\n  }\n}\n\n/** Gets all cell indices that correspond to the specified indices */\nfunction getCellIndices(indices, cellMap) {\n  return cellMap.flatMap((index, cellIndex) => indices.includes(index) ? [cellIndex] : []);\n}\nfunction isDisabled(list, index, disabledIndices) {\n  if (disabledIndices) {\n    return disabledIndices.includes(index);\n  }\n  const element = list[index];\n  return element == null || element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true';\n}\n\nlet rafId = 0;\nfunction enqueueFocus(el, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    preventScroll = false,\n    cancelPrevious = true,\n    sync = false\n  } = options;\n  cancelPrevious && cancelAnimationFrame(rafId);\n  const exec = () => el == null ? void 0 : el.focus({\n    preventScroll\n  });\n  if (sync) {\n    exec();\n  } else {\n    rafId = requestAnimationFrame(exec);\n  }\n}\n\nvar index = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction sortByDocumentPosition(a, b) {\n  const position = a.compareDocumentPosition(b);\n  if (position & Node.DOCUMENT_POSITION_FOLLOWING || position & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    return -1;\n  }\n  if (position & Node.DOCUMENT_POSITION_PRECEDING || position & Node.DOCUMENT_POSITION_CONTAINS) {\n    return 1;\n  }\n  return 0;\n}\nfunction areMapsEqual(map1, map2) {\n  if (map1.size !== map2.size) {\n    return false;\n  }\n  for (const [key, value] of map1.entries()) {\n    if (value !== map2.get(key)) {\n      return false;\n    }\n  }\n  return true;\n}\nconst FloatingListContext = /*#__PURE__*/React.createContext({\n  register: () => {},\n  unregister: () => {},\n  map: /*#__PURE__*/new Map(),\n  elementsRef: {\n    current: []\n  }\n});\n/**\n * Provides context for a list of items within the floating element.\n * @see https://floating-ui.com/docs/FloatingList\n */\nfunction FloatingList(props) {\n  const {\n    children,\n    elementsRef,\n    labelsRef\n  } = props;\n  const [map, setMap] = React.useState(() => new Map());\n  const register = React.useCallback(node => {\n    setMap(prevMap => new Map(prevMap).set(node, null));\n  }, []);\n  const unregister = React.useCallback(node => {\n    setMap(prevMap => {\n      const map = new Map(prevMap);\n      map.delete(node);\n      return map;\n    });\n  }, []);\n  index(() => {\n    const newMap = new Map(map);\n    const nodes = Array.from(newMap.keys()).sort(sortByDocumentPosition);\n    nodes.forEach((node, index) => {\n      newMap.set(node, index);\n    });\n    if (!areMapsEqual(map, newMap)) {\n      setMap(newMap);\n    }\n  }, [map]);\n  return /*#__PURE__*/React.createElement(FloatingListContext.Provider, {\n    value: React.useMemo(() => ({\n      register,\n      unregister,\n      map,\n      elementsRef,\n      labelsRef\n    }), [register, unregister, map, elementsRef, labelsRef])\n  }, children);\n}\n/**\n * Used to register a list item and its index (DOM position) in the\n * `FloatingList`.\n * @see https://floating-ui.com/docs/FloatingList#uselistitem\n */\nfunction useListItem(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    label\n  } = props;\n  const {\n    register,\n    unregister,\n    map,\n    elementsRef,\n    labelsRef\n  } = React.useContext(FloatingListContext);\n  const [index$1, setIndex] = React.useState(null);\n  const componentRef = React.useRef(null);\n  const ref = React.useCallback(node => {\n    componentRef.current = node;\n    if (index$1 !== null) {\n      elementsRef.current[index$1] = node;\n      if (labelsRef) {\n        var _node$textContent;\n        const isLabelDefined = label !== undefined;\n        labelsRef.current[index$1] = isLabelDefined ? label : (_node$textContent = node == null ? void 0 : node.textContent) != null ? _node$textContent : null;\n      }\n    }\n  }, [index$1, elementsRef, labelsRef, label]);\n  index(() => {\n    const node = componentRef.current;\n    if (node) {\n      register(node);\n      return () => {\n        unregister(node);\n      };\n    }\n  }, [register, unregister]);\n  index(() => {\n    const index = componentRef.current ? map.get(componentRef.current) : null;\n    if (index != null) {\n      setIndex(index);\n    }\n  }, [map]);\n  return React.useMemo(() => ({\n    ref,\n    index: index$1 == null ? -1 : index$1\n  }), [index$1, ref]);\n}\n\nfunction renderJsx(render, computedProps) {\n  if (typeof render === 'function') {\n    return render(computedProps);\n  }\n  if (render) {\n    return /*#__PURE__*/React.cloneElement(render, computedProps);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", computedProps);\n}\nconst CompositeContext = /*#__PURE__*/React.createContext({\n  activeIndex: 0,\n  onNavigate: () => {}\n});\nconst horizontalKeys = [ARROW_LEFT, ARROW_RIGHT];\nconst verticalKeys = [ARROW_UP, ARROW_DOWN];\nconst allKeys = [...horizontalKeys, ...verticalKeys];\n\n/**\n * Creates a single tab stop whose items are navigated by arrow keys, which\n * provides list navigation outside of floating element contexts.\n *\n * This is useful to enable navigation of a list of items that aren’t part of a\n * floating element. A menubar is an example of a composite, with each reference\n * element being an item.\n * @see https://floating-ui.com/docs/Composite\n */\nconst Composite = /*#__PURE__*/React.forwardRef(function Composite(props, forwardedRef) {\n  const {\n    render,\n    orientation = 'both',\n    loop = true,\n    cols = 1,\n    disabledIndices,\n    activeIndex: externalActiveIndex,\n    onNavigate: externalSetActiveIndex,\n    itemSizes,\n    dense = false,\n    ...domProps\n  } = props;\n  const [internalActiveIndex, internalSetActiveIndex] = React.useState(0);\n  const activeIndex = externalActiveIndex != null ? externalActiveIndex : internalActiveIndex;\n  const onNavigate = useEffectEvent(externalSetActiveIndex != null ? externalSetActiveIndex : internalSetActiveIndex);\n  const elementsRef = React.useRef([]);\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const contextValue = React.useMemo(() => ({\n    activeIndex,\n    onNavigate\n  }), [activeIndex, onNavigate]);\n  const isGrid = cols > 1;\n  function handleKeyDown(event) {\n    if (!allKeys.includes(event.key)) return;\n    let nextIndex = activeIndex;\n    const minIndex = getMinIndex(elementsRef, disabledIndices);\n    const maxIndex = getMaxIndex(elementsRef, disabledIndices);\n    if (isGrid) {\n      const sizes = itemSizes || Array.from({\n        length: elementsRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = buildCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isDisabled(elementsRef.current, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isDisabled(elementsRef.current, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      nextIndex = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex ? elementsRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getCellIndices([...(disabledIndices || elementsRef.current.map((_, index) => isDisabled(elementsRef.current, index) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getCellIndexOfCorner(activeIndex > maxIndex ? minIndex : activeIndex, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction we're\n        // moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === ARROW_RIGHT ? 'tr' : 'tl')\n      })]; // navigated cell will never be nullish\n    }\n    const toEndKeys = {\n      horizontal: [ARROW_RIGHT],\n      vertical: [ARROW_DOWN],\n      both: [ARROW_RIGHT, ARROW_DOWN]\n    }[orientation];\n    const toStartKeys = {\n      horizontal: [ARROW_LEFT],\n      vertical: [ARROW_UP],\n      both: [ARROW_LEFT, ARROW_UP]\n    }[orientation];\n    const preventedKeys = isGrid ? allKeys : {\n      horizontal: horizontalKeys,\n      vertical: verticalKeys,\n      both: allKeys\n    }[orientation];\n    if (nextIndex === activeIndex && [...toEndKeys, ...toStartKeys].includes(event.key)) {\n      if (loop && nextIndex === maxIndex && toEndKeys.includes(event.key)) {\n        nextIndex = minIndex;\n      } else if (loop && nextIndex === minIndex && toStartKeys.includes(event.key)) {\n        nextIndex = maxIndex;\n      } else {\n        nextIndex = findNonDisabledIndex(elementsRef, {\n          startingIndex: nextIndex,\n          decrement: toStartKeys.includes(event.key),\n          disabledIndices\n        });\n      }\n    }\n    if (nextIndex !== activeIndex && !isIndexOutOfBounds(elementsRef, nextIndex)) {\n      event.stopPropagation();\n      if (preventedKeys.includes(event.key)) {\n        event.preventDefault();\n      }\n      onNavigate(nextIndex);\n\n      // Wait for FocusManager `returnFocus` to execute.\n      queueMicrotask(() => {\n        enqueueFocus(elementsRef.current[nextIndex]);\n      });\n    }\n  }\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: forwardedRef,\n    'aria-orientation': orientation === 'both' ? undefined : orientation,\n    onKeyDown(e) {\n      domProps.onKeyDown == null || domProps.onKeyDown(e);\n      renderElementProps.onKeyDown == null || renderElementProps.onKeyDown(e);\n      handleKeyDown(e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(CompositeContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(FloatingList, {\n    elementsRef: elementsRef\n  }, renderJsx(render, computedProps)));\n});\n/**\n * @see https://floating-ui.com/docs/Composite\n */\nconst CompositeItem = /*#__PURE__*/React.forwardRef(function CompositeItem(props, forwardedRef) {\n  const {\n    render,\n    ...domProps\n  } = props;\n  const renderElementProps = render && typeof render !== 'function' ? render.props : {};\n  const {\n    activeIndex,\n    onNavigate\n  } = React.useContext(CompositeContext);\n  const {\n    ref,\n    index\n  } = useListItem();\n  const mergedRef = useMergeRefs([ref, forwardedRef, renderElementProps.ref]);\n  const isActive = activeIndex === index;\n  const computedProps = {\n    ...domProps,\n    ...renderElementProps,\n    ref: mergedRef,\n    tabIndex: isActive ? 0 : -1,\n    'data-active': isActive ? '' : undefined,\n    onFocus(e) {\n      domProps.onFocus == null || domProps.onFocus(e);\n      renderElementProps.onFocus == null || renderElementProps.onFocus(e);\n      onNavigate(index);\n    }\n  };\n  return renderJsx(render, computedProps);\n});\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nlet serverHandoffComplete = false;\nlet count = 0;\nconst genId = () => // Ensure the id is unique with multiple independent versions of Floating UI\n// on <React 18\n\"floating-ui-\" + Math.random().toString(36).slice(2, 6) + count++;\nfunction useFloatingId() {\n  const [id, setId] = React.useState(() => serverHandoffComplete ? genId() : undefined);\n  index(() => {\n    if (id == null) {\n      setId(genId());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  React.useEffect(() => {\n    serverHandoffComplete = true;\n  }, []);\n  return id;\n}\nconst useReactId = SafeReact.useId;\n\n/**\n * Uses React 18's built-in `useId()` when available, or falls back to a\n * slightly less performant (requiring a double render) implementation for\n * earlier React versions.\n * @see https://floating-ui.com/docs/react-utils#useid\n */\nconst useId = useReactId || useFloatingId;\n\nlet devMessageSet;\nif (process.env.NODE_ENV !== \"production\") {\n  devMessageSet = /*#__PURE__*/new Set();\n}\nfunction warn() {\n  var _devMessageSet;\n  for (var _len = arguments.length, messages = new Array(_len), _key = 0; _key < _len; _key++) {\n    messages[_key] = arguments[_key];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet = devMessageSet) != null && _devMessageSet.has(message))) {\n    var _devMessageSet2;\n    (_devMessageSet2 = devMessageSet) == null || _devMessageSet2.add(message);\n    console.warn(message);\n  }\n}\nfunction error() {\n  var _devMessageSet3;\n  for (var _len2 = arguments.length, messages = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    messages[_key2] = arguments[_key2];\n  }\n  const message = \"Floating UI: \" + messages.join(' ');\n  if (!((_devMessageSet3 = devMessageSet) != null && _devMessageSet3.has(message))) {\n    var _devMessageSet4;\n    (_devMessageSet4 = devMessageSet) == null || _devMessageSet4.add(message);\n    console.error(message);\n  }\n}\n\n/**\n * Renders a pointing arrow triangle.\n * @see https://floating-ui.com/docs/FloatingArrow\n */\nconst FloatingArrow = /*#__PURE__*/React.forwardRef(function FloatingArrow(props, ref) {\n  const {\n    context: {\n      placement,\n      elements: {\n        floating\n      },\n      middlewareData: {\n        arrow\n      }\n    },\n    width = 14,\n    height = 7,\n    tipRadius = 0,\n    strokeWidth = 0,\n    staticOffset,\n    stroke,\n    d,\n    style: {\n      transform,\n      ...restStyle\n    } = {},\n    ...rest\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!ref) {\n      warn('The `ref` prop is required for `FloatingArrow`.');\n    }\n  }\n  const clipPathId = useId();\n  const [isRTL, setIsRTL] = React.useState(false);\n\n  // https://github.com/floating-ui/floating-ui/issues/2932\n  index(() => {\n    if (!floating) return;\n    const isRTL = getComputedStyle(floating).direction === 'rtl';\n    if (isRTL) {\n      setIsRTL(true);\n    }\n  }, [floating]);\n  if (!floating) {\n    return null;\n  }\n\n  // Strokes must be double the border width, this ensures the stroke's width\n  // works as you'd expect.\n  const computedStrokeWidth = strokeWidth * 2;\n  const halfStrokeWidth = computedStrokeWidth / 2;\n  const svgX = width / 2 * (tipRadius / -8 + 1);\n  const svgY = height / 2 * tipRadius / 4;\n  const [side, alignment] = placement.split('-');\n  const isCustomShape = !!d;\n  const isVerticalSide = side === 'top' || side === 'bottom';\n  const yOffsetProp = staticOffset && alignment === 'end' ? 'bottom' : 'top';\n  let xOffsetProp = staticOffset && alignment === 'end' ? 'right' : 'left';\n  if (staticOffset && isRTL) {\n    xOffsetProp = alignment === 'end' ? 'left' : 'right';\n  }\n  const arrowX = (arrow == null ? void 0 : arrow.x) != null ? staticOffset || arrow.x : '';\n  const arrowY = (arrow == null ? void 0 : arrow.y) != null ? staticOffset || arrow.y : '';\n  const dValue = d || 'M0,0' + (\" H\" + width) + (\" L\" + (width - svgX) + \",\" + (height - svgY)) + (\" Q\" + width / 2 + \",\" + height + \" \" + svgX + \",\" + (height - svgY)) + ' Z';\n  const rotation = {\n    top: isCustomShape ? 'rotate(180deg)' : '',\n    left: isCustomShape ? 'rotate(90deg)' : 'rotate(-90deg)',\n    bottom: isCustomShape ? '' : 'rotate(180deg)',\n    right: isCustomShape ? 'rotate(-90deg)' : 'rotate(90deg)'\n  }[side];\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({}, rest, {\n    \"aria-hidden\": true,\n    ref: ref,\n    width: isCustomShape ? width : width + computedStrokeWidth,\n    height: width,\n    viewBox: \"0 0 \" + width + \" \" + (height > width ? height : width),\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      [xOffsetProp]: arrowX,\n      [yOffsetProp]: arrowY,\n      [side]: isVerticalSide || isCustomShape ? '100%' : \"calc(100% - \" + computedStrokeWidth / 2 + \"px)\",\n      transform: \"\" + rotation + (transform != null ? transform : ''),\n      ...restStyle\n    }\n  }), computedStrokeWidth > 0 && /*#__PURE__*/React.createElement(\"path\", {\n    clipPath: \"url(#\" + clipPathId + \")\",\n    fill: \"none\",\n    stroke: stroke\n    // Account for the stroke on the fill path rendered below.\n    ,\n    strokeWidth: computedStrokeWidth + (d ? 0 : 1),\n    d: dValue\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    stroke: computedStrokeWidth && !d ? rest.fill : 'none',\n    d: dValue\n  }), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: clipPathId\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    x: -halfStrokeWidth,\n    y: halfStrokeWidth * (isCustomShape ? -1 : 1),\n    width: width + computedStrokeWidth,\n    height: width\n  })));\n});\n\nfunction createPubSub() {\n  const map = new Map();\n  return {\n    emit(event, data) {\n      var _map$get;\n      (_map$get = map.get(event)) == null || _map$get.forEach(handler => handler(data));\n    },\n    on(event, listener) {\n      map.set(event, [...(map.get(event) || []), listener]);\n    },\n    off(event, listener) {\n      var _map$get2;\n      map.set(event, ((_map$get2 = map.get(event)) == null ? void 0 : _map$get2.filter(l => l !== listener)) || []);\n    }\n  };\n}\n\nconst FloatingNodeContext = /*#__PURE__*/React.createContext(null);\nconst FloatingTreeContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the parent node id for nested floating elements, if available.\n * Returns `null` for top-level floating elements.\n */\nconst useFloatingParentNodeId = () => {\n  var _React$useContext;\n  return ((_React$useContext = React.useContext(FloatingNodeContext)) == null ? void 0 : _React$useContext.id) || null;\n};\n\n/**\n * Returns the nearest floating tree context, if available.\n */\nconst useFloatingTree = () => React.useContext(FloatingTreeContext);\n\n/**\n * Registers a node into the `FloatingTree`, returning its id.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction useFloatingNodeId(customParentId) {\n  const id = useId();\n  const tree = useFloatingTree();\n  const reactParentId = useFloatingParentNodeId();\n  const parentId = customParentId || reactParentId;\n  index(() => {\n    const node = {\n      id,\n      parentId\n    };\n    tree == null || tree.addNode(node);\n    return () => {\n      tree == null || tree.removeNode(node);\n    };\n  }, [tree, id, parentId]);\n  return id;\n}\n/**\n * Provides parent node context for nested floating elements.\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingNode(props) {\n  const {\n    children,\n    id\n  } = props;\n  const parentId = useFloatingParentNodeId();\n  return /*#__PURE__*/React.createElement(FloatingNodeContext.Provider, {\n    value: React.useMemo(() => ({\n      id,\n      parentId\n    }), [id, parentId])\n  }, children);\n}\n/**\n * Provides context for nested floating elements when they are not children of\n * each other on the DOM.\n * This is not necessary in all cases, except when there must be explicit communication between parent and child floating elements. It is necessary for:\n * - The `bubbles` option in the `useDismiss()` Hook\n * - Nested virtual list navigation\n * - Nested floating elements that each open on hover\n * - Custom communication between parent and child floating elements\n * @see https://floating-ui.com/docs/FloatingTree\n */\nfunction FloatingTree(props) {\n  const {\n    children\n  } = props;\n  const nodesRef = React.useRef([]);\n  const addNode = React.useCallback(node => {\n    nodesRef.current = [...nodesRef.current, node];\n  }, []);\n  const removeNode = React.useCallback(node => {\n    nodesRef.current = nodesRef.current.filter(n => n !== node);\n  }, []);\n  const events = React.useState(() => createPubSub())[0];\n  return /*#__PURE__*/React.createElement(FloatingTreeContext.Provider, {\n    value: React.useMemo(() => ({\n      nodesRef,\n      addNode,\n      removeNode,\n      events\n    }), [addNode, removeNode, events])\n  }, children);\n}\n\nfunction createAttribute(name) {\n  return \"data-floating-ui-\" + name;\n}\n\nfunction useLatestRef(value) {\n  const ref = useRef(value);\n  index(() => {\n    ref.current = value;\n  });\n  return ref;\n}\n\nconst safePolygonIdentifier = /*#__PURE__*/createAttribute('safe-polygon');\nfunction getDelay(value, prop, pointerType) {\n  if (pointerType && !isMouseLikePointerType(pointerType)) {\n    return 0;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  return value == null ? void 0 : value[prop];\n}\n/**\n * Opens the floating element while hovering over the reference element, like\n * CSS `:hover`.\n * @see https://floating-ui.com/docs/useHover\n */\nfunction useHover(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    events,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    delay = 0,\n    handleClose = null,\n    mouseOnly = false,\n    restMs = 0,\n    move = true\n  } = props;\n  const tree = useFloatingTree();\n  const parentId = useFloatingParentNodeId();\n  const handleCloseRef = useLatestRef(handleClose);\n  const delayRef = useLatestRef(delay);\n  const openRef = useLatestRef(open);\n  const pointerTypeRef = React.useRef();\n  const timeoutRef = React.useRef(-1);\n  const handlerRef = React.useRef();\n  const restTimeoutRef = React.useRef(-1);\n  const blockMouseMoveRef = React.useRef(true);\n  const performedPointerEventsMutationRef = React.useRef(false);\n  const unbindMouseMoveRef = React.useRef(() => {});\n  const isHoverOpen = React.useCallback(() => {\n    var _dataRef$current$open;\n    const type = (_dataRef$current$open = dataRef.current.openEvent) == null ? void 0 : _dataRef$current$open.type;\n    return (type == null ? void 0 : type.includes('mouse')) && type !== 'mousedown';\n  }, [dataRef]);\n\n  // When closing before opening, clear the delay timeouts to cancel it\n  // from showing.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        open\n      } = _ref;\n      if (!open) {\n        clearTimeout(timeoutRef.current);\n        clearTimeout(restTimeoutRef.current);\n        blockMouseMoveRef.current = true;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [enabled, events]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    if (!handleCloseRef.current) return;\n    if (!open) return;\n    function onLeave(event) {\n      if (isHoverOpen()) {\n        onOpenChange(false, event, 'hover');\n      }\n    }\n    const html = getDocument(elements.floating).documentElement;\n    html.addEventListener('mouseleave', onLeave);\n    return () => {\n      html.removeEventListener('mouseleave', onLeave);\n    };\n  }, [elements.floating, open, onOpenChange, enabled, handleCloseRef, isHoverOpen]);\n  const closeWithDelay = React.useCallback(function (event, runElseBranch, reason) {\n    if (runElseBranch === void 0) {\n      runElseBranch = true;\n    }\n    if (reason === void 0) {\n      reason = 'hover';\n    }\n    const closeDelay = getDelay(delayRef.current, 'close', pointerTypeRef.current);\n    if (closeDelay && !handlerRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = window.setTimeout(() => onOpenChange(false, event, reason), closeDelay);\n    } else if (runElseBranch) {\n      clearTimeout(timeoutRef.current);\n      onOpenChange(false, event, reason);\n    }\n  }, [delayRef, onOpenChange]);\n  const cleanupMouseMoveHandler = useEffectEvent(() => {\n    unbindMouseMoveRef.current();\n    handlerRef.current = undefined;\n  });\n  const clearPointerEvents = useEffectEvent(() => {\n    if (performedPointerEventsMutationRef.current) {\n      const body = getDocument(elements.floating).body;\n      body.style.pointerEvents = '';\n      body.removeAttribute(safePolygonIdentifier);\n      performedPointerEventsMutationRef.current = false;\n    }\n  });\n\n  // Registering the mouse events on the reference directly to bypass React's\n  // delegation system. If the cursor was on a disabled element and then entered\n  // the reference (no gap), `mouseenter` doesn't fire in the delegation system.\n  React.useEffect(() => {\n    if (!enabled) return;\n    function isClickLikeOpenEvent() {\n      return dataRef.current.openEvent ? ['click', 'mousedown'].includes(dataRef.current.openEvent.type) : false;\n    }\n    function onMouseEnter(event) {\n      clearTimeout(timeoutRef.current);\n      blockMouseMoveRef.current = false;\n      if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current) || restMs > 0 && !getDelay(delayRef.current, 'open')) {\n        return;\n      }\n      const openDelay = getDelay(delayRef.current, 'open', pointerTypeRef.current);\n      if (openDelay) {\n        timeoutRef.current = window.setTimeout(() => {\n          if (!openRef.current) {\n            onOpenChange(true, event, 'hover');\n          }\n        }, openDelay);\n      } else {\n        onOpenChange(true, event, 'hover');\n      }\n    }\n    function onMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      unbindMouseMoveRef.current();\n      const doc = getDocument(elements.floating);\n      clearTimeout(restTimeoutRef.current);\n      if (handleCloseRef.current && dataRef.current.floatingContext) {\n        // Prevent clearing `onScrollMouseLeave` timeout.\n        if (!open) {\n          clearTimeout(timeoutRef.current);\n        }\n        handlerRef.current = handleCloseRef.current({\n          ...dataRef.current.floatingContext,\n          tree,\n          x: event.clientX,\n          y: event.clientY,\n          onClose() {\n            clearPointerEvents();\n            cleanupMouseMoveHandler();\n            closeWithDelay(event, true, 'safe-polygon');\n          }\n        });\n        const handler = handlerRef.current;\n        doc.addEventListener('mousemove', handler);\n        unbindMouseMoveRef.current = () => {\n          doc.removeEventListener('mousemove', handler);\n        };\n        return;\n      }\n\n      // Allow interactivity without `safePolygon` on touch devices. With a\n      // pointer, a short close delay is an alternative, so it should work\n      // consistently.\n      const shouldClose = pointerTypeRef.current === 'touch' ? !contains(elements.floating, event.relatedTarget) : true;\n      if (shouldClose) {\n        closeWithDelay(event);\n      }\n    }\n\n    // Ensure the floating element closes after scrolling even if the pointer\n    // did not move.\n    // https://github.com/floating-ui/floating-ui/discussions/1692\n    function onScrollMouseLeave(event) {\n      if (isClickLikeOpenEvent()) return;\n      if (!dataRef.current.floatingContext) return;\n      handleCloseRef.current == null || handleCloseRef.current({\n        ...dataRef.current.floatingContext,\n        tree,\n        x: event.clientX,\n        y: event.clientY,\n        onClose() {\n          clearPointerEvents();\n          cleanupMouseMoveHandler();\n          closeWithDelay(event);\n        }\n      })(event);\n    }\n    if (isElement(elements.domReference)) {\n      var _elements$floating;\n      const ref = elements.domReference;\n      open && ref.addEventListener('mouseleave', onScrollMouseLeave);\n      (_elements$floating = elements.floating) == null || _elements$floating.addEventListener('mouseleave', onScrollMouseLeave);\n      move && ref.addEventListener('mousemove', onMouseEnter, {\n        once: true\n      });\n      ref.addEventListener('mouseenter', onMouseEnter);\n      ref.addEventListener('mouseleave', onMouseLeave);\n      return () => {\n        var _elements$floating2;\n        open && ref.removeEventListener('mouseleave', onScrollMouseLeave);\n        (_elements$floating2 = elements.floating) == null || _elements$floating2.removeEventListener('mouseleave', onScrollMouseLeave);\n        move && ref.removeEventListener('mousemove', onMouseEnter);\n        ref.removeEventListener('mouseenter', onMouseEnter);\n        ref.removeEventListener('mouseleave', onMouseLeave);\n      };\n    }\n  }, [elements, enabled, context, mouseOnly, restMs, move, closeWithDelay, cleanupMouseMoveHandler, clearPointerEvents, onOpenChange, open, openRef, tree, delayRef, handleCloseRef, dataRef]);\n\n  // Block pointer-events of every element other than the reference and floating\n  // while the floating element is open and has a `handleClose` handler. Also\n  // handles nested floating elements.\n  // https://github.com/floating-ui/floating-ui/issues/1722\n  index(() => {\n    var _handleCloseRef$curre;\n    if (!enabled) return;\n    if (open && (_handleCloseRef$curre = handleCloseRef.current) != null && _handleCloseRef$curre.__options.blockPointerEvents && isHoverOpen()) {\n      const body = getDocument(elements.floating).body;\n      body.setAttribute(safePolygonIdentifier, '');\n      body.style.pointerEvents = 'none';\n      performedPointerEventsMutationRef.current = true;\n      const floatingEl = elements.floating;\n      if (isElement(elements.domReference) && floatingEl) {\n        var _tree$nodesRef$curren;\n        const ref = elements.domReference;\n        const parentFloating = tree == null || (_tree$nodesRef$curren = tree.nodesRef.current.find(node => node.id === parentId)) == null || (_tree$nodesRef$curren = _tree$nodesRef$curren.context) == null ? void 0 : _tree$nodesRef$curren.elements.floating;\n        if (parentFloating) {\n          parentFloating.style.pointerEvents = '';\n        }\n        ref.style.pointerEvents = 'auto';\n        floatingEl.style.pointerEvents = 'auto';\n        return () => {\n          ref.style.pointerEvents = '';\n          floatingEl.style.pointerEvents = '';\n        };\n      }\n    }\n  }, [enabled, open, parentId, elements, tree, handleCloseRef, isHoverOpen]);\n  index(() => {\n    if (!open) {\n      pointerTypeRef.current = undefined;\n      cleanupMouseMoveHandler();\n      clearPointerEvents();\n    }\n  }, [open, cleanupMouseMoveHandler, clearPointerEvents]);\n  React.useEffect(() => {\n    return () => {\n      cleanupMouseMoveHandler();\n      clearTimeout(timeoutRef.current);\n      clearTimeout(restTimeoutRef.current);\n      clearPointerEvents();\n    };\n  }, [enabled, elements.domReference, cleanupMouseMoveHandler, clearPointerEvents]);\n  const reference = React.useMemo(() => {\n    function setPointerRef(event) {\n      pointerTypeRef.current = event.pointerType;\n    }\n    return {\n      onPointerDown: setPointerRef,\n      onPointerEnter: setPointerRef,\n      onMouseMove(event) {\n        const {\n          nativeEvent\n        } = event;\n        function handleMouseMove() {\n          if (!blockMouseMoveRef.current && !openRef.current) {\n            onOpenChange(true, nativeEvent, 'hover');\n          }\n        }\n        if (mouseOnly && !isMouseLikePointerType(pointerTypeRef.current)) {\n          return;\n        }\n        if (open || restMs === 0) {\n          return;\n        }\n        clearTimeout(restTimeoutRef.current);\n        if (pointerTypeRef.current === 'touch') {\n          handleMouseMove();\n        } else {\n          restTimeoutRef.current = window.setTimeout(handleMouseMove, restMs);\n        }\n      }\n    };\n  }, [mouseOnly, onOpenChange, open, openRef, restMs]);\n  const floating = React.useMemo(() => ({\n    onMouseEnter() {\n      clearTimeout(timeoutRef.current);\n    },\n    onMouseLeave(event) {\n      closeWithDelay(event.nativeEvent, false);\n    }\n  }), [closeWithDelay]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nconst NOOP = () => {};\nconst FloatingDelayGroupContext = /*#__PURE__*/React.createContext({\n  delay: 0,\n  initialDelay: 0,\n  timeoutMs: 0,\n  currentId: null,\n  setCurrentId: NOOP,\n  setState: NOOP,\n  isInstantPhase: false\n});\n\n/**\n * @deprecated\n * Use the return value of `useDelayGroup()` instead.\n */\nconst useDelayGroupContext = () => React.useContext(FloatingDelayGroupContext);\n/**\n * Provides context for a group of floating elements that should share a\n * `delay`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction FloatingDelayGroup(props) {\n  const {\n    children,\n    delay,\n    timeoutMs = 0\n  } = props;\n  const [state, setState] = React.useReducer((prev, next) => ({\n    ...prev,\n    ...next\n  }), {\n    delay,\n    timeoutMs,\n    initialDelay: delay,\n    currentId: null,\n    isInstantPhase: false\n  });\n  const initialCurrentIdRef = React.useRef(null);\n  const setCurrentId = React.useCallback(currentId => {\n    setState({\n      currentId\n    });\n  }, []);\n  index(() => {\n    if (state.currentId) {\n      if (initialCurrentIdRef.current === null) {\n        initialCurrentIdRef.current = state.currentId;\n      } else if (!state.isInstantPhase) {\n        setState({\n          isInstantPhase: true\n        });\n      }\n    } else {\n      if (state.isInstantPhase) {\n        setState({\n          isInstantPhase: false\n        });\n      }\n      initialCurrentIdRef.current = null;\n    }\n  }, [state.currentId, state.isInstantPhase]);\n  return /*#__PURE__*/React.createElement(FloatingDelayGroupContext.Provider, {\n    value: React.useMemo(() => ({\n      ...state,\n      setState,\n      setCurrentId\n    }), [state, setCurrentId])\n  }, children);\n}\n/**\n * Enables grouping when called inside a component that's a child of a\n * `FloatingDelayGroup`.\n * @see https://floating-ui.com/docs/FloatingDelayGroup\n */\nfunction useDelayGroup(context, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    floatingId\n  } = context;\n  const {\n    id: optionId\n  } = options;\n  const id = optionId != null ? optionId : floatingId;\n  const groupContext = useDelayGroupContext();\n  const {\n    currentId,\n    setCurrentId,\n    initialDelay,\n    setState,\n    timeoutMs\n  } = groupContext;\n  index(() => {\n    if (!currentId) return;\n    setState({\n      delay: {\n        open: 1,\n        close: getDelay(initialDelay, 'close')\n      }\n    });\n    if (currentId !== id) {\n      onOpenChange(false);\n    }\n  }, [id, onOpenChange, setState, currentId, initialDelay]);\n  index(() => {\n    function unset() {\n      onOpenChange(false);\n      setState({\n        delay: initialDelay,\n        currentId: null\n      });\n    }\n    if (!currentId) return;\n    if (!open && currentId === id) {\n      if (timeoutMs) {\n        const timeout = window.setTimeout(unset, timeoutMs);\n        return () => {\n          clearTimeout(timeout);\n        };\n      }\n      unset();\n    }\n  }, [open, setState, currentId, id, onOpenChange, initialDelay, timeoutMs]);\n  index(() => {\n    if (setCurrentId === NOOP || !open) return;\n    setCurrentId(id);\n  }, [open, setCurrentId, id]);\n  return groupContext;\n}\n\nfunction getAncestors(nodes, id) {\n  var _nodes$find;\n  let allAncestors = [];\n  let currentParentId = (_nodes$find = nodes.find(node => node.id === id)) == null ? void 0 : _nodes$find.parentId;\n  while (currentParentId) {\n    const currentNode = nodes.find(node => node.id === currentParentId);\n    currentParentId = currentNode == null ? void 0 : currentNode.parentId;\n    if (currentNode) {\n      allAncestors = allAncestors.concat(currentNode);\n    }\n  }\n  return allAncestors;\n}\n\nfunction getChildren(nodes, id) {\n  let allChildren = nodes.filter(node => {\n    var _node$context;\n    return node.parentId === id && ((_node$context = node.context) == null ? void 0 : _node$context.open);\n  });\n  let currentChildren = allChildren;\n  while (currentChildren.length) {\n    currentChildren = nodes.filter(node => {\n      var _currentChildren;\n      return (_currentChildren = currentChildren) == null ? void 0 : _currentChildren.some(n => {\n        var _node$context2;\n        return node.parentId === n.id && ((_node$context2 = node.context) == null ? void 0 : _node$context2.open);\n      });\n    });\n    allChildren = allChildren.concat(currentChildren);\n  }\n  return allChildren;\n}\nfunction getDeepestNode(nodes, id) {\n  let deepestNodeId;\n  let maxDepth = -1;\n  function findDeepest(nodeId, depth) {\n    if (depth > maxDepth) {\n      deepestNodeId = nodeId;\n      maxDepth = depth;\n    }\n    const children = getChildren(nodes, nodeId);\n    children.forEach(child => {\n      findDeepest(child.id, depth + 1);\n    });\n  }\n  findDeepest(id, 0);\n  return nodes.find(node => node.id === deepestNodeId);\n}\n\n// Modified to add conditional `aria-hidden` support:\n// https://github.com/theKashey/aria-hidden/blob/9220c8f4a4fd35f63bee5510a9f41a37264382d4/src/index.ts\nlet counterMap = /*#__PURE__*/new WeakMap();\nlet uncontrolledElementsSet = /*#__PURE__*/new WeakSet();\nlet markerMap = {};\nlet lockCount = 0;\nconst supportsInert = () => typeof HTMLElement !== 'undefined' && 'inert' in HTMLElement.prototype;\nconst unwrapHost = node => node && (node.host || unwrapHost(node.parentNode));\nconst correctElements = (parent, targets) => targets.map(target => {\n  if (parent.contains(target)) {\n    return target;\n  }\n  const correctedTarget = unwrapHost(target);\n  if (parent.contains(correctedTarget)) {\n    return correctedTarget;\n  }\n  return null;\n}).filter(x => x != null);\nfunction applyAttributeToOthers(uncorrectedAvoidElements, body, ariaHidden, inert) {\n  const markerName = 'data-floating-ui-inert';\n  const controlAttribute = inert ? 'inert' : ariaHidden ? 'aria-hidden' : null;\n  const avoidElements = correctElements(body, uncorrectedAvoidElements);\n  const elementsToKeep = new Set();\n  const elementsToStop = new Set(avoidElements);\n  const hiddenElements = [];\n  if (!markerMap[markerName]) {\n    markerMap[markerName] = new WeakMap();\n  }\n  const markerCounter = markerMap[markerName];\n  avoidElements.forEach(keep);\n  deep(body);\n  elementsToKeep.clear();\n  function keep(el) {\n    if (!el || elementsToKeep.has(el)) {\n      return;\n    }\n    elementsToKeep.add(el);\n    el.parentNode && keep(el.parentNode);\n  }\n  function deep(parent) {\n    if (!parent || elementsToStop.has(parent)) {\n      return;\n    }\n    [].forEach.call(parent.children, node => {\n      if (getNodeName(node) === 'script') return;\n      if (elementsToKeep.has(node)) {\n        deep(node);\n      } else {\n        const attr = controlAttribute ? node.getAttribute(controlAttribute) : null;\n        const alreadyHidden = attr !== null && attr !== 'false';\n        const counterValue = (counterMap.get(node) || 0) + 1;\n        const markerValue = (markerCounter.get(node) || 0) + 1;\n        counterMap.set(node, counterValue);\n        markerCounter.set(node, markerValue);\n        hiddenElements.push(node);\n        if (counterValue === 1 && alreadyHidden) {\n          uncontrolledElementsSet.add(node);\n        }\n        if (markerValue === 1) {\n          node.setAttribute(markerName, '');\n        }\n        if (!alreadyHidden && controlAttribute) {\n          node.setAttribute(controlAttribute, 'true');\n        }\n      }\n    });\n  }\n  lockCount++;\n  return () => {\n    hiddenElements.forEach(element => {\n      const counterValue = (counterMap.get(element) || 0) - 1;\n      const markerValue = (markerCounter.get(element) || 0) - 1;\n      counterMap.set(element, counterValue);\n      markerCounter.set(element, markerValue);\n      if (!counterValue) {\n        if (!uncontrolledElementsSet.has(element) && controlAttribute) {\n          element.removeAttribute(controlAttribute);\n        }\n        uncontrolledElementsSet.delete(element);\n      }\n      if (!markerValue) {\n        element.removeAttribute(markerName);\n      }\n    });\n    lockCount--;\n    if (!lockCount) {\n      counterMap = new WeakMap();\n      counterMap = new WeakMap();\n      uncontrolledElementsSet = new WeakSet();\n      markerMap = {};\n    }\n  };\n}\nfunction markOthers(avoidElements, ariaHidden, inert) {\n  if (ariaHidden === void 0) {\n    ariaHidden = false;\n  }\n  if (inert === void 0) {\n    inert = false;\n  }\n  const body = getDocument(avoidElements[0]).body;\n  return applyAttributeToOthers(avoidElements.concat(Array.from(body.querySelectorAll('[aria-live]'))), body, ariaHidden, inert);\n}\n\nconst getTabbableOptions = () => ({\n  getShadowRoot: true,\n  displayCheck:\n  // JSDOM does not support the `tabbable` library. To solve this we can\n  // check if `ResizeObserver` is a real function (not polyfilled), which\n  // determines if the current environment is JSDOM-like.\n  typeof ResizeObserver === 'function' && ResizeObserver.toString().includes('[native code]') ? 'full' : 'none'\n});\nfunction getTabbableIn(container, direction) {\n  const allTabbable = tabbable(container, getTabbableOptions());\n  if (direction === 'prev') {\n    allTabbable.reverse();\n  }\n  const activeIndex = allTabbable.indexOf(activeElement(getDocument(container)));\n  const nextTabbableElements = allTabbable.slice(activeIndex + 1);\n  return nextTabbableElements[0];\n}\nfunction getNextTabbable() {\n  return getTabbableIn(document.body, 'next');\n}\nfunction getPreviousTabbable() {\n  return getTabbableIn(document.body, 'prev');\n}\nfunction isOutsideEvent(event, container) {\n  const containerElement = container || event.currentTarget;\n  const relatedTarget = event.relatedTarget;\n  return !relatedTarget || !contains(containerElement, relatedTarget);\n}\nfunction disableFocusInside(container) {\n  const tabbableElements = tabbable(container, getTabbableOptions());\n  tabbableElements.forEach(element => {\n    element.dataset.tabindex = element.getAttribute('tabindex') || '';\n    element.setAttribute('tabindex', '-1');\n  });\n}\nfunction enableFocusInside(container) {\n  const elements = container.querySelectorAll('[data-tabindex]');\n  elements.forEach(element => {\n    const tabindex = element.dataset.tabindex;\n    delete element.dataset.tabindex;\n    if (tabindex) {\n      element.setAttribute('tabindex', tabindex);\n    } else {\n      element.removeAttribute('tabindex');\n    }\n  });\n}\nfunction getClosestTabbableElement(tabbableElements, element, floating) {\n  const elementIndex = tabbableElements.indexOf(element);\n  function traverseTabbableElements(next) {\n    const attr = createAttribute('focus-guard');\n    let index = elementIndex + (next ? 1 : 0);\n    let currentElement = tabbableElements[index];\n    while (currentElement && (!currentElement.isConnected || currentElement.hasAttribute(attr) || contains(floating, currentElement))) {\n      if (next) {\n        index++;\n      } else {\n        index--;\n      }\n      currentElement = tabbableElements[index];\n    }\n    return currentElement;\n  }\n\n  // First, try to find the next tabbable element\n  const next = traverseTabbableElements(true);\n  if (next) {\n    return next;\n  }\n\n  // If we can't find a next tabbable element, try to find the previous one\n  return traverseTabbableElements(false);\n}\n\n// See Diego Haz's Sandbox for making this logic work well on Safari/iOS:\n// https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/FocusTrap.tsx\n\nconst HIDDEN_STYLES = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  padding: 0,\n  position: 'fixed',\n  whiteSpace: 'nowrap',\n  width: '1px',\n  top: 0,\n  left: 0\n};\nlet timeoutId;\nfunction setActiveElementOnTab(event) {\n  if (event.key === 'Tab') {\n    event.target;\n    clearTimeout(timeoutId);\n  }\n}\nconst FocusGuard = /*#__PURE__*/React.forwardRef(function FocusGuard(props, ref) {\n  const [role, setRole] = React.useState();\n  index(() => {\n    if (isSafari()) {\n      // Unlike other screen readers such as NVDA and JAWS, the virtual cursor\n      // on VoiceOver does trigger the onFocus event, so we can use the focus\n      // trap element. On Safari, only buttons trigger the onFocus event.\n      // NB: \"group\" role in the Sandbox no longer appears to work, must be a\n      // button role.\n      setRole('button');\n    }\n    document.addEventListener('keydown', setActiveElementOnTab);\n    return () => {\n      document.removeEventListener('keydown', setActiveElementOnTab);\n    };\n  }, []);\n  const restProps = {\n    ref,\n    tabIndex: 0,\n    // Role is only for VoiceOver\n    role,\n    'aria-hidden': role ? undefined : true,\n    [createAttribute('focus-guard')]: '',\n    style: HIDDEN_STYLES\n  };\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, props, restProps));\n});\n\nconst PortalContext = /*#__PURE__*/React.createContext(null);\nconst attr = /*#__PURE__*/createAttribute('portal');\n/**\n * @see https://floating-ui.com/docs/FloatingPortal#usefloatingportalnode\n */\nfunction useFloatingPortalNode(props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    id,\n    root\n  } = props;\n  const uniqueId = useId();\n  const portalContext = usePortalContext();\n  const [portalNode, setPortalNode] = React.useState(null);\n  const portalNodeRef = React.useRef(null);\n  index(() => {\n    return () => {\n      portalNode == null || portalNode.remove();\n      // Allow the subsequent layout effects to create a new node on updates.\n      // The portal node will still be cleaned up on unmount.\n      // https://github.com/floating-ui/floating-ui/issues/2454\n      queueMicrotask(() => {\n        portalNodeRef.current = null;\n      });\n    };\n  }, [portalNode]);\n  index(() => {\n    // Wait for the uniqueId to be generated before creating the portal node in\n    // React <18 (using `useFloatingId` instead of the native `useId`).\n    // https://github.com/floating-ui/floating-ui/issues/2778\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    const existingIdRoot = id ? document.getElementById(id) : null;\n    if (!existingIdRoot) return;\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    existingIdRoot.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, uniqueId]);\n  index(() => {\n    if (!uniqueId) return;\n    if (portalNodeRef.current) return;\n    let container = root || (portalContext == null ? void 0 : portalContext.portalNode);\n    if (container && !isElement(container)) container = container.current;\n    container = container || document.body;\n    let idWrapper = null;\n    if (id) {\n      idWrapper = document.createElement('div');\n      idWrapper.id = id;\n      container.appendChild(idWrapper);\n    }\n    const subRoot = document.createElement('div');\n    subRoot.id = uniqueId;\n    subRoot.setAttribute(attr, '');\n    container = idWrapper || container;\n    container.appendChild(subRoot);\n    portalNodeRef.current = subRoot;\n    setPortalNode(subRoot);\n  }, [id, root, uniqueId, portalContext]);\n  return portalNode;\n}\n/**\n * Portals the floating element into a given container element — by default,\n * outside of the app root and into the body.\n * This is necessary to ensure the floating element can appear outside any\n * potential parent containers that cause clipping (such as `overflow: hidden`),\n * while retaining its location in the React tree.\n * @see https://floating-ui.com/docs/FloatingPortal\n */\nfunction FloatingPortal(props) {\n  const {\n    children,\n    id,\n    root = null,\n    preserveTabOrder = true\n  } = props;\n  const portalNode = useFloatingPortalNode({\n    id,\n    root\n  });\n  const [focusManagerState, setFocusManagerState] = React.useState(null);\n  const beforeOutsideRef = React.useRef(null);\n  const afterOutsideRef = React.useRef(null);\n  const beforeInsideRef = React.useRef(null);\n  const afterInsideRef = React.useRef(null);\n  const shouldRenderGuards =\n  // The FocusManager and therefore floating element are currently open/\n  // rendered.\n  !!focusManagerState &&\n  // Guards are only for non-modal focus management.\n  !focusManagerState.modal &&\n  // Don't render if unmount is transitioning.\n  focusManagerState.open && preserveTabOrder && !!(root || portalNode);\n\n  // https://codesandbox.io/s/tabbable-portal-f4tng?file=/src/TabbablePortal.tsx\n  React.useEffect(() => {\n    if (!portalNode || !preserveTabOrder || focusManagerState != null && focusManagerState.modal) {\n      return;\n    }\n\n    // Make sure elements inside the portal element are tabbable only when the\n    // portal has already been focused, either by tabbing into a focus trap\n    // element outside or using the mouse.\n    function onFocus(event) {\n      if (portalNode && isOutsideEvent(event)) {\n        const focusing = event.type === 'focusin';\n        const manageFocus = focusing ? enableFocusInside : disableFocusInside;\n        manageFocus(portalNode);\n      }\n    }\n    // Listen to the event on the capture phase so they run before the focus\n    // trap elements onFocus prop is called.\n    portalNode.addEventListener('focusin', onFocus, true);\n    portalNode.addEventListener('focusout', onFocus, true);\n    return () => {\n      portalNode.removeEventListener('focusin', onFocus, true);\n      portalNode.removeEventListener('focusout', onFocus, true);\n    };\n  }, [portalNode, preserveTabOrder, focusManagerState == null ? void 0 : focusManagerState.modal]);\n  return /*#__PURE__*/React.createElement(PortalContext.Provider, {\n    value: React.useMemo(() => ({\n      preserveTabOrder,\n      beforeOutsideRef,\n      afterOutsideRef,\n      beforeInsideRef,\n      afterInsideRef,\n      portalNode,\n      setFocusManagerState\n    }), [preserveTabOrder, portalNode])\n  }, shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"outside\",\n    ref: beforeOutsideRef,\n    onFocus: event => {\n      if (isOutsideEvent(event, portalNode)) {\n        var _beforeInsideRef$curr;\n        (_beforeInsideRef$curr = beforeInsideRef.current) == null || _beforeInsideRef$curr.focus();\n      } else {\n        const prevTabbable = getPreviousTabbable() || (focusManagerState == null ? void 0 : focusManagerState.refs.domReference.current);\n        prevTabbable == null || prevTabbable.focus();\n      }\n    }\n  }), shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-owns\": portalNode.id,\n    style: HIDDEN_STYLES\n  }), portalNode && /*#__PURE__*/ReactDOM.createPortal(children, portalNode), shouldRenderGuards && portalNode && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"outside\",\n    ref: afterOutsideRef,\n    onFocus: event => {\n      if (isOutsideEvent(event, portalNode)) {\n        var _afterInsideRef$curre;\n        (_afterInsideRef$curre = afterInsideRef.current) == null || _afterInsideRef$curre.focus();\n      } else {\n        const nextTabbable = getNextTabbable() || (focusManagerState == null ? void 0 : focusManagerState.refs.domReference.current);\n        nextTabbable == null || nextTabbable.focus();\n        (focusManagerState == null ? void 0 : focusManagerState.closeOnFocusOut) && (focusManagerState == null ? void 0 : focusManagerState.onOpenChange(false, event.nativeEvent));\n      }\n    }\n  }));\n}\nconst usePortalContext = () => React.useContext(PortalContext);\n\nconst LIST_LIMIT = 20;\nlet previouslyFocusedElements = [];\nfunction addPreviouslyFocusedElement(element) {\n  previouslyFocusedElements = previouslyFocusedElements.filter(el => el.isConnected);\n  let tabbableEl = element;\n  if (!tabbableEl || getNodeName(tabbableEl) === 'body') return;\n  if (!isTabbable(tabbableEl, getTabbableOptions())) {\n    const tabbableChild = tabbable(tabbableEl, getTabbableOptions())[0];\n    if (tabbableChild) {\n      tabbableEl = tabbableChild;\n    }\n  }\n  previouslyFocusedElements.push(tabbableEl);\n  if (previouslyFocusedElements.length > LIST_LIMIT) {\n    previouslyFocusedElements = previouslyFocusedElements.slice(-LIST_LIMIT);\n  }\n}\nfunction getPreviouslyFocusedElement() {\n  return previouslyFocusedElements.slice().reverse().find(el => el.isConnected);\n}\nconst VisuallyHiddenDismiss = /*#__PURE__*/React.forwardRef(function VisuallyHiddenDismiss(props, ref) {\n  return /*#__PURE__*/React.createElement(\"button\", _extends({}, props, {\n    type: \"button\",\n    ref: ref,\n    tabIndex: -1,\n    style: HIDDEN_STYLES\n  }));\n});\n/**\n * Provides focus management for the floating element.\n * @see https://floating-ui.com/docs/FloatingFocusManager\n */\nfunction FloatingFocusManager(props) {\n  const {\n    context,\n    children,\n    disabled = false,\n    order = ['content'],\n    guards: _guards = true,\n    initialFocus = 0,\n    returnFocus = true,\n    restoreFocus = false,\n    modal = true,\n    visuallyHiddenDismiss = false,\n    closeOnFocusOut = true\n  } = props;\n  const {\n    open,\n    refs,\n    nodeId,\n    onOpenChange,\n    events,\n    dataRef,\n    floatingId,\n    elements: {\n      domReference,\n      floating\n    }\n  } = context;\n  const ignoreInitialFocus = typeof initialFocus === 'number' && initialFocus < 0;\n  // If the reference is a combobox and is typeable (e.g. input/textarea),\n  // there are different focus semantics. The guards should not be rendered, but\n  // aria-hidden should be applied to all nodes still. Further, the visually\n  // hidden dismiss button should only appear at the end of the list, not the\n  // start.\n  const isUntrappedTypeableCombobox = isTypeableCombobox(domReference) && ignoreInitialFocus;\n\n  // Force the guards to be rendered if the `inert` attribute is not supported.\n  const guards = supportsInert() ? _guards : true;\n  const orderRef = useLatestRef(order);\n  const initialFocusRef = useLatestRef(initialFocus);\n  const returnFocusRef = useLatestRef(returnFocus);\n  const tree = useFloatingTree();\n  const portalContext = usePortalContext();\n  const startDismissButtonRef = React.useRef(null);\n  const endDismissButtonRef = React.useRef(null);\n  const preventReturnFocusRef = React.useRef(false);\n  const isPointerDownRef = React.useRef(false);\n  const tabbableIndexRef = React.useRef(-1);\n  const isInsidePortal = portalContext != null;\n  const firstElementChild = floating == null ? void 0 : floating.firstElementChild;\n  // If the floating element is acting as a positioning wrapper rather than the\n  // element that receives aria props, use it as the focus root instead.\n  const floatingFocusNode = (firstElementChild == null ? void 0 : firstElementChild.id) === floatingId ? firstElementChild : floating;\n  const getTabbableContent = useEffectEvent(function (container) {\n    if (container === void 0) {\n      container = floatingFocusNode;\n    }\n    return container ? tabbable(container, getTabbableOptions()) : [];\n  });\n  const getTabbableElements = useEffectEvent(container => {\n    const content = getTabbableContent(container);\n    return orderRef.current.map(type => {\n      if (domReference && type === 'reference') {\n        return domReference;\n      }\n      if (floatingFocusNode && type === 'floating') {\n        return floatingFocusNode;\n      }\n      return content;\n    }).filter(Boolean).flat();\n  });\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!modal) return;\n    function onKeyDown(event) {\n      if (event.key === 'Tab') {\n        // The focus guards have nothing to focus, so we need to stop the event.\n        if (contains(floatingFocusNode, activeElement(getDocument(floatingFocusNode))) && getTabbableContent().length === 0 && !isUntrappedTypeableCombobox) {\n          stopEvent(event);\n        }\n        const els = getTabbableElements();\n        const target = getTarget(event);\n        if (orderRef.current[0] === 'reference' && target === domReference) {\n          stopEvent(event);\n          if (event.shiftKey) {\n            enqueueFocus(els[els.length - 1]);\n          } else {\n            enqueueFocus(els[1]);\n          }\n        }\n        if (orderRef.current[1] === 'floating' && target === floatingFocusNode && event.shiftKey) {\n          stopEvent(event);\n          enqueueFocus(els[0]);\n        }\n      }\n    }\n    const doc = getDocument(floatingFocusNode);\n    doc.addEventListener('keydown', onKeyDown);\n    return () => {\n      doc.removeEventListener('keydown', onKeyDown);\n    };\n  }, [disabled, domReference, floatingFocusNode, modal, orderRef, isUntrappedTypeableCombobox, getTabbableContent, getTabbableElements]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!floating) return;\n    function handleFocusIn(event) {\n      const target = getTarget(event);\n      const tabbableContent = getTabbableContent();\n      const tabbableIndex = tabbableContent.indexOf(target);\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n    }\n    floating.addEventListener('focusin', handleFocusIn);\n    return () => {\n      floating.removeEventListener('focusin', handleFocusIn);\n    };\n  }, [disabled, floating, getTabbableContent]);\n  React.useEffect(() => {\n    if (disabled) return;\n    if (!closeOnFocusOut) return;\n\n    // In Safari, buttons lose focus when pressing them.\n    function handlePointerDown() {\n      isPointerDownRef.current = true;\n      setTimeout(() => {\n        isPointerDownRef.current = false;\n      });\n    }\n    function handleFocusOutside(event) {\n      const relatedTarget = event.relatedTarget;\n      queueMicrotask(() => {\n        const movedToUnrelatedNode = !(contains(domReference, relatedTarget) || contains(floating, relatedTarget) || contains(relatedTarget, floating) || contains(portalContext == null ? void 0 : portalContext.portalNode, relatedTarget) || relatedTarget != null && relatedTarget.hasAttribute(createAttribute('focus-guard')) || tree && (getChildren(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context, _node$context2;\n          return contains((_node$context = node.context) == null ? void 0 : _node$context.elements.floating, relatedTarget) || contains((_node$context2 = node.context) == null ? void 0 : _node$context2.elements.domReference, relatedTarget);\n        }) || getAncestors(tree.nodesRef.current, nodeId).find(node => {\n          var _node$context3, _node$context4;\n          return ((_node$context3 = node.context) == null ? void 0 : _node$context3.elements.floating) === relatedTarget || ((_node$context4 = node.context) == null ? void 0 : _node$context4.elements.domReference) === relatedTarget;\n        })));\n\n        // Restore focus to the previous tabbable element index to prevent\n        // focus from being lost outside the floating tree.\n        if (restoreFocus && movedToUnrelatedNode && activeElement(getDocument(floatingFocusNode)) === getDocument(floatingFocusNode).body) {\n          // Let `FloatingPortal` effect knows that focus is still inside the\n          // floating tree.\n          if (isHTMLElement(floatingFocusNode)) {\n            floatingFocusNode == null || floatingFocusNode.focus();\n          }\n          const prevTabbableIndex = tabbableIndexRef.current;\n          const tabbableContent = getTabbableContent();\n          const nodeToFocus = tabbableContent[prevTabbableIndex] || tabbableContent[tabbableContent.length - 1] || floatingFocusNode;\n          if (isHTMLElement(nodeToFocus)) {\n            nodeToFocus.focus();\n          }\n        }\n\n        // Focus did not move inside the floating tree, and there are no tabbable\n        // portal guards to handle closing.\n        if ((isUntrappedTypeableCombobox ? true : !modal) && relatedTarget && movedToUnrelatedNode && !isPointerDownRef.current &&\n        // Fix React 18 Strict Mode returnFocus due to double rendering.\n        relatedTarget !== getPreviouslyFocusedElement()) {\n          preventReturnFocusRef.current = true;\n          onOpenChange(false, event);\n        }\n      });\n    }\n    if (floating && isHTMLElement(domReference)) {\n      domReference.addEventListener('focusout', handleFocusOutside);\n      domReference.addEventListener('pointerdown', handlePointerDown);\n      floating.addEventListener('focusout', handleFocusOutside);\n      return () => {\n        domReference.removeEventListener('focusout', handleFocusOutside);\n        domReference.removeEventListener('pointerdown', handlePointerDown);\n        floating.removeEventListener('focusout', handleFocusOutside);\n      };\n    }\n  }, [disabled, domReference, floating, floatingFocusNode, modal, nodeId, tree, portalContext, onOpenChange, closeOnFocusOut, restoreFocus, getTabbableContent, isUntrappedTypeableCombobox]);\n  React.useEffect(() => {\n    var _portalContext$portal;\n    if (disabled) return;\n\n    // Don't hide portals nested within the parent portal.\n    const portalNodes = Array.from((portalContext == null || (_portalContext$portal = portalContext.portalNode) == null ? void 0 : _portalContext$portal.querySelectorAll(\"[\" + createAttribute('portal') + \"]\")) || []);\n    if (floating) {\n      const insideElements = [floating, ...portalNodes, startDismissButtonRef.current, endDismissButtonRef.current, orderRef.current.includes('reference') || isUntrappedTypeableCombobox ? domReference : null].filter(x => x != null);\n      const cleanup = modal || isUntrappedTypeableCombobox ? markOthers(insideElements, guards, !guards) : markOthers(insideElements);\n      return () => {\n        cleanup();\n      };\n    }\n  }, [disabled, domReference, floating, modal, orderRef, portalContext, isUntrappedTypeableCombobox, guards]);\n  index(() => {\n    if (disabled || !isHTMLElement(floatingFocusNode)) return;\n    const doc = getDocument(floatingFocusNode);\n    const previouslyFocusedElement = activeElement(doc);\n\n    // Wait for any layout effect state setters to execute to set `tabIndex`.\n    queueMicrotask(() => {\n      const focusableElements = getTabbableElements(floatingFocusNode);\n      const initialFocusValue = initialFocusRef.current;\n      const elToFocus = (typeof initialFocusValue === 'number' ? focusableElements[initialFocusValue] : initialFocusValue.current) || floatingFocusNode;\n      const focusAlreadyInsideFloatingEl = contains(floatingFocusNode, previouslyFocusedElement);\n      if (!ignoreInitialFocus && !focusAlreadyInsideFloatingEl && open) {\n        enqueueFocus(elToFocus, {\n          preventScroll: elToFocus === floatingFocusNode\n        });\n      }\n    });\n  }, [disabled, open, floatingFocusNode, ignoreInitialFocus, getTabbableElements, initialFocusRef]);\n  index(() => {\n    if (disabled || !floatingFocusNode) return;\n    let preventReturnFocusScroll = false;\n    const doc = getDocument(floatingFocusNode);\n    const previouslyFocusedElement = activeElement(doc);\n    const contextData = dataRef.current;\n    let openEvent = contextData.openEvent;\n    const domReference = refs.domReference.current;\n    addPreviouslyFocusedElement(previouslyFocusedElement);\n\n    // Dismissing via outside press should always ignore `returnFocus` to\n    // prevent unwanted scrolling.\n    function onOpenChange(_ref) {\n      let {\n        open,\n        reason,\n        event,\n        nested\n      } = _ref;\n      if (open) {\n        openEvent = event;\n      }\n      if (reason === 'escape-key' && refs.domReference.current) {\n        addPreviouslyFocusedElement(refs.domReference.current);\n      }\n      if (reason === 'hover' && event.type === 'mouseleave') {\n        preventReturnFocusRef.current = true;\n      }\n      if (reason !== 'outside-press') return;\n      if (nested) {\n        preventReturnFocusRef.current = false;\n        preventReturnFocusScroll = true;\n      } else {\n        preventReturnFocusRef.current = !(isVirtualClick(event) || isVirtualPointerEvent(event));\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n      const activeEl = activeElement(doc);\n      const isFocusInsideFloatingTree = contains(floating, activeEl) || tree && getChildren(tree.nodesRef.current, nodeId).some(node => {\n        var _node$context5;\n        return contains((_node$context5 = node.context) == null ? void 0 : _node$context5.elements.floating, activeEl);\n      });\n      const shouldFocusReference = isFocusInsideFloatingTree || openEvent && ['click', 'mousedown'].includes(openEvent.type);\n      if (shouldFocusReference && refs.domReference.current) {\n        addPreviouslyFocusedElement(refs.domReference.current);\n      }\n      const returnContextElement = domReference || previouslyFocusedElement;\n      const tabbableElements = tabbable(getDocument(returnContextElement).body, getTabbableOptions());\n\n      // Wait for the return element to get potentially disconnected before\n      // checking.\n      queueMicrotask(() => {\n        let returnElement = getPreviouslyFocusedElement();\n        if (!returnElement && isHTMLElement(returnContextElement) && floating) {\n          returnElement = getClosestTabbableElement(tabbableElements, returnContextElement, floating);\n        }\n        if (\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        returnFocusRef.current && !preventReturnFocusRef.current && isHTMLElement(returnElement) && (\n        // If the focus moved somewhere else after mount, avoid returning focus\n        // since it likely entered a different element which should be\n        // respected: https://github.com/floating-ui/floating-ui/issues/2607\n        returnElement !== activeEl && activeEl !== doc.body ? isFocusInsideFloatingTree : true)) {\n          returnElement.focus({\n            preventScroll: preventReturnFocusScroll\n          });\n        }\n      });\n    };\n  }, [disabled, floating, floatingFocusNode, returnFocusRef, dataRef, refs, events, tree, nodeId]);\n\n  // Synchronize the `context` & `modal` value to the FloatingPortal context.\n  // It will decide whether or not it needs to render its own guards.\n  index(() => {\n    if (disabled) return;\n    if (!portalContext) return;\n    portalContext.setFocusManagerState({\n      modal,\n      closeOnFocusOut,\n      open,\n      onOpenChange,\n      refs\n    });\n    return () => {\n      portalContext.setFocusManagerState(null);\n    };\n  }, [disabled, portalContext, modal, open, onOpenChange, refs, closeOnFocusOut]);\n  index(() => {\n    if (disabled) return;\n    if (!floatingFocusNode) return;\n    if (typeof MutationObserver !== 'function') return;\n    if (ignoreInitialFocus) return;\n    const handleMutation = () => {\n      const tabIndex = floatingFocusNode.getAttribute('tabindex');\n      const tabbableContent = getTabbableContent();\n      const activeEl = activeElement(getDocument(floating));\n      const tabbableIndex = tabbableContent.indexOf(activeEl);\n      if (tabbableIndex !== -1) {\n        tabbableIndexRef.current = tabbableIndex;\n      }\n      if (orderRef.current.includes('floating') || activeEl !== refs.domReference.current && tabbableContent.length === 0) {\n        if (tabIndex !== '0') {\n          floatingFocusNode.setAttribute('tabindex', '0');\n        }\n      } else if (tabIndex !== '-1') {\n        floatingFocusNode.setAttribute('tabindex', '-1');\n      }\n    };\n    handleMutation();\n    const observer = new MutationObserver(handleMutation);\n    observer.observe(floatingFocusNode, {\n      childList: true,\n      subtree: true,\n      attributes: true\n    });\n    return () => {\n      observer.disconnect();\n    };\n  }, [disabled, floating, floatingFocusNode, refs, orderRef, getTabbableContent, ignoreInitialFocus]);\n  function renderDismissButton(location) {\n    if (disabled || !visuallyHiddenDismiss || !modal) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(VisuallyHiddenDismiss, {\n      ref: location === 'start' ? startDismissButtonRef : endDismissButtonRef,\n      onClick: event => onOpenChange(false, event.nativeEvent)\n    }, typeof visuallyHiddenDismiss === 'string' ? visuallyHiddenDismiss : 'Dismiss');\n  }\n  const shouldRenderGuards = !disabled && guards && (modal ? !isUntrappedTypeableCombobox : true) && (isInsidePortal || modal);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, shouldRenderGuards && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"inside\",\n    ref: portalContext == null ? void 0 : portalContext.beforeInsideRef,\n    onFocus: event => {\n      if (modal) {\n        const els = getTabbableElements();\n        enqueueFocus(order[0] === 'reference' ? els[0] : els[els.length - 1]);\n      } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n        preventReturnFocusRef.current = false;\n        if (isOutsideEvent(event, portalContext.portalNode)) {\n          const nextTabbable = getNextTabbable() || domReference;\n          nextTabbable == null || nextTabbable.focus();\n        } else {\n          var _portalContext$before;\n          (_portalContext$before = portalContext.beforeOutsideRef.current) == null || _portalContext$before.focus();\n        }\n      }\n    }\n  }), !isUntrappedTypeableCombobox && renderDismissButton('start'), children, renderDismissButton('end'), shouldRenderGuards && /*#__PURE__*/React.createElement(FocusGuard, {\n    \"data-type\": \"inside\",\n    ref: portalContext == null ? void 0 : portalContext.afterInsideRef,\n    onFocus: event => {\n      if (modal) {\n        enqueueFocus(getTabbableElements()[0]);\n      } else if (portalContext != null && portalContext.preserveTabOrder && portalContext.portalNode) {\n        if (closeOnFocusOut) {\n          preventReturnFocusRef.current = true;\n        }\n        if (isOutsideEvent(event, portalContext.portalNode)) {\n          const prevTabbable = getPreviousTabbable() || domReference;\n          prevTabbable == null || prevTabbable.focus();\n        } else {\n          var _portalContext$afterO;\n          (_portalContext$afterO = portalContext.afterOutsideRef.current) == null || _portalContext$afterO.focus();\n        }\n      }\n    }\n  }));\n}\n\nconst activeLocks = /*#__PURE__*/new Set();\n/**\n * Provides base styling for a fixed overlay element to dim content or block\n * pointer events behind a floating element.\n * It's a regular `<div>`, so it can be styled via any CSS solution you prefer.\n * @see https://floating-ui.com/docs/FloatingOverlay\n */\nconst FloatingOverlay = /*#__PURE__*/React.forwardRef(function FloatingOverlay(props, ref) {\n  const {\n    lockScroll = false,\n    ...rest\n  } = props;\n  const lockId = useId();\n  index(() => {\n    if (!lockScroll) return;\n    activeLocks.add(lockId);\n    const isIOS = /iP(hone|ad|od)|iOS/.test(getPlatform());\n    const bodyStyle = document.body.style;\n    // RTL <body> scrollbar\n    const scrollbarX = Math.round(document.documentElement.getBoundingClientRect().left) + document.documentElement.scrollLeft;\n    const paddingProp = scrollbarX ? 'paddingLeft' : 'paddingRight';\n    const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n    const scrollX = bodyStyle.left ? parseFloat(bodyStyle.left) : window.scrollX;\n    const scrollY = bodyStyle.top ? parseFloat(bodyStyle.top) : window.scrollY;\n    bodyStyle.overflow = 'hidden';\n    if (scrollbarWidth) {\n      bodyStyle[paddingProp] = scrollbarWidth + \"px\";\n    }\n\n    // Only iOS doesn't respect `overflow: hidden` on document.body, and this\n    // technique has fewer side effects.\n    if (isIOS) {\n      var _window$visualViewpor, _window$visualViewpor2;\n      // iOS 12 does not support `visualViewport`.\n      const offsetLeft = ((_window$visualViewpor = window.visualViewport) == null ? void 0 : _window$visualViewpor.offsetLeft) || 0;\n      const offsetTop = ((_window$visualViewpor2 = window.visualViewport) == null ? void 0 : _window$visualViewpor2.offsetTop) || 0;\n      Object.assign(bodyStyle, {\n        position: 'fixed',\n        top: -(scrollY - Math.floor(offsetTop)) + \"px\",\n        left: -(scrollX - Math.floor(offsetLeft)) + \"px\",\n        right: '0'\n      });\n    }\n    return () => {\n      activeLocks.delete(lockId);\n      if (activeLocks.size === 0) {\n        Object.assign(bodyStyle, {\n          overflow: '',\n          [paddingProp]: ''\n        });\n        if (isIOS) {\n          Object.assign(bodyStyle, {\n            position: '',\n            top: '',\n            left: '',\n            right: ''\n          });\n          window.scrollTo(scrollX, scrollY);\n        }\n      }\n    };\n  }, [lockId, lockScroll]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: ref\n  }, rest, {\n    style: {\n      position: 'fixed',\n      overflow: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      ...rest.style\n    }\n  }));\n});\n\nfunction isButtonTarget(event) {\n  return isHTMLElement(event.target) && event.target.tagName === 'BUTTON';\n}\nfunction isSpaceIgnored(element) {\n  return isTypeableElement(element);\n}\n/**\n * Opens or closes the floating element when clicking the reference element.\n * @see https://floating-ui.com/docs/useClick\n */\nfunction useClick(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    dataRef,\n    elements: {\n      domReference\n    }\n  } = context;\n  const {\n    enabled = true,\n    event: eventOption = 'click',\n    toggle = true,\n    ignoreMouse = false,\n    keyboardHandlers = true\n  } = props;\n  const pointerTypeRef = React.useRef();\n  const didKeyDownRef = React.useRef(false);\n  const reference = React.useMemo(() => ({\n    onPointerDown(event) {\n      pointerTypeRef.current = event.pointerType;\n    },\n    onMouseDown(event) {\n      const pointerType = pointerTypeRef.current;\n\n      // Ignore all buttons except for the \"main\" button.\n      // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n      if (event.button !== 0) return;\n      if (eventOption === 'click') return;\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'mousedown' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        // Prevent stealing focus from the floating element\n        event.preventDefault();\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onClick(event) {\n      const pointerType = pointerTypeRef.current;\n      if (eventOption === 'mousedown' && pointerTypeRef.current) {\n        pointerTypeRef.current = undefined;\n        return;\n      }\n      if (isMouseLikePointerType(pointerType, true) && ignoreMouse) return;\n      if (open && toggle && (dataRef.current.openEvent ? dataRef.current.openEvent.type === 'click' : true)) {\n        onOpenChange(false, event.nativeEvent, 'click');\n      } else {\n        onOpenChange(true, event.nativeEvent, 'click');\n      }\n    },\n    onKeyDown(event) {\n      pointerTypeRef.current = undefined;\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event)) {\n        return;\n      }\n      if (event.key === ' ' && !isSpaceIgnored(domReference)) {\n        // Prevent scrolling\n        event.preventDefault();\n        didKeyDownRef.current = true;\n      }\n      if (event.key === 'Enter') {\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    },\n    onKeyUp(event) {\n      if (event.defaultPrevented || !keyboardHandlers || isButtonTarget(event) || isSpaceIgnored(domReference)) {\n        return;\n      }\n      if (event.key === ' ' && didKeyDownRef.current) {\n        didKeyDownRef.current = false;\n        if (open && toggle) {\n          onOpenChange(false, event.nativeEvent, 'click');\n        } else {\n          onOpenChange(true, event.nativeEvent, 'click');\n        }\n      }\n    }\n  }), [dataRef, domReference, eventOption, ignoreMouse, keyboardHandlers, onOpenChange, open, toggle]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nfunction createVirtualElement(domElement, data) {\n  let offsetX = null;\n  let offsetY = null;\n  let isAutoUpdateEvent = false;\n  return {\n    contextElement: domElement || undefined,\n    getBoundingClientRect() {\n      var _data$dataRef$current;\n      const domRect = (domElement == null ? void 0 : domElement.getBoundingClientRect()) || {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      };\n      const isXAxis = data.axis === 'x' || data.axis === 'both';\n      const isYAxis = data.axis === 'y' || data.axis === 'both';\n      const canTrackCursorOnAutoUpdate = ['mouseenter', 'mousemove'].includes(((_data$dataRef$current = data.dataRef.current.openEvent) == null ? void 0 : _data$dataRef$current.type) || '') && data.pointerType !== 'touch';\n      let width = domRect.width;\n      let height = domRect.height;\n      let x = domRect.x;\n      let y = domRect.y;\n      if (offsetX == null && data.x && isXAxis) {\n        offsetX = domRect.x - data.x;\n      }\n      if (offsetY == null && data.y && isYAxis) {\n        offsetY = domRect.y - data.y;\n      }\n      x -= offsetX || 0;\n      y -= offsetY || 0;\n      width = 0;\n      height = 0;\n      if (!isAutoUpdateEvent || canTrackCursorOnAutoUpdate) {\n        width = data.axis === 'y' ? domRect.width : 0;\n        height = data.axis === 'x' ? domRect.height : 0;\n        x = isXAxis && data.x != null ? data.x : x;\n        y = isYAxis && data.y != null ? data.y : y;\n      } else if (isAutoUpdateEvent && !canTrackCursorOnAutoUpdate) {\n        height = data.axis === 'x' ? domRect.height : height;\n        width = data.axis === 'y' ? domRect.width : width;\n      }\n      isAutoUpdateEvent = true;\n      return {\n        width,\n        height,\n        x,\n        y,\n        top: y,\n        right: x + width,\n        bottom: y + height,\n        left: x\n      };\n    }\n  };\n}\nfunction isMouseBasedEvent(event) {\n  return event != null && event.clientX != null;\n}\n/**\n * Positions the floating element relative to a client point (in the viewport),\n * such as the mouse position. By default, it follows the mouse cursor.\n * @see https://floating-ui.com/docs/useClientPoint\n */\nfunction useClientPoint(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    dataRef,\n    elements: {\n      floating,\n      domReference\n    },\n    refs\n  } = context;\n  const {\n    enabled = true,\n    axis = 'both',\n    x = null,\n    y = null\n  } = props;\n  const initialRef = React.useRef(false);\n  const cleanupListenerRef = React.useRef(null);\n  const [pointerType, setPointerType] = React.useState();\n  const [reactive, setReactive] = React.useState([]);\n  const setReference = useEffectEvent((x, y) => {\n    if (initialRef.current) return;\n\n    // Prevent setting if the open event was not a mouse-like one\n    // (e.g. focus to open, then hover over the reference element).\n    // Only apply if the event exists.\n    if (dataRef.current.openEvent && !isMouseBasedEvent(dataRef.current.openEvent)) {\n      return;\n    }\n    refs.setPositionReference(createVirtualElement(domReference, {\n      x,\n      y,\n      axis,\n      dataRef,\n      pointerType\n    }));\n  });\n  const handleReferenceEnterOrMove = useEffectEvent(event => {\n    if (x != null || y != null) return;\n    if (!open) {\n      setReference(event.clientX, event.clientY);\n    } else if (!cleanupListenerRef.current) {\n      // If there's no cleanup, there's no listener, but we want to ensure\n      // we add the listener if the cursor landed on the floating element and\n      // then back on the reference (i.e. it's interactive).\n      setReactive([]);\n    }\n  });\n\n  // If the pointer is a mouse-like pointer, we want to continue following the\n  // mouse even if the floating element is transitioning out. On touch\n  // devices, this is undesirable because the floating element will move to\n  // the dismissal touch point.\n  const openCheck = isMouseLikePointerType(pointerType) ? floating : open;\n  const addListener = React.useCallback(() => {\n    // Explicitly specified `x`/`y` coordinates shouldn't add a listener.\n    if (!openCheck || !enabled || x != null || y != null) return;\n    const win = getWindow(floating);\n    function handleMouseMove(event) {\n      const target = getTarget(event);\n      if (!contains(floating, target)) {\n        setReference(event.clientX, event.clientY);\n      } else {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      }\n    }\n    if (!dataRef.current.openEvent || isMouseBasedEvent(dataRef.current.openEvent)) {\n      win.addEventListener('mousemove', handleMouseMove);\n      const cleanup = () => {\n        win.removeEventListener('mousemove', handleMouseMove);\n        cleanupListenerRef.current = null;\n      };\n      cleanupListenerRef.current = cleanup;\n      return cleanup;\n    }\n    refs.setPositionReference(domReference);\n  }, [openCheck, enabled, x, y, floating, dataRef, refs, domReference, setReference]);\n  React.useEffect(() => {\n    return addListener();\n  }, [addListener, reactive]);\n  React.useEffect(() => {\n    if (enabled && !floating) {\n      initialRef.current = false;\n    }\n  }, [enabled, floating]);\n  React.useEffect(() => {\n    if (!enabled && open) {\n      initialRef.current = true;\n    }\n  }, [enabled, open]);\n  index(() => {\n    if (enabled && (x != null || y != null)) {\n      initialRef.current = false;\n      setReference(x, y);\n    }\n  }, [enabled, x, y, setReference]);\n  const reference = React.useMemo(() => {\n    function setPointerTypeRef(_ref) {\n      let {\n        pointerType\n      } = _ref;\n      setPointerType(pointerType);\n    }\n    return {\n      onPointerDown: setPointerTypeRef,\n      onPointerEnter: setPointerTypeRef,\n      onMouseMove: handleReferenceEnterOrMove,\n      onMouseEnter: handleReferenceEnterOrMove\n    };\n  }, [handleReferenceEnterOrMove]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst bubbleHandlerKeys = {\n  pointerdown: 'onPointerDown',\n  mousedown: 'onMouseDown',\n  click: 'onClick'\n};\nconst captureHandlerKeys = {\n  pointerdown: 'onPointerDownCapture',\n  mousedown: 'onMouseDownCapture',\n  click: 'onClickCapture'\n};\nconst normalizeProp = normalizable => {\n  var _normalizable$escapeK, _normalizable$outside;\n  return {\n    escapeKey: typeof normalizable === 'boolean' ? normalizable : (_normalizable$escapeK = normalizable == null ? void 0 : normalizable.escapeKey) != null ? _normalizable$escapeK : false,\n    outsidePress: typeof normalizable === 'boolean' ? normalizable : (_normalizable$outside = normalizable == null ? void 0 : normalizable.outsidePress) != null ? _normalizable$outside : true\n  };\n};\n/**\n * Closes the floating element when a dismissal is requested — by default, when\n * the user presses the `escape` key or outside of the floating element.\n * @see https://floating-ui.com/docs/useDismiss\n */\nfunction useDismiss(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    elements,\n    dataRef\n  } = context;\n  const {\n    enabled = true,\n    escapeKey = true,\n    outsidePress: unstable_outsidePress = true,\n    outsidePressEvent = 'pointerdown',\n    referencePress = false,\n    referencePressEvent = 'pointerdown',\n    ancestorScroll = false,\n    bubbles,\n    capture\n  } = props;\n  const tree = useFloatingTree();\n  const outsidePressFn = useEffectEvent(typeof unstable_outsidePress === 'function' ? unstable_outsidePress : () => false);\n  const outsidePress = typeof unstable_outsidePress === 'function' ? outsidePressFn : unstable_outsidePress;\n  const insideReactTreeRef = React.useRef(false);\n  const endedOrStartedInsideRef = React.useRef(false);\n  const {\n    escapeKey: escapeKeyBubbles,\n    outsidePress: outsidePressBubbles\n  } = normalizeProp(bubbles);\n  const {\n    escapeKey: escapeKeyCapture,\n    outsidePress: outsidePressCapture\n  } = normalizeProp(capture);\n  const closeOnEscapeKeyDown = useEffectEvent(event => {\n    var _dataRef$current$floa;\n    if (!open || !enabled || !escapeKey || event.key !== 'Escape') {\n      return;\n    }\n    const nodeId = (_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.nodeId;\n    const children = tree ? getChildren(tree.nodesRef.current, nodeId) : [];\n    if (!escapeKeyBubbles) {\n      event.stopPropagation();\n      if (children.length > 0) {\n        let shouldDismiss = true;\n        children.forEach(child => {\n          var _child$context;\n          if ((_child$context = child.context) != null && _child$context.open && !child.context.dataRef.current.__escapeKeyBubbles) {\n            shouldDismiss = false;\n            return;\n          }\n        });\n        if (!shouldDismiss) {\n          return;\n        }\n      }\n    }\n    onOpenChange(false, isReactEvent(event) ? event.nativeEvent : event, 'escape-key');\n  });\n  const closeOnEscapeKeyDownCapture = useEffectEvent(event => {\n    var _getTarget2;\n    const callback = () => {\n      var _getTarget;\n      closeOnEscapeKeyDown(event);\n      (_getTarget = getTarget(event)) == null || _getTarget.removeEventListener('keydown', callback);\n    };\n    (_getTarget2 = getTarget(event)) == null || _getTarget2.addEventListener('keydown', callback);\n  });\n  const closeOnPressOutside = useEffectEvent(event => {\n    var _dataRef$current$floa2;\n    // Given developers can stop the propagation of the synthetic event,\n    // we can only be confident with a positive value.\n    const insideReactTree = insideReactTreeRef.current;\n    insideReactTreeRef.current = false;\n\n    // When click outside is lazy (`click` event), handle dragging.\n    // Don't close if:\n    // - The click started inside the floating element.\n    // - The click ended inside the floating element.\n    const endedOrStartedInside = endedOrStartedInsideRef.current;\n    endedOrStartedInsideRef.current = false;\n    if (outsidePressEvent === 'click' && endedOrStartedInside) {\n      return;\n    }\n    if (insideReactTree) {\n      return;\n    }\n    if (typeof outsidePress === 'function' && !outsidePress(event)) {\n      return;\n    }\n    const target = getTarget(event);\n    const inertSelector = \"[\" + createAttribute('inert') + \"]\";\n    const markers = getDocument(elements.floating).querySelectorAll(inertSelector);\n    let targetRootAncestor = isElement(target) ? target : null;\n    while (targetRootAncestor && !isLastTraversableNode(targetRootAncestor)) {\n      const nextParent = getParentNode(targetRootAncestor);\n      if (isLastTraversableNode(nextParent) || !isElement(nextParent)) {\n        break;\n      }\n      targetRootAncestor = nextParent;\n    }\n\n    // Check if the click occurred on a third-party element injected after the\n    // floating element rendered.\n    if (markers.length && isElement(target) && !isRootElement(target) &&\n    // Clicked on a direct ancestor (e.g. FloatingOverlay).\n    !contains(target, elements.floating) &&\n    // If the target root element contains none of the markers, then the\n    // element was injected after the floating element rendered.\n    Array.from(markers).every(marker => !contains(targetRootAncestor, marker))) {\n      return;\n    }\n\n    // Check if the click occurred on the scrollbar\n    if (isHTMLElement(target) && floating) {\n      // In Firefox, `target.scrollWidth > target.clientWidth` for inline\n      // elements.\n      const canScrollX = target.clientWidth > 0 && target.scrollWidth > target.clientWidth;\n      const canScrollY = target.clientHeight > 0 && target.scrollHeight > target.clientHeight;\n      let xCond = canScrollY && event.offsetX > target.clientWidth;\n\n      // In some browsers it is possible to change the <body> (or window)\n      // scrollbar to the left side, but is very rare and is difficult to\n      // check for. Plus, for modal dialogs with backdrops, it is more\n      // important that the backdrop is checked but not so much the window.\n      if (canScrollY) {\n        const isRTL = getComputedStyle(target).direction === 'rtl';\n        if (isRTL) {\n          xCond = event.offsetX <= target.offsetWidth - target.clientWidth;\n        }\n      }\n      if (xCond || canScrollX && event.offsetY > target.clientHeight) {\n        return;\n      }\n    }\n    const nodeId = (_dataRef$current$floa2 = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa2.nodeId;\n    const targetIsInsideChildren = tree && getChildren(tree.nodesRef.current, nodeId).some(node => {\n      var _node$context;\n      return isEventTargetWithin(event, (_node$context = node.context) == null ? void 0 : _node$context.elements.floating);\n    });\n    if (isEventTargetWithin(event, elements.floating) || isEventTargetWithin(event, elements.domReference) || targetIsInsideChildren) {\n      return;\n    }\n    const children = tree ? getChildren(tree.nodesRef.current, nodeId) : [];\n    if (children.length > 0) {\n      let shouldDismiss = true;\n      children.forEach(child => {\n        var _child$context2;\n        if ((_child$context2 = child.context) != null && _child$context2.open && !child.context.dataRef.current.__outsidePressBubbles) {\n          shouldDismiss = false;\n          return;\n        }\n      });\n      if (!shouldDismiss) {\n        return;\n      }\n    }\n    onOpenChange(false, event, 'outside-press');\n  });\n  const closeOnPressOutsideCapture = useEffectEvent(event => {\n    var _getTarget4;\n    const callback = () => {\n      var _getTarget3;\n      closeOnPressOutside(event);\n      (_getTarget3 = getTarget(event)) == null || _getTarget3.removeEventListener(outsidePressEvent, callback);\n    };\n    (_getTarget4 = getTarget(event)) == null || _getTarget4.addEventListener(outsidePressEvent, callback);\n  });\n  React.useEffect(() => {\n    if (!open || !enabled) {\n      return;\n    }\n    dataRef.current.__escapeKeyBubbles = escapeKeyBubbles;\n    dataRef.current.__outsidePressBubbles = outsidePressBubbles;\n    function onScroll(event) {\n      onOpenChange(false, event, 'ancestor-scroll');\n    }\n    const doc = getDocument(elements.floating);\n    escapeKey && doc.addEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n    outsidePress && doc.addEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n    let ancestors = [];\n    if (ancestorScroll) {\n      if (isElement(elements.domReference)) {\n        ancestors = getOverflowAncestors(elements.domReference);\n      }\n      if (isElement(elements.floating)) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.floating));\n      }\n      if (!isElement(elements.reference) && elements.reference && elements.reference.contextElement) {\n        ancestors = ancestors.concat(getOverflowAncestors(elements.reference.contextElement));\n      }\n    }\n\n    // Ignore the visual viewport for scrolling dismissal (allow pinch-zoom)\n    ancestors = ancestors.filter(ancestor => {\n      var _doc$defaultView;\n      return ancestor !== ((_doc$defaultView = doc.defaultView) == null ? void 0 : _doc$defaultView.visualViewport);\n    });\n    ancestors.forEach(ancestor => {\n      ancestor.addEventListener('scroll', onScroll, {\n        passive: true\n      });\n    });\n    return () => {\n      escapeKey && doc.removeEventListener('keydown', escapeKeyCapture ? closeOnEscapeKeyDownCapture : closeOnEscapeKeyDown, escapeKeyCapture);\n      outsidePress && doc.removeEventListener(outsidePressEvent, outsidePressCapture ? closeOnPressOutsideCapture : closeOnPressOutside, outsidePressCapture);\n      ancestors.forEach(ancestor => {\n        ancestor.removeEventListener('scroll', onScroll);\n      });\n    };\n  }, [dataRef, elements, escapeKey, outsidePress, outsidePressEvent, open, onOpenChange, ancestorScroll, enabled, escapeKeyBubbles, outsidePressBubbles, closeOnEscapeKeyDown, escapeKeyCapture, closeOnEscapeKeyDownCapture, closeOnPressOutside, outsidePressCapture, closeOnPressOutsideCapture]);\n  React.useEffect(() => {\n    insideReactTreeRef.current = false;\n  }, [outsidePress, outsidePressEvent]);\n  const reference = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    [bubbleHandlerKeys[referencePressEvent]]: event => {\n      if (referencePress) {\n        onOpenChange(false, event.nativeEvent, 'reference-press');\n      }\n    }\n  }), [closeOnEscapeKeyDown, onOpenChange, referencePress, referencePressEvent]);\n  const floating = React.useMemo(() => ({\n    onKeyDown: closeOnEscapeKeyDown,\n    onMouseDown() {\n      endedOrStartedInsideRef.current = true;\n    },\n    onMouseUp() {\n      endedOrStartedInsideRef.current = true;\n    },\n    [captureHandlerKeys[outsidePressEvent]]: () => {\n      insideReactTreeRef.current = true;\n    }\n  }), [closeOnEscapeKeyDown, outsidePressEvent]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction useFloatingRootContext(options) {\n  const {\n    open = false,\n    onOpenChange: onOpenChangeProp,\n    elements: elementsProp\n  } = options;\n  const floatingId = useId();\n  const dataRef = React.useRef({});\n  const [events] = React.useState(() => createPubSub());\n  const nested = useFloatingParentNodeId() != null;\n  if (process.env.NODE_ENV !== \"production\") {\n    const optionDomReference = elementsProp.reference;\n    if (optionDomReference && !isElement(optionDomReference)) {\n      error('Cannot pass a virtual element to the `elements.reference` option,', 'as it must be a real DOM element. Use `refs.setPositionReference()`', 'instead.');\n    }\n  }\n  const [positionReference, setPositionReference] = React.useState(elementsProp.reference);\n  const onOpenChange = useEffectEvent((open, event, reason) => {\n    dataRef.current.openEvent = open ? event : undefined;\n    events.emit('openchange', {\n      open,\n      event,\n      reason,\n      nested\n    });\n    onOpenChangeProp == null || onOpenChangeProp(open, event, reason);\n  });\n  const refs = React.useMemo(() => ({\n    setPositionReference\n  }), []);\n  const elements = React.useMemo(() => ({\n    reference: positionReference || elementsProp.reference || null,\n    floating: elementsProp.floating || null,\n    domReference: elementsProp.reference\n  }), [positionReference, elementsProp.reference, elementsProp.floating]);\n  return React.useMemo(() => ({\n    dataRef,\n    open,\n    onOpenChange,\n    elements,\n    events,\n    floatingId,\n    refs\n  }), [open, onOpenChange, elements, events, floatingId, refs]);\n}\n\n/**\n * Provides data to position a floating element and context to add interactions.\n * @see https://floating-ui.com/docs/useFloating\n */\nfunction useFloating(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    nodeId\n  } = options;\n  const internalRootContext = useFloatingRootContext({\n    ...options,\n    elements: {\n      reference: null,\n      floating: null,\n      ...options.elements\n    }\n  });\n  const rootContext = options.rootContext || internalRootContext;\n  const computedElements = rootContext.elements;\n  const [_domReference, setDomReference] = React.useState(null);\n  const [positionReference, _setPositionReference] = React.useState(null);\n  const optionDomReference = computedElements == null ? void 0 : computedElements.reference;\n  const domReference = optionDomReference || _domReference;\n  const domReferenceRef = React.useRef(null);\n  const tree = useFloatingTree();\n  index(() => {\n    if (domReference) {\n      domReferenceRef.current = domReference;\n    }\n  }, [domReference]);\n  const position = useFloating$1({\n    ...options,\n    elements: {\n      ...computedElements,\n      ...(positionReference && {\n        reference: positionReference\n      })\n    }\n  });\n  const setPositionReference = React.useCallback(node => {\n    const computedPositionReference = isElement(node) ? {\n      getBoundingClientRect: () => node.getBoundingClientRect(),\n      contextElement: node\n    } : node;\n    // Store the positionReference in state if the DOM reference is specified externally via the\n    // `elements.reference` option. This ensures that it won't be overridden on future renders.\n    _setPositionReference(computedPositionReference);\n    position.refs.setReference(computedPositionReference);\n  }, [position.refs]);\n  const setReference = React.useCallback(node => {\n    if (isElement(node) || node === null) {\n      domReferenceRef.current = node;\n      setDomReference(node);\n    }\n\n    // Backwards-compatibility for passing a virtual element to `reference`\n    // after it has set the DOM reference.\n    if (isElement(position.refs.reference.current) || position.refs.reference.current === null ||\n    // Don't allow setting virtual elements using the old technique back to\n    // `null` to support `positionReference` + an unstable `reference`\n    // callback ref.\n    node !== null && !isElement(node)) {\n      position.refs.setReference(node);\n    }\n  }, [position.refs]);\n  const refs = React.useMemo(() => ({\n    ...position.refs,\n    setReference,\n    setPositionReference,\n    domReference: domReferenceRef\n  }), [position.refs, setReference, setPositionReference]);\n  const elements = React.useMemo(() => ({\n    ...position.elements,\n    domReference: domReference\n  }), [position.elements, domReference]);\n  const context = React.useMemo(() => ({\n    ...position,\n    ...rootContext,\n    refs,\n    elements,\n    nodeId\n  }), [position, refs, elements, nodeId, rootContext]);\n  index(() => {\n    rootContext.dataRef.current.floatingContext = context;\n    const node = tree == null ? void 0 : tree.nodesRef.current.find(node => node.id === nodeId);\n    if (node) {\n      node.context = context;\n    }\n  });\n  return React.useMemo(() => ({\n    ...position,\n    context,\n    refs,\n    elements\n  }), [position, refs, elements, context]);\n}\n\n/**\n * Opens the floating element while the reference element has focus, like CSS\n * `:focus`.\n * @see https://floating-ui.com/docs/useFocus\n */\nfunction useFocus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    onOpenChange,\n    events,\n    dataRef,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    visibleOnly = true\n  } = props;\n  const blockFocusRef = React.useRef(false);\n  const timeoutRef = React.useRef();\n  const keyboardModalityRef = React.useRef(true);\n  React.useEffect(() => {\n    if (!enabled) return;\n    const win = getWindow(elements.domReference);\n\n    // If the reference was focused and the user left the tab/window, and the\n    // floating element was not open, the focus should be blocked when they\n    // return to the tab/window.\n    function onBlur() {\n      if (!open && isHTMLElement(elements.domReference) && elements.domReference === activeElement(getDocument(elements.domReference))) {\n        blockFocusRef.current = true;\n      }\n    }\n    function onKeyDown() {\n      keyboardModalityRef.current = true;\n    }\n    win.addEventListener('blur', onBlur);\n    win.addEventListener('keydown', onKeyDown, true);\n    return () => {\n      win.removeEventListener('blur', onBlur);\n      win.removeEventListener('keydown', onKeyDown, true);\n    };\n  }, [elements.domReference, open, enabled]);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onOpenChange(_ref) {\n      let {\n        reason\n      } = _ref;\n      if (reason === 'reference-press' || reason === 'escape-key') {\n        blockFocusRef.current = true;\n      }\n    }\n    events.on('openchange', onOpenChange);\n    return () => {\n      events.off('openchange', onOpenChange);\n    };\n  }, [events, enabled]);\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(timeoutRef.current);\n    };\n  }, []);\n  const reference = React.useMemo(() => ({\n    onPointerDown(event) {\n      if (isVirtualPointerEvent(event.nativeEvent)) return;\n      keyboardModalityRef.current = false;\n    },\n    onMouseLeave() {\n      blockFocusRef.current = false;\n    },\n    onFocus(event) {\n      if (blockFocusRef.current) return;\n      const target = getTarget(event.nativeEvent);\n      if (visibleOnly && isElement(target)) {\n        try {\n          // Mac Safari unreliably matches `:focus-visible` on the reference\n          // if focus was outside the page initially - use the fallback\n          // instead.\n          if (isSafari() && isMac()) throw Error();\n          if (!target.matches(':focus-visible')) return;\n        } catch (e) {\n          // Old browsers will throw an error when using `:focus-visible`.\n          if (!keyboardModalityRef.current && !isTypeableElement(target)) {\n            return;\n          }\n        }\n      }\n      onOpenChange(true, event.nativeEvent, 'focus');\n    },\n    onBlur(event) {\n      blockFocusRef.current = false;\n      const relatedTarget = event.relatedTarget;\n      const nativeEvent = event.nativeEvent;\n\n      // Hit the non-modal focus management portal guard. Focus will be\n      // moved into the floating element immediately after.\n      const movedToFocusGuard = isElement(relatedTarget) && relatedTarget.hasAttribute(createAttribute('focus-guard')) && relatedTarget.getAttribute('data-type') === 'outside';\n\n      // Wait for the window blur listener to fire.\n      timeoutRef.current = window.setTimeout(() => {\n        var _dataRef$current$floa;\n        const activeEl = activeElement(elements.domReference ? elements.domReference.ownerDocument : document);\n\n        // Focus left the page, keep it open.\n        if (!relatedTarget && activeEl === elements.domReference) return;\n\n        // When focusing the reference element (e.g. regular click), then\n        // clicking into the floating element, prevent it from hiding.\n        // Note: it must be focusable, e.g. `tabindex=\"-1\"`.\n        // We can not rely on relatedTarget to point to the correct element\n        // as it will only point to the shadow host of the newly focused element\n        // and not the element that actually has received focus if it is located\n        // inside a shadow root.\n        if (contains((_dataRef$current$floa = dataRef.current.floatingContext) == null ? void 0 : _dataRef$current$floa.refs.floating.current, activeEl) || contains(elements.domReference, activeEl) || movedToFocusGuard) {\n          return;\n        }\n        onOpenChange(false, nativeEvent, 'focus');\n      });\n    }\n  }), [dataRef, elements.domReference, onOpenChange, visibleOnly]);\n  return React.useMemo(() => enabled ? {\n    reference\n  } : {}, [enabled, reference]);\n}\n\nconst ACTIVE_KEY = 'active';\nconst SELECTED_KEY = 'selected';\nfunction mergeProps(userProps, propsList, elementKey) {\n  const map = new Map();\n  const isItem = elementKey === 'item';\n  let domUserProps = userProps;\n  if (isItem && userProps) {\n    const {\n      [ACTIVE_KEY]: _,\n      [SELECTED_KEY]: __,\n      ...validProps\n    } = userProps;\n    domUserProps = validProps;\n  }\n  return {\n    ...(elementKey === 'floating' && {\n      tabIndex: -1\n    }),\n    ...domUserProps,\n    ...propsList.map(value => {\n      const propsOrGetProps = value ? value[elementKey] : null;\n      if (typeof propsOrGetProps === 'function') {\n        return userProps ? propsOrGetProps(userProps) : null;\n      }\n      return propsOrGetProps;\n    }).concat(userProps).reduce((acc, props) => {\n      if (!props) {\n        return acc;\n      }\n      Object.entries(props).forEach(_ref => {\n        let [key, value] = _ref;\n        if (isItem && [ACTIVE_KEY, SELECTED_KEY].includes(key)) {\n          return;\n        }\n        if (key.indexOf('on') === 0) {\n          if (!map.has(key)) {\n            map.set(key, []);\n          }\n          if (typeof value === 'function') {\n            var _map$get;\n            (_map$get = map.get(key)) == null || _map$get.push(value);\n            acc[key] = function () {\n              var _map$get2;\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n              return (_map$get2 = map.get(key)) == null ? void 0 : _map$get2.map(fn => fn(...args)).find(val => val !== undefined);\n            };\n          }\n        } else {\n          acc[key] = value;\n        }\n      });\n      return acc;\n    }, {})\n  };\n}\n/**\n * Merges an array of interaction hooks' props into prop getters, allowing\n * event handler functions to be composed together without overwriting one\n * another.\n * @see https://floating-ui.com/docs/useInteractions\n */\nfunction useInteractions(propsList) {\n  if (propsList === void 0) {\n    propsList = [];\n  }\n  const referenceDeps = propsList.map(key => key == null ? void 0 : key.reference);\n  const floatingDeps = propsList.map(key => key == null ? void 0 : key.floating);\n  const itemDeps = propsList.map(key => key == null ? void 0 : key.item);\n  const getReferenceProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'reference'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  referenceDeps);\n  const getFloatingProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'floating'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  floatingDeps);\n  const getItemProps = React.useCallback(userProps => mergeProps(userProps, propsList, 'item'),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  itemDeps);\n  return React.useMemo(() => ({\n    getReferenceProps,\n    getFloatingProps,\n    getItemProps\n  }), [getReferenceProps, getFloatingProps, getItemProps]);\n}\n\nlet isPreventScrollSupported = false;\nfunction doSwitch(orientation, vertical, horizontal) {\n  switch (orientation) {\n    case 'vertical':\n      return vertical;\n    case 'horizontal':\n      return horizontal;\n    default:\n      return vertical || horizontal;\n  }\n}\nfunction isMainOrientationKey(key, orientation) {\n  const vertical = key === ARROW_UP || key === ARROW_DOWN;\n  const horizontal = key === ARROW_LEFT || key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isMainOrientationToEndKey(key, orientation, rtl) {\n  const vertical = key === ARROW_DOWN;\n  const horizontal = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  return doSwitch(orientation, vertical, horizontal) || key === 'Enter' || key === ' ' || key === '';\n}\nfunction isCrossOrientationOpenKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_LEFT : key === ARROW_RIGHT;\n  const horizontal = key === ARROW_DOWN;\n  return doSwitch(orientation, vertical, horizontal);\n}\nfunction isCrossOrientationCloseKey(key, orientation, rtl) {\n  const vertical = rtl ? key === ARROW_RIGHT : key === ARROW_LEFT;\n  const horizontal = key === ARROW_UP;\n  return doSwitch(orientation, vertical, horizontal);\n}\n/**\n * Adds arrow key-based navigation of a list of items, either using real DOM\n * focus or virtual focus.\n * @see https://floating-ui.com/docs/useListNavigation\n */\nfunction useListNavigation(context, props) {\n  const {\n    open,\n    onOpenChange,\n    elements\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onNavigate: unstable_onNavigate = () => {},\n    enabled = true,\n    selectedIndex = null,\n    allowEscape = false,\n    loop = false,\n    nested = false,\n    rtl = false,\n    virtual = false,\n    focusItemOnOpen = 'auto',\n    focusItemOnHover = true,\n    openOnArrowKeyDown = true,\n    disabledIndices = undefined,\n    orientation = 'vertical',\n    cols = 1,\n    scrollItemIntoView = true,\n    virtualItemRef,\n    itemSizes,\n    dense = false\n  } = props;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (allowEscape) {\n      if (!loop) {\n        warn('`useListNavigation` looping must be enabled to allow escaping.');\n      }\n      if (!virtual) {\n        warn('`useListNavigation` must be virtual to allow escaping.');\n      }\n    }\n    if (orientation === 'vertical' && cols > 1) {\n      warn('In grid list navigation mode (`cols` > 1), the `orientation` should', 'be either \"horizontal\" or \"both\".');\n    }\n  }\n  const parentId = useFloatingParentNodeId();\n  const tree = useFloatingTree();\n  const onNavigate = useEffectEvent(unstable_onNavigate);\n  const focusItemOnOpenRef = React.useRef(focusItemOnOpen);\n  const indexRef = React.useRef(selectedIndex != null ? selectedIndex : -1);\n  const keyRef = React.useRef(null);\n  const isPointerModalityRef = React.useRef(true);\n  const previousOnNavigateRef = React.useRef(onNavigate);\n  const previousMountedRef = React.useRef(!!elements.floating);\n  const previousOpenRef = React.useRef(open);\n  const forceSyncFocus = React.useRef(false);\n  const forceScrollIntoViewRef = React.useRef(false);\n  const disabledIndicesRef = useLatestRef(disabledIndices);\n  const latestOpenRef = useLatestRef(open);\n  const scrollItemIntoViewRef = useLatestRef(scrollItemIntoView);\n  const floatingRef = useLatestRef(elements.floating);\n  const selectedIndexRef = useLatestRef(selectedIndex);\n  const [activeId, setActiveId] = React.useState();\n  const [virtualId, setVirtualId] = React.useState();\n  const focusItem = useEffectEvent(function (listRef, indexRef, forceScrollIntoView) {\n    if (forceScrollIntoView === void 0) {\n      forceScrollIntoView = false;\n    }\n    function runFocus(item) {\n      if (virtual) {\n        setActiveId(item.id);\n        tree == null || tree.events.emit('virtualfocus', item);\n        if (virtualItemRef) {\n          virtualItemRef.current = item;\n        }\n      } else {\n        enqueueFocus(item, {\n          preventScroll: true,\n          // Mac Safari does not move the virtual cursor unless the focus call\n          // is sync. However, for the very first focus call, we need to wait\n          // for the position to be ready in order to prevent unwanted\n          // scrolling. This means the virtual cursor will not move to the first\n          // item when first opening the floating element, but will on\n          // subsequent calls. `preventScroll` is supported in modern Safari,\n          // so we can use that instead.\n          // iOS Safari must be async or the first item will not be focused.\n          sync: isMac() && isSafari() ? isPreventScrollSupported || forceSyncFocus.current : false\n        });\n      }\n    }\n    const initialItem = listRef.current[indexRef.current];\n    if (initialItem) {\n      runFocus(initialItem);\n    }\n    requestAnimationFrame(() => {\n      const waitedItem = listRef.current[indexRef.current] || initialItem;\n      if (!waitedItem) return;\n      if (!initialItem) {\n        runFocus(waitedItem);\n      }\n      const scrollIntoViewOptions = scrollItemIntoViewRef.current;\n      const shouldScrollIntoView = scrollIntoViewOptions && item && (forceScrollIntoView || !isPointerModalityRef.current);\n      if (shouldScrollIntoView) {\n        // JSDOM doesn't support `.scrollIntoView()` but it's widely supported\n        // by all browsers.\n        waitedItem.scrollIntoView == null || waitedItem.scrollIntoView(typeof scrollIntoViewOptions === 'boolean' ? {\n          block: 'nearest',\n          inline: 'nearest'\n        } : scrollIntoViewOptions);\n      }\n    });\n  });\n  index(() => {\n    document.createElement('div').focus({\n      get preventScroll() {\n        isPreventScrollSupported = true;\n        return false;\n      }\n    });\n  }, []);\n\n  // Sync `selectedIndex` to be the `activeIndex` upon opening the floating\n  // element. Also, reset `activeIndex` upon closing the floating element.\n  index(() => {\n    if (!enabled) return;\n    if (open && elements.floating) {\n      if (focusItemOnOpenRef.current && selectedIndex != null) {\n        // Regardless of the pointer modality, we want to ensure the selected\n        // item comes into view when the floating element is opened.\n        forceScrollIntoViewRef.current = true;\n        indexRef.current = selectedIndex;\n        onNavigate(selectedIndex);\n      }\n    } else if (previousMountedRef.current) {\n      // Since the user can specify `onNavigate` conditionally\n      // (onNavigate: open ? setActiveIndex : setSelectedIndex),\n      // we store and call the previous function.\n      indexRef.current = -1;\n      previousOnNavigateRef.current(null);\n    }\n  }, [enabled, open, elements.floating, selectedIndex, onNavigate]);\n\n  // Sync `activeIndex` to be the focused item while the floating element is\n  // open.\n  index(() => {\n    if (!enabled) return;\n    if (open && elements.floating) {\n      if (activeIndex == null) {\n        forceSyncFocus.current = false;\n        if (selectedIndexRef.current != null) {\n          return;\n        }\n\n        // Reset while the floating element was open (e.g. the list changed).\n        if (previousMountedRef.current) {\n          indexRef.current = -1;\n          focusItem(listRef, indexRef);\n        }\n\n        // Initial sync.\n        if ((!previousOpenRef.current || !previousMountedRef.current) && focusItemOnOpenRef.current && (keyRef.current != null || focusItemOnOpenRef.current === true && keyRef.current == null)) {\n          let runs = 0;\n          const waitForListPopulated = () => {\n            if (listRef.current[0] == null) {\n              // Avoid letting the browser paint if possible on the first try,\n              // otherwise use rAF. Don't try more than twice, since something\n              // is wrong otherwise.\n              if (runs < 2) {\n                const scheduler = runs ? requestAnimationFrame : queueMicrotask;\n                scheduler(waitForListPopulated);\n              }\n              runs++;\n            } else {\n              indexRef.current = keyRef.current == null || isMainOrientationToEndKey(keyRef.current, orientation, rtl) || nested ? getMinIndex(listRef, disabledIndicesRef.current) : getMaxIndex(listRef, disabledIndicesRef.current);\n              keyRef.current = null;\n              onNavigate(indexRef.current);\n            }\n          };\n          waitForListPopulated();\n        }\n      } else if (!isIndexOutOfBounds(listRef, activeIndex)) {\n        indexRef.current = activeIndex;\n        focusItem(listRef, indexRef, forceScrollIntoViewRef.current);\n        forceScrollIntoViewRef.current = false;\n      }\n    }\n  }, [enabled, open, elements.floating, activeIndex, selectedIndexRef, nested, listRef, orientation, rtl, onNavigate, focusItem, disabledIndicesRef]);\n\n  // Ensure the parent floating element has focus when a nested child closes\n  // to allow arrow key navigation to work after the pointer leaves the child.\n  index(() => {\n    var _nodes$find;\n    if (!enabled || elements.floating || !tree || virtual || !previousMountedRef.current) {\n      return;\n    }\n    const nodes = tree.nodesRef.current;\n    const parent = (_nodes$find = nodes.find(node => node.id === parentId)) == null || (_nodes$find = _nodes$find.context) == null ? void 0 : _nodes$find.elements.floating;\n    const activeEl = activeElement(getDocument(elements.floating));\n    const treeContainsActiveEl = nodes.some(node => node.context && contains(node.context.elements.floating, activeEl));\n    if (parent && !treeContainsActiveEl && isPointerModalityRef.current) {\n      parent.focus({\n        preventScroll: true\n      });\n    }\n  }, [enabled, elements.floating, tree, parentId, virtual]);\n  index(() => {\n    if (!enabled) return;\n    if (!tree) return;\n    if (!virtual) return;\n    if (parentId) return;\n    function handleVirtualFocus(item) {\n      setVirtualId(item.id);\n      if (virtualItemRef) {\n        virtualItemRef.current = item;\n      }\n    }\n    tree.events.on('virtualfocus', handleVirtualFocus);\n    return () => {\n      tree.events.off('virtualfocus', handleVirtualFocus);\n    };\n  }, [enabled, tree, virtual, parentId, virtualItemRef]);\n  index(() => {\n    previousOnNavigateRef.current = onNavigate;\n    previousMountedRef.current = !!elements.floating;\n  });\n  index(() => {\n    if (!open) {\n      keyRef.current = null;\n    }\n  }, [open]);\n  index(() => {\n    previousOpenRef.current = open;\n  }, [open]);\n  const hasActiveIndex = activeIndex != null;\n  const item = React.useMemo(() => {\n    function syncCurrentTarget(currentTarget) {\n      if (!open) return;\n      const index = listRef.current.indexOf(currentTarget);\n      if (index !== -1) {\n        onNavigate(index);\n      }\n    }\n    const props = {\n      onFocus(_ref) {\n        let {\n          currentTarget\n        } = _ref;\n        syncCurrentTarget(currentTarget);\n      },\n      onClick: _ref2 => {\n        let {\n          currentTarget\n        } = _ref2;\n        return currentTarget.focus({\n          preventScroll: true\n        });\n      },\n      // Safari\n      ...(focusItemOnHover && {\n        onMouseMove(_ref3) {\n          let {\n            currentTarget\n          } = _ref3;\n          syncCurrentTarget(currentTarget);\n        },\n        onPointerLeave(_ref4) {\n          let {\n            pointerType\n          } = _ref4;\n          if (!isPointerModalityRef.current || pointerType === 'touch') {\n            return;\n          }\n          indexRef.current = -1;\n          focusItem(listRef, indexRef);\n          onNavigate(null);\n          if (!virtual) {\n            enqueueFocus(floatingRef.current, {\n              preventScroll: true\n            });\n          }\n        }\n      })\n    };\n    return props;\n  }, [open, floatingRef, focusItem, focusItemOnHover, listRef, onNavigate, virtual]);\n  const commonOnKeyDown = useEffectEvent(event => {\n    isPointerModalityRef.current = false;\n    forceSyncFocus.current = true;\n\n    // If the floating element is animating out, ignore navigation. Otherwise,\n    // the `activeIndex` gets set to 0 despite not being open so the next time\n    // the user ArrowDowns, the first item won't be focused.\n    if (!latestOpenRef.current && event.currentTarget === floatingRef.current) {\n      return;\n    }\n    if (nested && isCrossOrientationCloseKey(event.key, orientation, rtl)) {\n      stopEvent(event);\n      onOpenChange(false, event.nativeEvent, 'list-navigation');\n      if (isHTMLElement(elements.domReference) && !virtual) {\n        elements.domReference.focus();\n      }\n      return;\n    }\n    const currentIndex = indexRef.current;\n    const minIndex = getMinIndex(listRef, disabledIndices);\n    const maxIndex = getMaxIndex(listRef, disabledIndices);\n    if (event.key === 'Home') {\n      stopEvent(event);\n      indexRef.current = minIndex;\n      onNavigate(indexRef.current);\n    }\n    if (event.key === 'End') {\n      stopEvent(event);\n      indexRef.current = maxIndex;\n      onNavigate(indexRef.current);\n    }\n\n    // Grid navigation.\n    if (cols > 1) {\n      const sizes = itemSizes || Array.from({\n        length: listRef.current.length\n      }, () => ({\n        width: 1,\n        height: 1\n      }));\n      // To calculate movements on the grid, we use hypothetical cell indices\n      // as if every item was 1x1, then convert back to real indices.\n      const cellMap = buildCellMap(sizes, cols, dense);\n      const minGridIndex = cellMap.findIndex(index => index != null && !isDisabled(listRef.current, index, disabledIndices));\n      // last enabled index\n      const maxGridIndex = cellMap.reduce((foundIndex, index, cellIndex) => index != null && !isDisabled(listRef.current, index, disabledIndices) ? cellIndex : foundIndex, -1);\n      indexRef.current = cellMap[getGridNavigatedIndex({\n        current: cellMap.map(itemIndex => itemIndex != null ? listRef.current[itemIndex] : null)\n      }, {\n        event,\n        orientation,\n        loop,\n        cols,\n        // treat undefined (empty grid spaces) as disabled indices so we\n        // don't end up in them\n        disabledIndices: getCellIndices([...(disabledIndices || listRef.current.map((_, index) => isDisabled(listRef.current, index) ? index : undefined)), undefined], cellMap),\n        minIndex: minGridIndex,\n        maxIndex: maxGridIndex,\n        prevIndex: getCellIndexOfCorner(indexRef.current > maxIndex ? minIndex : indexRef.current, sizes, cellMap, cols,\n        // use a corner matching the edge closest to the direction\n        // we're moving in so we don't end up in the same item. Prefer\n        // top/left over bottom/right.\n        event.key === ARROW_DOWN ? 'bl' : event.key === ARROW_RIGHT ? 'tr' : 'tl'),\n        stopEvent: true\n      })]; // navigated cell will never be nullish\n\n      onNavigate(indexRef.current);\n      if (orientation === 'both') {\n        return;\n      }\n    }\n    if (isMainOrientationKey(event.key, orientation)) {\n      stopEvent(event);\n\n      // Reset the index if no item is focused.\n      if (open && !virtual && activeElement(event.currentTarget.ownerDocument) === event.currentTarget) {\n        indexRef.current = isMainOrientationToEndKey(event.key, orientation, rtl) ? minIndex : maxIndex;\n        onNavigate(indexRef.current);\n        return;\n      }\n      if (isMainOrientationToEndKey(event.key, orientation, rtl)) {\n        if (loop) {\n          indexRef.current = currentIndex >= maxIndex ? allowEscape && currentIndex !== listRef.current.length ? -1 : minIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.min(maxIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            disabledIndices\n          }));\n        }\n      } else {\n        if (loop) {\n          indexRef.current = currentIndex <= minIndex ? allowEscape && currentIndex !== -1 ? listRef.current.length : maxIndex : findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          });\n        } else {\n          indexRef.current = Math.max(minIndex, findNonDisabledIndex(listRef, {\n            startingIndex: currentIndex,\n            decrement: true,\n            disabledIndices\n          }));\n        }\n      }\n      if (isIndexOutOfBounds(listRef, indexRef.current)) {\n        onNavigate(null);\n      } else {\n        onNavigate(indexRef.current);\n      }\n    }\n  });\n  const ariaActiveDescendantProp = React.useMemo(() => {\n    return virtual && open && hasActiveIndex && {\n      'aria-activedescendant': virtualId || activeId\n    };\n  }, [virtual, open, hasActiveIndex, virtualId, activeId]);\n  const floating = React.useMemo(() => {\n    return {\n      'aria-orientation': orientation === 'both' ? undefined : orientation,\n      ...(!isTypeableCombobox(elements.domReference) && ariaActiveDescendantProp),\n      onKeyDown: commonOnKeyDown,\n      onPointerMove() {\n        isPointerModalityRef.current = true;\n      }\n    };\n  }, [ariaActiveDescendantProp, commonOnKeyDown, elements.domReference, orientation]);\n  const reference = React.useMemo(() => {\n    function checkVirtualMouse(event) {\n      if (focusItemOnOpen === 'auto' && isVirtualClick(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    function checkVirtualPointer(event) {\n      // `pointerdown` fires first, reset the state then perform the checks.\n      focusItemOnOpenRef.current = focusItemOnOpen;\n      if (focusItemOnOpen === 'auto' && isVirtualPointerEvent(event.nativeEvent)) {\n        focusItemOnOpenRef.current = true;\n      }\n    }\n    return {\n      ...ariaActiveDescendantProp,\n      onKeyDown(event) {\n        isPointerModalityRef.current = false;\n        const isArrowKey = event.key.indexOf('Arrow') === 0;\n        const isCrossOpenKey = isCrossOrientationOpenKey(event.key, orientation, rtl);\n        const isCrossCloseKey = isCrossOrientationCloseKey(event.key, orientation, rtl);\n        const isMainKey = isMainOrientationKey(event.key, orientation);\n        const isNavigationKey = (nested ? isCrossOpenKey : isMainKey) || event.key === 'Enter' || event.key.trim() === '';\n        if (virtual && open) {\n          const rootNode = tree == null ? void 0 : tree.nodesRef.current.find(node => node.parentId == null);\n          const deepestNode = tree && rootNode ? getDeepestNode(tree.nodesRef.current, rootNode.id) : null;\n          if (isArrowKey && deepestNode && virtualItemRef) {\n            const eventObject = new KeyboardEvent('keydown', {\n              key: event.key,\n              bubbles: true\n            });\n            if (isCrossOpenKey || isCrossCloseKey) {\n              var _deepestNode$context, _deepestNode$context2;\n              const isCurrentTarget = ((_deepestNode$context = deepestNode.context) == null ? void 0 : _deepestNode$context.elements.domReference) === event.currentTarget;\n              const dispatchItem = isCrossCloseKey && !isCurrentTarget ? (_deepestNode$context2 = deepestNode.context) == null ? void 0 : _deepestNode$context2.elements.domReference : isCrossOpenKey ? listRef.current.find(item => (item == null ? void 0 : item.id) === activeId) : null;\n              if (dispatchItem) {\n                stopEvent(event);\n                dispatchItem.dispatchEvent(eventObject);\n                setVirtualId(undefined);\n              }\n            }\n            if (isMainKey && deepestNode.context) {\n              if (deepestNode.context.open && deepestNode.parentId && event.currentTarget !== deepestNode.context.elements.domReference) {\n                var _deepestNode$context$;\n                stopEvent(event);\n                (_deepestNode$context$ = deepestNode.context.elements.domReference) == null || _deepestNode$context$.dispatchEvent(eventObject);\n                return;\n              }\n            }\n          }\n          return commonOnKeyDown(event);\n        }\n\n        // If a floating element should not open on arrow key down, avoid\n        // setting `activeIndex` while it's closed.\n        if (!open && !openOnArrowKeyDown && isArrowKey) {\n          return;\n        }\n        if (isNavigationKey) {\n          keyRef.current = nested && isMainKey ? null : event.key;\n        }\n        if (nested) {\n          if (isCrossOpenKey) {\n            stopEvent(event);\n            if (open) {\n              indexRef.current = getMinIndex(listRef, disabledIndicesRef.current);\n              onNavigate(indexRef.current);\n            } else {\n              onOpenChange(true, event.nativeEvent, 'list-navigation');\n            }\n          }\n          return;\n        }\n        if (isMainKey) {\n          if (selectedIndex != null) {\n            indexRef.current = selectedIndex;\n          }\n          stopEvent(event);\n          if (!open && openOnArrowKeyDown) {\n            onOpenChange(true, event.nativeEvent, 'list-navigation');\n          } else {\n            commonOnKeyDown(event);\n          }\n          if (open) {\n            onNavigate(indexRef.current);\n          }\n        }\n      },\n      onFocus() {\n        if (open && !virtual) {\n          onNavigate(null);\n        }\n      },\n      onPointerDown: checkVirtualPointer,\n      onMouseDown: checkVirtualMouse,\n      onClick: checkVirtualMouse\n    };\n  }, [activeId, ariaActiveDescendantProp, commonOnKeyDown, disabledIndicesRef, focusItemOnOpen, listRef, nested, onNavigate, onOpenChange, open, openOnArrowKeyDown, orientation, rtl, selectedIndex, tree, virtual, virtualItemRef]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\nconst componentRoleToAriaRoleMap = /*#__PURE__*/new Map([['select', 'listbox'], ['combobox', 'listbox'], ['label', false]]);\n\n/**\n * Adds base screen reader props to the reference and floating elements for a\n * given floating element `role`.\n * @see https://floating-ui.com/docs/useRole\n */\nfunction useRole(context, props) {\n  var _componentRoleToAriaR;\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    floatingId\n  } = context;\n  const {\n    enabled = true,\n    role = 'dialog'\n  } = props;\n  const ariaRole = (_componentRoleToAriaR = componentRoleToAriaRoleMap.get(role)) != null ? _componentRoleToAriaR : role;\n  const referenceId = useId();\n  const parentId = useFloatingParentNodeId();\n  const isNested = parentId != null;\n  const reference = React.useMemo(() => {\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return {\n        [\"aria-\" + (role === 'label' ? 'labelledby' : 'describedby')]: open ? floatingId : undefined\n      };\n    }\n    return {\n      'aria-expanded': open ? 'true' : 'false',\n      'aria-haspopup': ariaRole === 'alertdialog' ? 'dialog' : ariaRole,\n      'aria-controls': open ? floatingId : undefined,\n      ...(ariaRole === 'listbox' && {\n        role: 'combobox'\n      }),\n      ...(ariaRole === 'menu' && {\n        id: referenceId\n      }),\n      ...(ariaRole === 'menu' && isNested && {\n        role: 'menuitem'\n      }),\n      ...(role === 'select' && {\n        'aria-autocomplete': 'none'\n      }),\n      ...(role === 'combobox' && {\n        'aria-autocomplete': 'list'\n      })\n    };\n  }, [ariaRole, floatingId, isNested, open, referenceId, role]);\n  const floating = React.useMemo(() => {\n    const floatingProps = {\n      id: floatingId,\n      ...(ariaRole && {\n        role: ariaRole\n      })\n    };\n    if (ariaRole === 'tooltip' || role === 'label') {\n      return floatingProps;\n    }\n    return {\n      ...floatingProps,\n      ...(ariaRole === 'menu' && {\n        'aria-labelledby': referenceId\n      })\n    };\n  }, [ariaRole, floatingId, referenceId, role]);\n  const item = React.useCallback(_ref => {\n    let {\n      active,\n      selected\n    } = _ref;\n    const commonProps = {\n      role: 'option',\n      ...(active && {\n        id: floatingId + \"-option\"\n      })\n    };\n\n    // For `menu`, we are unable to tell if the item is a `menuitemradio`\n    // or `menuitemcheckbox`. For backwards-compatibility reasons, also\n    // avoid defaulting to `menuitem` as it may overwrite custom role props.\n    switch (role) {\n      case 'select':\n        return {\n          ...commonProps,\n          'aria-selected': active && selected\n        };\n      case 'combobox':\n        {\n          return {\n            ...commonProps,\n            ...(active && {\n              'aria-selected': true\n            })\n          };\n        }\n    }\n    return {};\n  }, [floatingId, role]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating,\n    item\n  } : {}, [enabled, reference, floating, item]);\n}\n\n// Converts a JS style key like `backgroundColor` to a CSS transition-property\n// like `background-color`.\nconst camelCaseToKebabCase = str => str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());\nfunction execWithArgsOrReturn(valueOrFn, args) {\n  return typeof valueOrFn === 'function' ? valueOrFn(args) : valueOrFn;\n}\nfunction useDelayUnmount(open, durationMs) {\n  const [isMounted, setIsMounted] = React.useState(open);\n  if (open && !isMounted) {\n    setIsMounted(true);\n  }\n  React.useEffect(() => {\n    if (!open && isMounted) {\n      const timeout = setTimeout(() => setIsMounted(false), durationMs);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isMounted, durationMs]);\n  return isMounted;\n}\n/**\n * Provides a status string to apply CSS transitions to a floating element,\n * correctly handling placement-aware transitions.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstatus\n */\nfunction useTransitionStatus(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    open,\n    elements: {\n      floating\n    }\n  } = context;\n  const {\n    duration = 250\n  } = props;\n  const isNumberDuration = typeof duration === 'number';\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [status, setStatus] = React.useState('unmounted');\n  const isMounted = useDelayUnmount(open, closeDuration);\n  if (!isMounted && status === 'close') {\n    setStatus('unmounted');\n  }\n  index(() => {\n    if (!floating) return;\n    if (open) {\n      setStatus('initial');\n      const frame = requestAnimationFrame(() => {\n        setStatus('open');\n      });\n      return () => {\n        cancelAnimationFrame(frame);\n      };\n    }\n    setStatus('close');\n  }, [open, floating]);\n  return {\n    isMounted,\n    status\n  };\n}\n/**\n * Provides styles to apply CSS transitions to a floating element, correctly\n * handling placement-aware transitions. Wrapper around `useTransitionStatus`.\n * @see https://floating-ui.com/docs/useTransition#usetransitionstyles\n */\nfunction useTransitionStyles(context, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  const {\n    initial: unstable_initial = {\n      opacity: 0\n    },\n    open: unstable_open,\n    close: unstable_close,\n    common: unstable_common,\n    duration = 250\n  } = props;\n  const placement = context.placement;\n  const side = placement.split('-')[0];\n  const fnArgs = React.useMemo(() => ({\n    side,\n    placement\n  }), [side, placement]);\n  const isNumberDuration = typeof duration === 'number';\n  const openDuration = (isNumberDuration ? duration : duration.open) || 0;\n  const closeDuration = (isNumberDuration ? duration : duration.close) || 0;\n  const [styles, setStyles] = React.useState(() => ({\n    ...execWithArgsOrReturn(unstable_common, fnArgs),\n    ...execWithArgsOrReturn(unstable_initial, fnArgs)\n  }));\n  const {\n    isMounted,\n    status\n  } = useTransitionStatus(context, {\n    duration\n  });\n  const initialRef = useLatestRef(unstable_initial);\n  const openRef = useLatestRef(unstable_open);\n  const closeRef = useLatestRef(unstable_close);\n  const commonRef = useLatestRef(unstable_common);\n  index(() => {\n    const initialStyles = execWithArgsOrReturn(initialRef.current, fnArgs);\n    const closeStyles = execWithArgsOrReturn(closeRef.current, fnArgs);\n    const commonStyles = execWithArgsOrReturn(commonRef.current, fnArgs);\n    const openStyles = execWithArgsOrReturn(openRef.current, fnArgs) || Object.keys(initialStyles).reduce((acc, key) => {\n      acc[key] = '';\n      return acc;\n    }, {});\n    if (status === 'initial') {\n      setStyles(styles => ({\n        transitionProperty: styles.transitionProperty,\n        ...commonStyles,\n        ...initialStyles\n      }));\n    }\n    if (status === 'open') {\n      setStyles({\n        transitionProperty: Object.keys(openStyles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: openDuration + \"ms\",\n        ...commonStyles,\n        ...openStyles\n      });\n    }\n    if (status === 'close') {\n      const styles = closeStyles || initialStyles;\n      setStyles({\n        transitionProperty: Object.keys(styles).map(camelCaseToKebabCase).join(','),\n        transitionDuration: closeDuration + \"ms\",\n        ...commonStyles,\n        ...styles\n      });\n    }\n  }, [closeDuration, closeRef, initialRef, openRef, commonRef, openDuration, status, fnArgs]);\n  return {\n    isMounted,\n    styles\n  };\n}\n\n/**\n * Provides a matching callback that can be used to focus an item as the user\n * types, often used in tandem with `useListNavigation()`.\n * @see https://floating-ui.com/docs/useTypeahead\n */\nfunction useTypeahead(context, props) {\n  var _ref;\n  const {\n    open,\n    dataRef\n  } = context;\n  const {\n    listRef,\n    activeIndex,\n    onMatch: unstable_onMatch,\n    onTypingChange: unstable_onTypingChange,\n    enabled = true,\n    findMatch = null,\n    resetMs = 750,\n    ignoreKeys = [],\n    selectedIndex = null\n  } = props;\n  const timeoutIdRef = React.useRef();\n  const stringRef = React.useRef('');\n  const prevIndexRef = React.useRef((_ref = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref : -1);\n  const matchIndexRef = React.useRef(null);\n  const onMatch = useEffectEvent(unstable_onMatch);\n  const onTypingChange = useEffectEvent(unstable_onTypingChange);\n  const findMatchRef = useLatestRef(findMatch);\n  const ignoreKeysRef = useLatestRef(ignoreKeys);\n  index(() => {\n    if (open) {\n      clearTimeout(timeoutIdRef.current);\n      matchIndexRef.current = null;\n      stringRef.current = '';\n    }\n  }, [open]);\n  index(() => {\n    // Sync arrow key navigation but not typeahead navigation.\n    if (open && stringRef.current === '') {\n      var _ref2;\n      prevIndexRef.current = (_ref2 = selectedIndex != null ? selectedIndex : activeIndex) != null ? _ref2 : -1;\n    }\n  }, [open, selectedIndex, activeIndex]);\n  const setTypingChange = useEffectEvent(value => {\n    if (value) {\n      if (!dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    } else {\n      if (dataRef.current.typing) {\n        dataRef.current.typing = value;\n        onTypingChange(value);\n      }\n    }\n  });\n  const onKeyDown = useEffectEvent(event => {\n    function getMatchingIndex(list, orderedList, string) {\n      const str = findMatchRef.current ? findMatchRef.current(orderedList, string) : orderedList.find(text => (text == null ? void 0 : text.toLocaleLowerCase().indexOf(string.toLocaleLowerCase())) === 0);\n      return str ? list.indexOf(str) : -1;\n    }\n    const listContent = listRef.current;\n    if (stringRef.current.length > 0 && stringRef.current[0] !== ' ') {\n      if (getMatchingIndex(listContent, listContent, stringRef.current) === -1) {\n        setTypingChange(false);\n      } else if (event.key === ' ') {\n        stopEvent(event);\n      }\n    }\n    if (listContent == null || ignoreKeysRef.current.includes(event.key) ||\n    // Character key.\n    event.key.length !== 1 ||\n    // Modifier key.\n    event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    if (open && event.key !== ' ') {\n      stopEvent(event);\n      setTypingChange(true);\n    }\n\n    // Bail out if the list contains a word like \"llama\" or \"aaron\". TODO:\n    // allow it in this case, too.\n    const allowRapidSuccessionOfFirstLetter = listContent.every(text => {\n      var _text$, _text$2;\n      return text ? ((_text$ = text[0]) == null ? void 0 : _text$.toLocaleLowerCase()) !== ((_text$2 = text[1]) == null ? void 0 : _text$2.toLocaleLowerCase()) : true;\n    });\n\n    // Allows the user to cycle through items that start with the same letter\n    // in rapid succession.\n    if (allowRapidSuccessionOfFirstLetter && stringRef.current === event.key) {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n    }\n    stringRef.current += event.key;\n    clearTimeout(timeoutIdRef.current);\n    timeoutIdRef.current = setTimeout(() => {\n      stringRef.current = '';\n      prevIndexRef.current = matchIndexRef.current;\n      setTypingChange(false);\n    }, resetMs);\n    const prevIndex = prevIndexRef.current;\n    const index = getMatchingIndex(listContent, [...listContent.slice((prevIndex || 0) + 1), ...listContent.slice(0, (prevIndex || 0) + 1)], stringRef.current);\n    if (index !== -1) {\n      onMatch(index);\n      matchIndexRef.current = index;\n    } else if (event.key !== ' ') {\n      stringRef.current = '';\n      setTypingChange(false);\n    }\n  });\n  const reference = React.useMemo(() => ({\n    onKeyDown\n  }), [onKeyDown]);\n  const floating = React.useMemo(() => {\n    return {\n      onKeyDown,\n      onKeyUp(event) {\n        if (event.key === ' ') {\n          setTypingChange(false);\n        }\n      }\n    };\n  }, [onKeyDown, setTypingChange]);\n  return React.useMemo(() => enabled ? {\n    reference,\n    floating\n  } : {}, [enabled, reference, floating]);\n}\n\nfunction getArgsWithCustomFloatingHeight(state, height) {\n  return {\n    ...state,\n    rects: {\n      ...state.rects,\n      floating: {\n        ...state.rects.floating,\n        height\n      }\n    }\n  };\n}\n/**\n * Positions the floating element such that an inner element inside of it is\n * anchored to the reference element.\n * @see https://floating-ui.com/docs/inner\n */\nconst inner = props => ({\n  name: 'inner',\n  options: props,\n  async fn(state) {\n    const {\n      listRef,\n      overflowRef,\n      onFallbackChange,\n      offset: innerOffset = 0,\n      index = 0,\n      minItemsVisible = 4,\n      referenceOverflowThreshold = 0,\n      scrollRef,\n      ...detectOverflowOptions\n    } = evaluate(props, state);\n    const {\n      rects,\n      elements: {\n        floating\n      }\n    } = state;\n    const item = listRef.current[index];\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!state.placement.startsWith('bottom')) {\n        warn('`placement` side must be \"bottom\" when using the `inner`', 'middleware.');\n      }\n    }\n    if (!item) {\n      return {};\n    }\n    const nextArgs = {\n      ...state,\n      ...(await offset(-item.offsetTop - floating.clientTop - rects.reference.height / 2 - item.offsetHeight / 2 - innerOffset).fn(state))\n    };\n    const el = (scrollRef == null ? void 0 : scrollRef.current) || floating;\n    const overflow = await detectOverflow(getArgsWithCustomFloatingHeight(nextArgs, el.scrollHeight), detectOverflowOptions);\n    const refOverflow = await detectOverflow(nextArgs, {\n      ...detectOverflowOptions,\n      elementContext: 'reference'\n    });\n    const diffY = Math.max(0, overflow.top);\n    const nextY = nextArgs.y + diffY;\n    const maxHeight = Math.max(0, el.scrollHeight - diffY - Math.max(0, overflow.bottom));\n    el.style.maxHeight = maxHeight + \"px\";\n    el.scrollTop = diffY;\n\n    // There is not enough space, fallback to standard anchored positioning\n    if (onFallbackChange) {\n      if (el.offsetHeight < item.offsetHeight * Math.min(minItemsVisible, listRef.current.length - 1) - 1 || refOverflow.top >= -referenceOverflowThreshold || refOverflow.bottom >= -referenceOverflowThreshold) {\n        ReactDOM.flushSync(() => onFallbackChange(true));\n      } else {\n        ReactDOM.flushSync(() => onFallbackChange(false));\n      }\n    }\n    if (overflowRef) {\n      overflowRef.current = await detectOverflow(getArgsWithCustomFloatingHeight({\n        ...nextArgs,\n        y: nextY\n      }, el.offsetHeight), detectOverflowOptions);\n    }\n    return {\n      y: nextY\n    };\n  }\n});\n/**\n * Changes the `inner` middleware's `offset` upon a `wheel` event to\n * expand the floating element's height, revealing more list items.\n * @see https://floating-ui.com/docs/inner\n */\nfunction useInnerOffset(context, props) {\n  const {\n    open,\n    elements\n  } = context;\n  const {\n    enabled = true,\n    overflowRef,\n    scrollRef,\n    onChange: unstable_onChange\n  } = props;\n  const onChange = useEffectEvent(unstable_onChange);\n  const controlledScrollingRef = React.useRef(false);\n  const prevScrollTopRef = React.useRef(null);\n  const initialOverflowRef = React.useRef(null);\n  React.useEffect(() => {\n    if (!enabled) return;\n    function onWheel(e) {\n      if (e.ctrlKey || !el || overflowRef.current == null) {\n        return;\n      }\n      const dY = e.deltaY;\n      const isAtTop = overflowRef.current.top >= -0.5;\n      const isAtBottom = overflowRef.current.bottom >= -0.5;\n      const remainingScroll = el.scrollHeight - el.clientHeight;\n      const sign = dY < 0 ? -1 : 1;\n      const method = dY < 0 ? 'max' : 'min';\n      if (el.scrollHeight <= el.clientHeight) {\n        return;\n      }\n      if (!isAtTop && dY > 0 || !isAtBottom && dY < 0) {\n        e.preventDefault();\n        ReactDOM.flushSync(() => {\n          onChange(d => d + Math[method](dY, remainingScroll * sign));\n        });\n      } else if (/firefox/i.test(getUserAgent())) {\n        // Needed to propagate scrolling during momentum scrolling phase once\n        // it gets limited by the boundary. UX improvement, not critical.\n        el.scrollTop += dY;\n      }\n    }\n    const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n    if (open && el) {\n      el.addEventListener('wheel', onWheel);\n\n      // Wait for the position to be ready.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n        if (overflowRef.current != null) {\n          initialOverflowRef.current = {\n            ...overflowRef.current\n          };\n        }\n      });\n      return () => {\n        prevScrollTopRef.current = null;\n        initialOverflowRef.current = null;\n        el.removeEventListener('wheel', onWheel);\n      };\n    }\n  }, [enabled, open, elements.floating, overflowRef, scrollRef, onChange]);\n  const floating = React.useMemo(() => ({\n    onKeyDown() {\n      controlledScrollingRef.current = true;\n    },\n    onWheel() {\n      controlledScrollingRef.current = false;\n    },\n    onPointerMove() {\n      controlledScrollingRef.current = false;\n    },\n    onScroll() {\n      const el = (scrollRef == null ? void 0 : scrollRef.current) || elements.floating;\n      if (!overflowRef.current || !el || !controlledScrollingRef.current) {\n        return;\n      }\n      if (prevScrollTopRef.current !== null) {\n        const scrollDiff = el.scrollTop - prevScrollTopRef.current;\n        if (overflowRef.current.bottom < -0.5 && scrollDiff < -1 || overflowRef.current.top < -0.5 && scrollDiff > 1) {\n          ReactDOM.flushSync(() => onChange(d => d + scrollDiff));\n        }\n      }\n\n      // [Firefox] Wait for the height change to have been applied.\n      requestAnimationFrame(() => {\n        prevScrollTopRef.current = el.scrollTop;\n      });\n    }\n  }), [elements.floating, onChange, overflowRef, scrollRef]);\n  return React.useMemo(() => enabled ? {\n    floating\n  } : {}, [enabled, floating]);\n}\n\nfunction isPointInPolygon(point, polygon) {\n  const [x, y] = point;\n  let isInside = false;\n  const length = polygon.length;\n  for (let i = 0, j = length - 1; i < length; j = i++) {\n    const [xi, yi] = polygon[i] || [0, 0];\n    const [xj, yj] = polygon[j] || [0, 0];\n    const intersect = yi >= y !== yj >= y && x <= (xj - xi) * (y - yi) / (yj - yi) + xi;\n    if (intersect) {\n      isInside = !isInside;\n    }\n  }\n  return isInside;\n}\nfunction isInside(point, rect) {\n  return point[0] >= rect.x && point[0] <= rect.x + rect.width && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n}\n/**\n * Generates a safe polygon area that the user can traverse without closing the\n * floating element once leaving the reference element.\n * @see https://floating-ui.com/docs/useHover#safepolygon\n */\nfunction safePolygon(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    buffer = 0.5,\n    blockPointerEvents = false,\n    requireIntent = true\n  } = options;\n  let timeoutId;\n  let hasLanded = false;\n  let lastX = null;\n  let lastY = null;\n  let lastCursorTime = performance.now();\n  function getCursorSpeed(x, y) {\n    const currentTime = performance.now();\n    const elapsedTime = currentTime - lastCursorTime;\n    if (lastX === null || lastY === null || elapsedTime === 0) {\n      lastX = x;\n      lastY = y;\n      lastCursorTime = currentTime;\n      return null;\n    }\n    const deltaX = x - lastX;\n    const deltaY = y - lastY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const speed = distance / elapsedTime; // px / ms\n\n    lastX = x;\n    lastY = y;\n    lastCursorTime = currentTime;\n    return speed;\n  }\n  const fn = _ref => {\n    let {\n      x,\n      y,\n      placement,\n      elements,\n      onClose,\n      nodeId,\n      tree\n    } = _ref;\n    return function onMouseMove(event) {\n      function close() {\n        clearTimeout(timeoutId);\n        onClose();\n      }\n      clearTimeout(timeoutId);\n      if (!elements.domReference || !elements.floating || placement == null || x == null || y == null) {\n        return;\n      }\n      const {\n        clientX,\n        clientY\n      } = event;\n      const clientPoint = [clientX, clientY];\n      const target = getTarget(event);\n      const isLeave = event.type === 'mouseleave';\n      const isOverFloatingEl = contains(elements.floating, target);\n      const isOverReferenceEl = contains(elements.domReference, target);\n      const refRect = elements.domReference.getBoundingClientRect();\n      const rect = elements.floating.getBoundingClientRect();\n      const side = placement.split('-')[0];\n      const cursorLeaveFromRight = x > rect.right - rect.width / 2;\n      const cursorLeaveFromBottom = y > rect.bottom - rect.height / 2;\n      const isOverReferenceRect = isInside(clientPoint, refRect);\n      const isFloatingWider = rect.width > refRect.width;\n      const isFloatingTaller = rect.height > refRect.height;\n      const left = (isFloatingWider ? refRect : rect).left;\n      const right = (isFloatingWider ? refRect : rect).right;\n      const top = (isFloatingTaller ? refRect : rect).top;\n      const bottom = (isFloatingTaller ? refRect : rect).bottom;\n      if (isOverFloatingEl) {\n        hasLanded = true;\n        if (!isLeave) {\n          return;\n        }\n      }\n      if (isOverReferenceEl) {\n        hasLanded = false;\n      }\n      if (isOverReferenceEl && !isLeave) {\n        hasLanded = true;\n        return;\n      }\n\n      // Prevent overlapping floating element from being stuck in an open-close\n      // loop: https://github.com/floating-ui/floating-ui/issues/1910\n      if (isLeave && isElement(event.relatedTarget) && contains(elements.floating, event.relatedTarget)) {\n        return;\n      }\n\n      // If any nested child is open, abort.\n      if (tree && getChildren(tree.nodesRef.current, nodeId).some(_ref2 => {\n        let {\n          context\n        } = _ref2;\n        return context == null ? void 0 : context.open;\n      })) {\n        return;\n      }\n\n      // If the pointer is leaving from the opposite side, the \"buffer\" logic\n      // creates a point where the floating element remains open, but should be\n      // ignored.\n      // A constant of 1 handles floating point rounding errors.\n      if (side === 'top' && y >= refRect.bottom - 1 || side === 'bottom' && y <= refRect.top + 1 || side === 'left' && x >= refRect.right - 1 || side === 'right' && x <= refRect.left + 1) {\n        return close();\n      }\n\n      // Ignore when the cursor is within the rectangular trough between the\n      // two elements. Since the triangle is created from the cursor point,\n      // which can start beyond the ref element's edge, traversing back and\n      // forth from the ref to the floating element can cause it to close. This\n      // ensures it always remains open in that case.\n      let rectPoly = [];\n      switch (side) {\n        case 'top':\n          rectPoly = [[left, refRect.top + 1], [left, rect.bottom - 1], [right, rect.bottom - 1], [right, refRect.top + 1]];\n          break;\n        case 'bottom':\n          rectPoly = [[left, rect.top + 1], [left, refRect.bottom - 1], [right, refRect.bottom - 1], [right, rect.top + 1]];\n          break;\n        case 'left':\n          rectPoly = [[rect.right - 1, bottom], [rect.right - 1, top], [refRect.left + 1, top], [refRect.left + 1, bottom]];\n          break;\n        case 'right':\n          rectPoly = [[refRect.right - 1, bottom], [refRect.right - 1, top], [rect.left + 1, top], [rect.left + 1, bottom]];\n          break;\n      }\n      function getPolygon(_ref3) {\n        let [x, y] = _ref3;\n        switch (side) {\n          case 'top':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y + buffer + 1];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.bottom - buffer : isFloatingWider ? rect.bottom - buffer : rect.top], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.bottom - buffer : rect.top : rect.bottom - buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'bottom':\n            {\n              const cursorPointOne = [isFloatingWider ? x + buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const cursorPointTwo = [isFloatingWider ? x - buffer / 2 : cursorLeaveFromRight ? x + buffer * 4 : x - buffer * 4, y - buffer];\n              const commonPoints = [[rect.left, cursorLeaveFromRight ? rect.top + buffer : isFloatingWider ? rect.top + buffer : rect.bottom], [rect.right, cursorLeaveFromRight ? isFloatingWider ? rect.top + buffer : rect.bottom : rect.top + buffer]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n          case 'left':\n            {\n              const cursorPointOne = [x + buffer + 1, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x + buffer + 1, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.right - buffer : isFloatingTaller ? rect.right - buffer : rect.left, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.right - buffer : rect.left : rect.right - buffer, rect.bottom]];\n              return [...commonPoints, cursorPointOne, cursorPointTwo];\n            }\n          case 'right':\n            {\n              const cursorPointOne = [x - buffer, isFloatingTaller ? y + buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const cursorPointTwo = [x - buffer, isFloatingTaller ? y - buffer / 2 : cursorLeaveFromBottom ? y + buffer * 4 : y - buffer * 4];\n              const commonPoints = [[cursorLeaveFromBottom ? rect.left + buffer : isFloatingTaller ? rect.left + buffer : rect.right, rect.top], [cursorLeaveFromBottom ? isFloatingTaller ? rect.left + buffer : rect.right : rect.left + buffer, rect.bottom]];\n              return [cursorPointOne, cursorPointTwo, ...commonPoints];\n            }\n        }\n      }\n      if (isPointInPolygon([clientX, clientY], rectPoly)) {\n        return;\n      }\n      if (hasLanded && !isOverReferenceRect) {\n        return close();\n      }\n      if (!isLeave && requireIntent) {\n        const cursorSpeed = getCursorSpeed(event.clientX, event.clientY);\n        const cursorSpeedThreshold = 0.1;\n        if (cursorSpeed !== null && cursorSpeed < cursorSpeedThreshold) {\n          return close();\n        }\n      }\n      if (!isPointInPolygon([clientX, clientY], getPolygon([x, y]))) {\n        close();\n      } else if (!hasLanded && requireIntent) {\n        timeoutId = window.setTimeout(close, 40);\n      }\n    };\n  };\n  fn.__options = {\n    blockPointerEvents\n  };\n  return fn;\n}\n\nexport { Composite, CompositeItem, FloatingArrow, FloatingDelayGroup, FloatingFocusManager, FloatingList, FloatingNode, FloatingOverlay, FloatingPortal, FloatingTree, inner, safePolygon, useClick, useClientPoint, useDelayGroup, useDelayGroupContext, useDismiss, useFloating, useFloatingNodeId, useFloatingParentNodeId, useFloatingPortalNode, useFloatingRootContext, useFloatingTree, useFocus, useHover, useId, useInnerOffset, useInteractions, useListItem, useListNavigation, useMergeRefs, useRole, useTransitionStatus, useTransitionStyles, useTypeahead };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}